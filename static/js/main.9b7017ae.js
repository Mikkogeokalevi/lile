/*! For license information please see main.9b7017ae.js.LICENSE.txt */
(()=>{var e={228(e,t){!function(e){"use strict";var t="1.9.4";function n(e){var t,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(t in r=arguments[n])e[t]=r[t];return e}var i=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function r(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var i=n.call(arguments,2);return function(){return e.apply(t,i.length?i.concat(n.call(arguments)):arguments)}}var o=0;function s(e){return"_leaflet_id"in e||(e._leaflet_id=++o),e._leaflet_id}function a(e,t,n){var i,r,o,s;return s=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(e.apply(n,arguments),setTimeout(s,t),i=!0)},o}function l(e,t,n){var i=t[1],r=t[0],o=i-r;return e===i&&n?e:((e-r)%o+o)%o+r}function u(){return!1}function c(e,t){if(!1===t)return e;var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function h(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function d(e){return h(e).split(/\s+/)}function f(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?i(e.options):{}),t)e.options[n]=t[n];return e.options}function p(e,t,n){var i=[];for(var r in e)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(e[r]));return(t&&-1!==t.indexOf("?")?"&":"?")+i.join("&")}var m=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(m,function(e,n){var i=t[n];if(void 0===i)throw new Error("No value provided for variable "+e);return"function"===typeof i&&(i=i(t)),i})}var v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function y(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var w=0;function k(e){var t=+new Date,n=Math.max(0,16-(t-w));return w=t+n,window.setTimeout(e,n)}var S=window.requestAnimationFrame||b("RequestAnimationFrame")||k,E=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function x(e,t,n){if(!n||S!==k)return S.call(window,r(e,t));e.call(t)}function T(e){e&&E.call(window,e)}var C={__proto__:null,extend:n,create:i,bind:r,get lastId(){return o},stamp:s,throttle:a,wrapNum:l,falseFn:u,formatNum:c,trim:h,splitWords:d,setOptions:f,getParamString:p,template:g,isArray:v,indexOf:y,emptyImageUrl:_,requestFn:S,cancelFn:E,requestAnimFrame:x,cancelAnimFrame:T};function I(){}function N(e){if("undefined"!==typeof L&&L&&L.Mixin){e=v(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}I.extend=function(e){var t=function(){f(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=t.__super__=this.prototype,o=i(r);for(var s in o.constructor=t,t.prototype=o,this)Object.prototype.hasOwnProperty.call(this,s)&&"prototype"!==s&&"__super__"!==s&&(t[s]=this[s]);return e.statics&&n(t,e.statics),e.includes&&(N(e.includes),n.apply(null,[o].concat(e.includes))),n(o,e),delete o.statics,delete o.includes,o.options&&(o.options=r.options?i(r.options):{},n(o.options,e.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=o._initHooks.length;e<t;e++)o._initHooks[e].call(this)}},t},I.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},I.mergeOptions=function(e){return n(this.prototype.options,e),this},I.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"===typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var P={on:function(e,t,n){if("object"===typeof e)for(var i in e)this._on(i,e[i],t);else for(var r=0,o=(e=d(e)).length;r<o;r++)this._on(e[r],t,n);return this},off:function(e,t,n){if(arguments.length)if("object"===typeof e)for(var i in e)this._off(i,e[i],t);else{e=d(e);for(var r=1===arguments.length,o=0,s=e.length;o<s;o++)r?this._off(e[o]):this._off(e[o],t,n)}else delete this._events;return this},_on:function(e,t,n,i){if("function"===typeof t){if(!1===this._listens(e,t,n)){n===this&&(n=void 0);var r={fn:t,ctx:n};i&&(r.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(r)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,n){var i,r,o;if(this._events&&(i=this._events[e]))if(1!==arguments.length)if("function"===typeof t){var s=this._listens(e,t,n);if(!1!==s){var a=i[s];this._firingCount&&(a.fn=u,this._events[e]=i=i.slice()),i.splice(s,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(r=0,o=i.length;r<o;r++)i[r].fn=u;delete this._events[e]}},fire:function(e,t,i){if(!this.listens(e,i))return this;var r=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var o=this._events[e];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,a=o.length;s<a;s++){var l=o[s],u=l.fn;l.once&&this.off(e,u,l.ctx),u.call(l.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(e,t,n,i){"string"!==typeof e&&console.warn('"string" type argument expected');var r=t;"function"!==typeof t&&(i=!!t,r=void 0,n=void 0);var o=this._events&&this._events[e];if(o&&o.length&&!1!==this._listens(e,r,n))return!0;if(i)for(var s in this._eventParents)if(this._eventParents[s].listens(e,t,n,i))return!0;return!1},_listens:function(e,t,n){if(!this._events)return!1;var i=this._events[e]||[];if(!t)return!!i.length;n===this&&(n=void 0);for(var r=0,o=i.length;r<o;r++)if(i[r].fn===t&&i[r].ctx===n)return r;return!1},once:function(e,t,n){if("object"===typeof e)for(var i in e)this._on(i,e[i],t,!0);else for(var r=0,o=(e=d(e)).length;r<o;r++)this._on(e[r],t,n,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[s(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[s(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};P.addEventListener=P.on,P.removeEventListener=P.clearAllEventListeners=P.off,P.addOneTimeEventListener=P.once,P.fireEvent=P.fire,P.hasEventListeners=P.listens;var A=I.extend(P);function R(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var O=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function M(e,t,n){return e instanceof R?e:v(e)?new R(e[0],e[1]):void 0===e||null===e?e:"object"===typeof e&&"x"in e&&"y"in e?new R(e.x,e.y):new R(e,t,n)}function D(e,t){if(e)for(var n=t?[e,t]:e,i=0,r=n.length;i<r;i++)this.extend(n[i])}function j(e,t){return!e||e instanceof D?e:new D(e,t)}function z(e,t){if(e)for(var n=t?[e,t]:e,i=0,r=n.length;i<r;i++)this.extend(n[i])}function F(e,t){return e instanceof z?e:new z(e,t)}function U(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function V(e,t,n){return e instanceof U?e:v(e)&&"object"!==typeof e[0]?3===e.length?new U(e[0],e[1],e[2]):2===e.length?new U(e[0],e[1]):null:void 0===e||null===e?e:"object"===typeof e&&"lat"in e?new U(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new U(e,t,n)}R.prototype={clone:function(){return new R(this.x,this.y)},add:function(e){return this.clone()._add(M(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(M(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new R(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new R(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=O(this.x),this.y=O(this.y),this},distanceTo:function(e){var t=(e=M(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=M(e)).x===this.x&&e.y===this.y},contains:function(e){return e=M(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},D.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof R||"number"===typeof e[0]||"x"in e)t=n=M(e);else if(t=(e=j(e)).min,n=e.max,!t||!n)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=t.clone(),this.max=n.clone()),this},getCenter:function(e){return M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return M(this.min.x,this.max.y)},getTopRight:function(){return M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"===typeof e[0]||e instanceof R?M(e):j(e))instanceof D?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=j(e);var t=this.min,n=this.max,i=e.min,r=e.max,o=r.x>=t.x&&i.x<=n.x,s=r.y>=t.y&&i.y<=n.y;return o&&s},overlaps:function(e){e=j(e);var t=this.min,n=this.max,i=e.min,r=e.max,o=r.x>t.x&&i.x<n.x,s=r.y>t.y&&i.y<n.y;return o&&s},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,n=this.max,i=Math.abs(t.x-n.x)*e,r=Math.abs(t.y-n.y)*e;return j(M(t.x-i,t.y-r),M(n.x+i,n.y+r))},equals:function(e){return!!e&&(e=j(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},z.prototype={extend:function(e){var t,n,i=this._southWest,r=this._northEast;if(e instanceof U)t=e,n=e;else{if(!(e instanceof z))return e?this.extend(V(e)||F(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return i||r?(i.lat=Math.min(t.lat,i.lat),i.lng=Math.min(t.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new U(t.lat,t.lng),this._northEast=new U(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,i=Math.abs(t.lat-n.lat)*e,r=Math.abs(t.lng-n.lng)*e;return new z(new U(t.lat-i,t.lng-r),new U(n.lat+i,n.lng+r))},getCenter:function(){return new U((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new U(this.getNorth(),this.getWest())},getSouthEast:function(){return new U(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"===typeof e[0]||e instanceof U||"lat"in e?V(e):F(e);var t,n,i=this._southWest,r=this._northEast;return e instanceof z?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=i.lat&&n.lat<=r.lat&&t.lng>=i.lng&&n.lng<=r.lng},intersects:function(e){e=F(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),r=e.getNorthEast(),o=r.lat>=t.lat&&i.lat<=n.lat,s=r.lng>=t.lng&&i.lng<=n.lng;return o&&s},overlaps:function(e){e=F(e);var t=this._southWest,n=this._northEast,i=e.getSouthWest(),r=e.getNorthEast(),o=r.lat>t.lat&&i.lat<n.lat,s=r.lng>t.lng&&i.lng<n.lng;return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=F(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},U.prototype={equals:function(e,t){return!!e&&(e=V(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+c(this.lat,e)+", "+c(this.lng,e)+")"},distanceTo:function(e){return H.distance(this,V(e))},wrap:function(){return H.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return F([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new U(this.lat,this.lng,this.alt)}};var B={latLngToPoint:function(e,t){var n=this.projection.project(e),i=this.scale(t);return this.transformation._transform(n,i)},pointToLatLng:function(e,t){var n=this.scale(t),i=this.transformation.untransform(e,n);return this.projection.unproject(i)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new D(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng;return new U(this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),i=t.lat-n.lat,r=t.lng-n.lng;if(0===i&&0===r)return e;var o=e.getSouthWest(),s=e.getNorthEast();return new z(new U(o.lat-i,o.lng-r),new U(s.lat-i,s.lng-r))}},H=n({},B,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,i=e.lat*n,r=t.lat*n,o=Math.sin((t.lat-e.lat)*n/2),s=Math.sin((t.lng-e.lng)*n/2),a=o*o+Math.cos(i)*Math.cos(r)*s*s,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),q=6378137,W={R:q,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,e.lat),-n),r=Math.sin(i*t);return new R(this.R*e.lng*t,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(e){var t=180/Math.PI;return new U((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=q*Math.PI;return new D([-e,-e],[e,e])}()};function K(e,t,n,i){if(v(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=i}function Z(e,t,n,i){return new K(e,t,n,i)}K.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new R((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var G=n({},H,{code:"EPSG:3857",projection:W,transformation:function(){var e=.5/(Math.PI*W.R);return Z(e,.5,-e,.5)}()}),Q=n({},G,{code:"EPSG:900913"});function J(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Y(e,t){var n,i,r,o,s,a,l="";for(n=0,r=e.length;n<r;n++){for(i=0,o=(s=e[n]).length;i<o;i++)l+=(i?"L":"M")+(a=s[i]).x+" "+a.y;l+=t?De.svg?"z":"x":""}return l||"M0 0"}var X=document.documentElement.style,$="ActiveXObject"in window,ee=$&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ne=Me("webkit"),ie=Me("android"),re=Me("android 2")||Me("android 3"),oe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),se=ie&&Me("Google")&&oe<537&&!("AudioNode"in window),ae=!!window.opera,le=!te&&Me("chrome"),ue=Me("gecko")&&!ne&&!ae&&!$,ce=!le&&Me("safari"),he=Me("phantom"),de="OTransition"in X,fe=0===navigator.platform.indexOf("Win"),pe=$&&"transition"in X,me="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!re,ge="MozPerspective"in X,ve=!window.L_DISABLE_3D&&(pe||me||ge)&&!de&&!he,ye="undefined"!==typeof orientation||Me("mobile"),_e=ye&&ne,be=ye&&me,we=!window.PointerEvent&&window.MSPointerEvent,ke=!(!window.PointerEvent&&!we),Se="ontouchstart"in window||!!window.TouchEvent,Ee=!window.L_NO_TOUCH&&(Se||ke),xe=ye&&ae,Te=ye&&ue,Ce=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ie=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",u,t),window.removeEventListener("testPassiveEventSupport",u,t)}catch(n){}return e}(),Ne=!!document.createElement("canvas").getContext,Pe=!(!document.createElementNS||!J("svg").createSVGRect),Ae=!!Pe&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}(),Le=!Pe&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"===typeof t.adj}catch(n){return!1}}(),Re=0===navigator.platform.indexOf("Mac"),Oe=0===navigator.platform.indexOf("Linux");function Me(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var De={ie:$,ielt9:ee,edge:te,webkit:ne,android:ie,android23:re,androidStock:se,opera:ae,chrome:le,gecko:ue,safari:ce,phantom:he,opera12:de,win:fe,ie3d:pe,webkit3d:me,gecko3d:ge,any3d:ve,mobile:ye,mobileWebkit:_e,mobileWebkit3d:be,msPointer:we,pointer:ke,touch:Ee,touchNative:Se,mobileOpera:xe,mobileGecko:Te,retina:Ce,passiveEvents:Ie,canvas:Ne,svg:Pe,vml:Le,inlineSvg:Ae,mac:Re,linux:Oe},je=De.msPointer?"MSPointerDown":"pointerdown",ze=De.msPointer?"MSPointerMove":"pointermove",Fe=De.msPointer?"MSPointerUp":"pointerup",Ue=De.msPointer?"MSPointerCancel":"pointercancel",Ve={touchstart:je,touchmove:ze,touchend:Fe,touchcancel:Ue},Be={touchstart:Xe,touchmove:Ye,touchend:Ye,touchcancel:Ye},He={},qe=!1;function We(e,t,n){return"touchstart"===t&&Je(),Be[t]?(n=Be[t].bind(this,n),e.addEventListener(Ve[t],n,!1),n):(console.warn("wrong event specified:",t),u)}function Ke(e,t,n){Ve[t]?e.removeEventListener(Ve[t],n,!1):console.warn("wrong event specified:",t)}function Ze(e){He[e.pointerId]=e}function Ge(e){He[e.pointerId]&&(He[e.pointerId]=e)}function Qe(e){delete He[e.pointerId]}function Je(){qe||(document.addEventListener(je,Ze,!0),document.addEventListener(ze,Ge,!0),document.addEventListener(Fe,Qe,!0),document.addEventListener(Ue,Qe,!0),qe=!0)}function Ye(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in t.touches=[],He)t.touches.push(He[n]);t.changedTouches=[t],e(t)}}function Xe(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Zt(t),Ye(e,t)}function $e(e){var t,n,i={};for(n in e)t=e[n],i[n]=t&&t.bind?t.bind(e):t;return e=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var et=200;function tt(e,t){e.addEventListener("dblclick",t);var n,i=0;function r(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var r=Qt(e);if(!r.some(function(e){return e instanceof HTMLLabelElement&&e.attributes.for})||r.some(function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement})){var o=Date.now();o-i<=et?2===++n&&t($e(e)):n=1,i=o}}}else n=e.detail}return e.addEventListener("click",r),{dblclick:t,simDblclick:r}}function nt(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var it,rt,ot,st,at,lt=xt(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ut=xt(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ct="webkitTransition"===ut||"OTransition"===ut?ut+"End":"transitionend";function ht(e){return"string"===typeof e?document.getElementById(e):e}function dt(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(e,null);n=i?i[t]:null}return"auto"===n?null:n}function ft(e,t,n){var i=document.createElement(e);return i.className=t||"",n&&n.appendChild(i),i}function pt(e){var t=e.parentNode;t&&t.removeChild(e)}function mt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function gt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function vt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function yt(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=kt(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function _t(e,t){if(void 0!==e.classList)for(var n=d(t),i=0,r=n.length;i<r;i++)e.classList.add(n[i]);else if(!yt(e,t)){var o=kt(e);wt(e,(o?o+" ":"")+t)}}function bt(e,t){void 0!==e.classList?e.classList.remove(t):wt(e,h((" "+kt(e)+" ").replace(" "+t+" "," ")))}function wt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function kt(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function St(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&Et(e,t)}function Et(e,t){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(i)}catch(r){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+i+"(opacity="+t+")"}function xt(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function Tt(e,t,n){var i=t||new R(0,0);e.style[lt]=(De.ie3d?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function Ct(e,t){e._leaflet_pos=t,De.any3d?Tt(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function It(e){return e._leaflet_pos||new R(0,0)}if("onselectstart"in document)it=function(){jt(window,"selectstart",Zt)},rt=function(){Ft(window,"selectstart",Zt)};else{var Nt=xt(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);it=function(){if(Nt){var e=document.documentElement.style;ot=e[Nt],e[Nt]="none"}},rt=function(){Nt&&(document.documentElement.style[Nt]=ot,ot=void 0)}}function Pt(){jt(window,"dragstart",Zt)}function At(){Ft(window,"dragstart",Zt)}function Lt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(Rt(),st=e,at=e.style.outlineStyle,e.style.outlineStyle="none",jt(window,"keydown",Rt))}function Rt(){st&&(st.style.outlineStyle=at,st=void 0,at=void 0,Ft(window,"keydown",Rt))}function Ot(e){do{e=e.parentNode}while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Mt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Dt={__proto__:null,TRANSFORM:lt,TRANSITION:ut,TRANSITION_END:ct,get:ht,getStyle:dt,create:ft,remove:pt,empty:mt,toFront:gt,toBack:vt,hasClass:yt,addClass:_t,removeClass:bt,setClass:wt,getClass:kt,setOpacity:St,testProp:xt,setTransform:Tt,setPosition:Ct,getPosition:It,get disableTextSelection(){return it},get enableTextSelection(){return rt},disableImageDrag:Pt,enableImageDrag:At,preventOutline:Lt,restoreOutline:Rt,getSizedParentNode:Ot,getScale:Mt};function jt(e,t,n,i){if(t&&"object"===typeof t)for(var r in t)Bt(e,r,t[r],n);else for(var o=0,s=(t=d(t)).length;o<s;o++)Bt(e,t[o],n,i);return this}var zt="_leaflet_events";function Ft(e,t,n,i){if(1===arguments.length)Ut(e),delete e[zt];else if(t&&"object"===typeof t)for(var r in t)Ht(e,r,t[r],n);else if(t=d(t),2===arguments.length)Ut(e,function(e){return-1!==y(t,e)});else for(var o=0,s=t.length;o<s;o++)Ht(e,t[o],n,i);return this}function Ut(e,t){for(var n in e[zt]){var i=n.split(/\d/)[0];t&&!t(i)||Ht(e,i,null,null,n)}}var Vt={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Bt(e,t,n,i){var r=t+s(n)+(i?"_"+s(i):"");if(e[zt]&&e[zt][r])return this;var o=function(t){return n.call(i||e,t||window.event)},a=o;!De.touchNative&&De.pointer&&0===t.indexOf("touch")?o=We(e,t,o):De.touch&&"dblclick"===t?o=tt(e,o):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(Vt[t]||t,o,!!De.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(o=function(t){t=t||window.event,$t(e,t)&&a(t)},e.addEventListener(Vt[t],o,!1)):e.addEventListener(t,a,!1):e.attachEvent("on"+t,o),e[zt]=e[zt]||{},e[zt][r]=o}function Ht(e,t,n,i,r){r=r||t+s(n)+(i?"_"+s(i):"");var o=e[zt]&&e[zt][r];if(!o)return this;!De.touchNative&&De.pointer&&0===t.indexOf("touch")?Ke(e,t,o):De.touch&&"dblclick"===t?nt(e,o):"removeEventListener"in e?e.removeEventListener(Vt[t]||t,o,!1):e.detachEvent("on"+t,o),e[zt][r]=null}function qt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Wt(e){return Bt(e,"wheel",qt),this}function Kt(e){return jt(e,"mousedown touchstart dblclick contextmenu",qt),e._leaflet_disable_click=!0,this}function Zt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Gt(e){return Zt(e),qt(e),this}function Qt(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function Jt(e,t){if(!t)return new R(e.clientX,e.clientY);var n=Mt(t),i=n.boundingClientRect;return new R((e.clientX-i.left)/n.x-t.clientLeft,(e.clientY-i.top)/n.y-t.clientTop)}var Yt=De.linux&&De.chrome?window.devicePixelRatio:De.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Xt(e){return De.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Yt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function $t(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(i){return!1}return n!==e}var en={__proto__:null,on:jt,off:Ft,stopPropagation:qt,disableScrollPropagation:Wt,disableClickPropagation:Kt,preventDefault:Zt,stop:Gt,getPropagationPath:Qt,getMousePosition:Jt,getWheelDelta:Xt,isExternalTarget:$t,addListener:jt,removeListener:Ft},tn=A.extend({run:function(e,t,n,i){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=It(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=x(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),Ct(this._el,n),this.fire("step")},_complete:function(){T(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),nn=A.extend({options:{crs:G,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=f(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(V(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ut&&De.any3d&&!De.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),jt(this._proxy,ct,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,i){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(V(e),t,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,i.pan&&i.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(De.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(De.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var i=this.getZoomScale(t),r=this.getSize().divideBy(2),o=(e instanceof R?e:this.latLngToContainerPoint(e)).subtract(r).multiplyBy(1-1/i),s=this.containerPointToLatLng(r.add(o));return this.setView(s,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():F(e);var n=M(t.paddingTopLeft||t.padding||[0,0]),i=M(t.paddingBottomRight||t.padding||[0,0]),r=this.getBoundsZoom(e,!1,n.add(i));if((r="number"===typeof t.maxZoom?Math.min(t.maxZoom,r):r)===1/0)return{center:e.getCenter(),zoom:r};var o=i.subtract(n).divideBy(2),s=this.project(e.getSouthWest(),r),a=this.project(e.getNorthEast(),r);return{center:this.unproject(s.add(a).divideBy(2).add(o),r),zoom:r}},fitBounds:function(e,t){if(!(e=F(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=M(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){_t(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!De.any3d)return this.setView(e,t,n);this._stop();var i=this.project(this.getCenter()),r=this.project(e),o=this.getSize(),s=this._zoom;e=V(e),t=void 0===t?s:t;var a=Math.max(o.x,o.y),l=a*this.getZoomScale(s,t),u=r.distanceTo(i)||1,c=1.42,h=c*c;function d(e){var t=(l*l-a*a+(e?-1:1)*h*h*u*u)/(2*(e?l:a)*h*u),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function f(e){return(Math.exp(e)-Math.exp(-e))/2}function p(e){return(Math.exp(e)+Math.exp(-e))/2}function m(e){return f(e)/p(e)}var g=d(0);function v(e){return a*(p(g)/p(g+c*e))}function y(e){return a*(p(g)*m(g+c*e)-f(g))/h}function _(e){return 1-Math.pow(1-e,1.5)}var b=Date.now(),w=(d(1)-g)/c,k=n.duration?1e3*n.duration:1e3*w*.8;function S(){var n=(Date.now()-b)/k,o=_(n)*w;n<=1?(this._flyToFrame=x(S,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(y(o)/u)),s),this.getScaleZoom(a/v(o),s),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),S.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=F(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,F(e));return n.equals(i)||this.panTo(i,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=M((t=t||{}).paddingTopLeft||t.padding||[0,0]),i=M(t.paddingBottomRight||t.padding||[0,0]),r=this.project(this.getCenter()),o=this.project(e),s=this.getPixelBounds(),a=j([s.min.add(n),s.max.subtract(i)]),l=a.getSize();if(!a.contains(o)){this._enforcingBounds=!0;var u=o.subtract(a.getCenter()),c=a.extend(o).getSize().subtract(l);r.x+=u.x<0?-c.x:c.x,r.y+=u.y<0?-c.y:c.y,this.panTo(this.unproject(r),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=t.divideBy(2).round(),s=i.divideBy(2).round(),a=o.subtract(s);return a.x||a.y?(e.animate&&e.pan?this.panBy(a):(e.pan&&this._rawPanBy(a),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new U(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(t,i.maxZoom?Math.min(r,i.maxZoom):r)}var o={latlng:t,bounds:n,timestamp:e.timestamp};for(var s in e.coords)"number"===typeof e.coords[s]&&(o[s]=e.coords[s]);this.fire("locationfound",o)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(T(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)pt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=ft("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new z(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=F(e),n=M(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),s=e.getNorthWest(),a=e.getSouthEast(),l=this.getSize().subtract(n),u=j(this.project(a,i),this.project(s,i)).getSize(),c=De.any3d?this.options.zoomSnap:1,h=l.x/u.x,d=l.y/u.y,f=t?Math.max(h,d):Math.min(h,d);return i=this.getScaleZoom(f,i),c&&(i=Math.round(i/(c/100))*(c/100),i=t?Math.ceil(i/c)*c:Math.floor(i/c)*c),Math.max(r,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new R(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new D(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"===typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var i=n.zoom(e*n.scale(t));return isNaN(i)?1/0:i},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(V(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(M(e),t)},layerPointToLatLng:function(e){var t=M(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(V(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(V(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(F(e))},distance:function(e,t){return this.options.crs.distance(V(e),V(t))},containerPointToLayerPoint:function(e){return M(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return M(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(M(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(V(e)))},mouseEventToContainerPoint:function(e){return Jt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=ht(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");jt(t,"scroll",this._onScroll,this),this._containerId=s(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&De.any3d,_t(e,"leaflet-container"+(De.touch?" leaflet-touch":"")+(De.retina?" leaflet-retina":"")+(De.ielt9?" leaflet-oldie":"")+(De.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=dt(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ct(this._mapPane,new R(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_t(e.markerPane,"leaflet-zoom-hide"),_t(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){Ct(this._mapPane,new R(0,0));var i=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var r=this._zoom!==t;this._moveStart(r,n)._move(e,t)._moveEnd(r),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,i){void 0===t&&(t=this._zoom);var r=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),i?n&&n.pinch&&this.fire("zoom",n):((r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return T(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Ct(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[s(this._container)]=this;var t=e?Ft:jt;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),De.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){T(this._resizeRequest),this._resizeRequest=x(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,i=[],r="mouseout"===t||"mouseover"===t,o=e.target||e.srcElement,a=!1;o;){if((n=this._targets[s(o)])&&("click"===t||"preclick"===t)&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(t,!0)){if(r&&!$t(o,e))break;if(i.push(n),r)break}if(o===this._container)break;o=o.parentNode}return i.length||a||r||!this.listens(t,!0)||(i=[this]),i},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var n=e.type;"mousedown"===n&&Lt(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,i){if("click"===e.type){var r=n({},e);r.type="preclick",this._fireDOMEvent(r,r.type,i)}var o=this._findEventTargets(e,t);if(i){for(var s=[],a=0;a<i.length;a++)i[a].listens(t,!0)&&s.push(i[a]);o=s.concat(o)}if(o.length){"contextmenu"===t&&Zt(e);var l=o[0],u={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var c=l.getLatLng&&(!l._radius||l._radius<=10);u.containerPoint=c?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(e),u.layerPoint=this.containerPointToLayerPoint(u.containerPoint),u.latlng=c?l.getLatLng():this.layerPointToLatLng(u.layerPoint)}for(a=0;a<o.length;a++)if(o[a].fire(t,u,!0),u.originalEvent._stopped||!1===o[a].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return It(this._mapPane)||new R(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(i)},_latLngBoundsToNewLayerBounds:function(e,t,n){var i=this._getNewPixelOrigin(n,t);return j([this.project(e.getSouthWest(),t)._subtract(i),this.project(e.getNorthWest(),t)._subtract(i),this.project(e.getSouthEast(),t)._subtract(i),this.project(e.getNorthEast(),t)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var i=this.project(e,t),r=this.getSize().divideBy(2),o=new D(i.subtract(r),i.add(r)),s=this._getBoundsOffset(o,n,t);return Math.abs(s.x)<=1&&Math.abs(s.y)<=1?e:this.unproject(i.add(s),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),i=new D(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(i,t))},_getBoundsOffset:function(e,t,n){var i=j(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),r=i.min.subtract(e.min),o=i.max.subtract(e.max);return new R(this._rebound(r.x,-o.x),this._rebound(r.y,-o.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),i=De.any3d?this.options.zoomSnap:1;return i&&(e=Math.round(e/i)*i),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){bt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=ft("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=lt,n=this._proxy.style[t];Tt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Tt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(t),r=this._getCenterOffset(e)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r))&&(x(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,_t(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:i}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&bt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rn(e,t){return new nn(e,t)}var on=I.extend({options:{position:"topright"},initialize:function(e){f(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),i=e._controlCorners[n];return _t(t,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(t,i.firstChild):i.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),sn=function(e){return new on(e)};nn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=ft("div",t+"control-container",this._container);function i(i,r){var o=t+i+" "+t+r;e[i+r]=ft("div",o,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)pt(this._controlCorners[e]);pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var an=on.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,i){return n<i?-1:i<n?1:0}},initialize:function(e,t,n){for(var i in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[i],i);for(i in t)this._addLayer(t[i],i,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return on.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(s(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){_t(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(_t(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):bt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return bt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=ft("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Kt(t),Wt(t);var i=this._section=ft("section",e+"-list");n&&(this._map.on("click",this.collapse,this),jt(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var r=this._layersLink=ft("a",e+"-toggle",t);r.href="#",r.title="Layers",r.setAttribute("role","button"),jt(r,{keydown:function(e){13===e.keyCode&&this._expandSafely()},click:function(e){Zt(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=ft("div",e+"-base",i),this._separator=ft("div",e+"-separator",i),this._overlaysList=ft("div",e+"-overlays",i),t.appendChild(i)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&s(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(r(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;mt(this._baseLayersList),mt(this._overlaysList),this._layerControlInputs=[];var e,t,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),t=t||i.overlay,e=e||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(e=e&&r>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(s(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(e){var t,n=document.createElement("label"),i=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=i):t=this._createRadioElement("leaflet-base-layers_"+s(this),i),this._layerControlInputs.push(t),t.layerId=s(e.layer),jt(t,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+e.name;var o=document.createElement("span");return n.appendChild(o),o.appendChild(t),o.appendChild(r),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e,t,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)e=n[o],t=this._getLayer(e.layerId).layer,e.checked?i.push(t):e.checked||r.push(t);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)e=n[r],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&i<t.options.minZoom||void 0!==t.options.maxZoom&&i>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,jt(e,"click",Zt),this.expand();var t=this;setTimeout(function(){Ft(e,"click",Zt),t._preventClick=!1})}}),ln=function(e,t,n){return new an(e,t,n)},un=on.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=ft("div",t+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,i,r){var o=ft("a",n,i);return o.innerHTML=e,o.href="#",o.title=t,o.setAttribute("role","button"),o.setAttribute("aria-label",t),Kt(o),jt(o,"click",Gt),jt(o,"click",r,this),jt(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";bt(this._zoomInButton,t),bt(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(_t(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(_t(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new un,this.addControl(this.zoomControl))});var cn=function(e){return new un(e)},hn=on.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=ft("div",t),i=this.options;return this._addScales(i,t+"-line",n),e.on(i.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=ft("div",t,n)),e.imperial&&(this._iScale=ft("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,i,r=3.2808399*e;r>5280?(t=r/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),dn=function(e){return new hn(e)},fn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',pn=on.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(De.inlineSvg?fn+" ":"")+"Leaflet</a>"},initialize:function(e){f(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=ft("div","leaflet-control-attribution"),Kt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook(function(){this.options.attributionControl&&(new pn).addTo(this)});var mn=function(e){return new pn(e)};on.Layers=an,on.Zoom=un,on.Scale=hn,on.Attribution=pn,sn.layers=ln,sn.zoom=cn,sn.scale=dn,sn.attribution=mn;var gn=I.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(e,t){return e.addHandler(t,this),this};var vn={Events:P},yn=De.touch?"touchstart mousedown":"mousedown",_n=A.extend({options:{clickTolerance:3},initialize:function(e,t,n,i){f(this,i),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(jt(this._dragStartTarget,yn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_n._dragging===this&&this.finishDrag(!0),Ft(this._dragStartTarget,yn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!yt(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)_n._dragging===this&&this.finishDrag();else if(!(_n._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&(_n._dragging=this,this._preventOutline&&Lt(this._element),Pt(),it(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=Ot(this._element);this._startPoint=new R(t.clientX,t.clientY),this._startPos=It(this._element),this._parentScale=Mt(n);var i="mousedown"===e.type;jt(document,i?"mousemove":"touchmove",this._onMove,this),jt(document,i?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new R(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Zt(e),this._moved||(this.fire("dragstart"),this._moved=!0,_t(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_t(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Ct(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){bt(document.body,"leaflet-dragging"),this._lastTarget&&(bt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ft(document,"mousemove touchmove",this._onMove,this),Ft(document,"mouseup touchend touchcancel",this._onUp,this),At(),rt();var t=this._moved&&this._moving;this._moving=!1,_n._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function bn(e,t,n){var i,r,o,s,a,l,u,c,h,d=[1,4,2,8];for(r=0,u=e.length;r<u;r++)e[r]._code=Rn(e[r],t);for(s=0;s<4;s++){for(c=d[s],i=[],r=0,o=(u=e.length)-1;r<u;o=r++)a=e[r],l=e[o],a._code&c?l._code&c||((h=Ln(l,a,c,t,n))._code=Rn(h,t),i.push(h)):(l._code&c&&((h=Ln(l,a,c,t,n))._code=Rn(h,t),i.push(h)),i.push(a));e=i}return e}function wn(e,t){var n,i,r,o,s,a,l,u,c;if(!e||0===e.length)throw new Error("latlngs not passed");Dn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var h=V([0,0]),d=F(e);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(h=kn(e));var f=e.length,p=[];for(n=0;n<f;n++){var m=V(e[n]);p.push(t.project(V([m.lat-h.lat,m.lng-h.lng])))}for(a=l=u=0,n=0,i=f-1;n<f;i=n++)r=p[n],o=p[i],s=r.y*o.x-o.y*r.x,l+=(r.x+o.x)*s,u+=(r.y+o.y)*s,a+=3*s;c=0===a?p[0]:[l/a,u/a];var g=t.unproject(M(c));return V([g.lat+h.lat,g.lng+h.lng])}function kn(e){for(var t=0,n=0,i=0,r=0;r<e.length;r++){var o=V(e[r]);t+=o.lat,n+=o.lng,i++}return V([t/i,n/i])}var Sn,En={__proto__:null,clipPolygon:bn,polygonCenter:wn,centroid:kn};function xn(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=In(e=Pn(e,n),n)}function Tn(e,t,n){return Math.sqrt(Mn(e,t,n,!0))}function Cn(e,t,n){return Mn(e,t,n)}function In(e,t){var n=e.length,i=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,Nn(e,i,t,0,n-1);var r,o=[];for(r=0;r<n;r++)i[r]&&o.push(e[r]);return o}function Nn(e,t,n,i,r){var o,s,a,l=0;for(s=i+1;s<=r-1;s++)(a=Mn(e[s],e[i],e[r],!0))>l&&(o=s,l=a);l>n&&(t[o]=1,Nn(e,t,n,i,o),Nn(e,t,n,o,r))}function Pn(e,t){for(var n=[e[0]],i=1,r=0,o=e.length;i<o;i++)On(e[i],e[r])>t&&(n.push(e[i]),r=i);return r<o-1&&n.push(e[o-1]),n}function An(e,t,n,i,r){var o,s,a,l=i?Sn:Rn(e,n),u=Rn(t,n);for(Sn=u;;){if(!(l|u))return[e,t];if(l&u)return!1;a=Rn(s=Ln(e,t,o=l||u,n,r),n),o===l?(e=s,l=a):(t=s,u=a)}}function Ln(e,t,n,i,r){var o,s,a=t.x-e.x,l=t.y-e.y,u=i.min,c=i.max;return 8&n?(o=e.x+a*(c.y-e.y)/l,s=c.y):4&n?(o=e.x+a*(u.y-e.y)/l,s=u.y):2&n?(o=c.x,s=e.y+l*(c.x-e.x)/a):1&n&&(o=u.x,s=e.y+l*(u.x-e.x)/a),new R(o,s,r)}function Rn(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function On(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function Mn(e,t,n,i){var r,o=t.x,s=t.y,a=n.x-o,l=n.y-s,u=a*a+l*l;return u>0&&((r=((e.x-o)*a+(e.y-s)*l)/u)>1?(o=n.x,s=n.y):r>0&&(o+=a*r,s+=l*r)),a=e.x-o,l=e.y-s,i?a*a+l*l:new R(o,s)}function Dn(e){return!v(e[0])||"object"!==typeof e[0][0]&&"undefined"!==typeof e[0][0]}function jn(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Dn(e)}function zn(e,t){var n,i,r,o,s,a,l,u;if(!e||0===e.length)throw new Error("latlngs not passed");Dn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var c=V([0,0]),h=F(e);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(c=kn(e));var d=e.length,f=[];for(n=0;n<d;n++){var p=V(e[n]);f.push(t.project(V([p.lat-c.lat,p.lng-c.lng])))}for(n=0,i=0;n<d-1;n++)i+=f[n].distanceTo(f[n+1])/2;if(0===i)u=f[0];else for(n=0,o=0;n<d-1;n++)if(s=f[n],a=f[n+1],(o+=r=s.distanceTo(a))>i){l=(o-i)/r,u=[a.x-l*(a.x-s.x),a.y-l*(a.y-s.y)];break}var m=t.unproject(M(u));return V([m.lat+c.lat,m.lng+c.lng])}var Fn={__proto__:null,simplify:xn,pointToSegmentDistance:Tn,closestPointOnSegment:Cn,clipSegment:An,_getEdgeIntersection:Ln,_getBitCode:Rn,_sqClosestPointOnSegment:Mn,isFlat:Dn,_flat:jn,polylineCenter:zn},Un={project:function(e){return new R(e.lng,e.lat)},unproject:function(e){return new U(e.y,e.x)},bounds:new D([-180,-90],[180,90])},Vn={R:6378137,R_MINOR:6356752.314245179,bounds:new D([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,i=e.lat*t,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),s=o*Math.sin(i),a=Math.tan(Math.PI/4-i/2)/Math.pow((1-s)/(1+s),o/2);return i=-n*Math.log(Math.max(a,1e-10)),new R(e.lng*t*n,i)},unproject:function(e){for(var t,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),s=Math.exp(-e.y/i),a=Math.PI/2-2*Math.atan(s),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)t=o*Math.sin(a),t=Math.pow((1-t)/(1+t),o/2),a+=u=Math.PI/2-2*Math.atan(s*t)-a;return new U(a*n,e.x*n/i)}},Bn={__proto__:null,LonLat:Un,Mercator:Vn,SphericalMercator:W},Hn=n({},H,{code:"EPSG:3395",projection:Vn,transformation:function(){var e=.5/(Math.PI*Vn.R);return Z(e,.5,-e,.5)}()}),qn=n({},H,{code:"EPSG:4326",projection:Un,transformation:Z(1/180,1,-1/180,.5)}),Wn=n({},B,{projection:Un,transformation:Z(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,i=t.lat-e.lat;return Math.sqrt(n*n+i*i)},infinite:!0});B.Earth=H,B.EPSG3395=Hn,B.EPSG3857=G,B.EPSG900913=Q,B.EPSG4326=qn,B.Simple=Wn;var Kn=A.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[s(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[s(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=s(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=s(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return s(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?v(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[s(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=s(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;e=void 0===r.minZoom?e:Math.min(e,r.minZoom),t=void 0===r.maxZoom?t:Math.max(t,r.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Zn=Kn.extend({initialize:function(e,t){var n,i;if(f(this,t),this._layers={},e)for(n=0,i=e.length;n<i;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"===typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,i=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,i);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return s(e)}}),Gn=function(e,t){return new Zn(e,t)},Qn=Zn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Zn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Zn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new z;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Jn=function(e,t){return new Qn(e,t)},Yn=I.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){f(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(i,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i},_setIconStyles:function(e,t){var n=this.options,i=n[t+"Size"];"number"===typeof i&&(i=[i,i]);var r=M(i),o=M("shadow"===t&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),o&&(e.style.marginLeft=-o.x+"px",e.style.marginTop=-o.y+"px"),r&&(e.style.width=r.x+"px",e.style.height=r.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return De.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Xn(e){return new Yn(e)}var $n=Yn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!==typeof $n.imagePath&&($n.imagePath=this._detectIconPath()),(this.options.imagePath||$n.imagePath)+Yn.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var i=t.exec(e);return i&&i[n]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=ft("div","leaflet-default-icon-path",document.body),t=dt(e,"background-image")||dt(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),ei=gn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new _n(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_t(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&bt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=It(t._icon),s=n.getPixelBounds(),a=n.getPixelOrigin(),l=j(s.min._subtract(a).add(r),s.max._subtract(a).subtract(r));if(!l.contains(o)){var u=M((Math.max(l.max.x,o.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(i);n.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),Ct(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=x(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(T(this._panRequest),this._panRequest=x(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,i=It(t._icon),r=t._map.layerPointToLatLng(i);n&&Ct(n,i),t._latlng=r,e.latlng=r,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){T(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),ti=Kn.extend({options:{icon:new $n,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){f(this,t),this._latlng=V(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=V(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),_t(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&jt(n,"focus",this._panOnFocus,this);var r=e.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(_t(r,t),r.alt=""),this._shadow=r,e.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ft(this._icon,"focus",this._panOnFocus,this),pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pt(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Ct(this._icon,e),this._shadow&&Ct(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(_t(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ei)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ei(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&St(this._icon,e),this._shadow&&St(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?M(t.iconSize):M(0,0),i=t.iconAnchor?M(t.iconAnchor):M(0,0);e.panInside(this._latlng,{paddingTopLeft:i,paddingBottomRight:n.subtract(i)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ni(e,t){return new ti(e,t)}var ii=Kn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return f(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ri=ii.extend({options:{fill:!0,radius:10},initialize:function(e,t){f(this,t),this._latlng=V(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=V(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return ii.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),i=[e+n,t+n];this._pxBounds=new D(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function oi(e,t){return new ri(e,t)}var si=ri.extend({initialize:function(e,t,i){if("number"===typeof t&&(t=n({},i,{radius:t})),f(this,t),this._latlng=V(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new z(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:ii.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===H.distance){var r=Math.PI/180,o=this._mRadius/H.R/r,s=n.project([t+o,e]),a=n.project([t-o,e]),l=s.add(a).divideBy(2),u=n.unproject(l).lat,c=Math.acos((Math.cos(o*r)-Math.sin(t*r)*Math.sin(u*r))/(Math.cos(t*r)*Math.cos(u*r)))/r;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-n.project([u,e-c]).x,this._radiusY=l.y-s.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}});function ai(e,t,n){return new si(e,t,n)}var li=ii.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){f(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,i=1/0,r=null,o=Mn,s=0,a=this._parts.length;s<a;s++)for(var l=this._parts[s],u=1,c=l.length;u<c;u++){var h=o(e,t=l[u-1],n=l[u],!0);h<i&&(i=h,r=o(e,t,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=V(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new z,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Dn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=Dn(e),i=0,r=e.length;i<r;i++)n?(t[i]=V(e[i]),this._bounds.extend(t[i])):t[i]=this._convertLatLngs(e[i]);return t},_project:function(){var e=new D;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new R(e,e);this._rawPxBounds&&(this._pxBounds=new D([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var i,r,o=e[0]instanceof U,s=e.length;if(o){for(r=[],i=0;i<s;i++)r[i]=this._map.latLngToLayerPoint(e[i]),n.extend(r[i]);t.push(r)}else for(i=0;i<s;i++)this._projectLatlngs(e[i],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,i,r,o,s,a,l=this._parts;for(t=0,i=0,r=this._rings.length;t<r;t++)for(n=0,o=(a=this._rings[t]).length;n<o-1;n++)(s=An(a[n],a[n+1],e,n,!0))&&(l[i]=l[i]||[],l[i].push(s[0]),s[1]===a[n+1]&&n!==o-2||(l[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,i=e.length;n<i;n++)e[n]=xn(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,i,r,o,s,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,o=this._parts.length;n<o;n++)for(i=0,r=(s=(a=this._parts[n]).length)-1;i<s;r=i++)if((t||0!==i)&&Tn(e,a[r],a[i])<=l)return!0;return!1}});function ui(e,t){return new li(e,t)}li._flat=jn;var ci=li.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=li.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof U&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){li.prototype._setLatLngs.call(this,e),Dn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Dn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new R(t,t);if(e=new D(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,o=this._rings.length;r<o;r++)(i=bn(this._rings[r],e,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,i,r,o,s,a,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(r=0,a=this._parts.length;r<a;r++)for(o=0,s=(l=(t=this._parts[r]).length)-1;o<l;s=o++)n=t[o],i=t[s],n.y>e.y!==i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(u=!u);return u||li.prototype._containsPoint.call(this,e,!0)}});function hi(e,t){return new ci(e,t)}var di=Qn.extend({initialize:function(e,t){f(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,i,r=v(e)?e:e.features;if(r){for(t=0,n=r.length;t<n;t++)((i=r[t]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(e))return this;var s=fi(e,o);return s?(s.feature=bi(e),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(e,s),this.addLayer(s)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&("function"===typeof t&&(t=t(e.feature)),e.setStyle(t))}});function fi(e,t){var n,i,r,o,s="Feature"===e.type?e.geometry:e,a=s?s.coordinates:null,l=[],u=t&&t.pointToLayer,c=t&&t.coordsToLatLng||mi;if(!a&&!s)return null;switch(s.type){case"Point":return pi(u,e,n=c(a),t);case"MultiPoint":for(r=0,o=a.length;r<o;r++)n=c(a[r]),l.push(pi(u,e,n,t));return new Qn(l);case"LineString":case"MultiLineString":return i=gi(a,"LineString"===s.type?0:1,c),new li(i,t);case"Polygon":case"MultiPolygon":return i=gi(a,"Polygon"===s.type?1:2,c),new ci(i,t);case"GeometryCollection":for(r=0,o=s.geometries.length;r<o;r++){var h=fi({geometry:s.geometries[r],type:"Feature",properties:e.properties},t);h&&l.push(h)}return new Qn(l);case"FeatureCollection":for(r=0,o=s.features.length;r<o;r++){var d=fi(s.features[r],t);d&&l.push(d)}return new Qn(l);default:throw new Error("Invalid GeoJSON object.")}}function pi(e,t,n,i){return e?e(t,n):new ti(n,i&&i.markersInheritOptions&&i)}function mi(e){return new U(e[1],e[0],e[2])}function gi(e,t,n){for(var i,r=[],o=0,s=e.length;o<s;o++)i=t?gi(e[o],t-1,n):(n||mi)(e[o]),r.push(i);return r}function vi(e,t){return void 0!==(e=V(e)).alt?[c(e.lng,t),c(e.lat,t),c(e.alt,t)]:[c(e.lng,t),c(e.lat,t)]}function yi(e,t,n,i){for(var r=[],o=0,s=e.length;o<s;o++)r.push(t?yi(e[o],Dn(e[o])?0:t-1,n,i):vi(e[o],i));return!t&&n&&r.length>0&&r.push(r[0].slice()),r}function _i(e,t){return e.feature?n({},e.feature,{geometry:t}):bi(t)}function bi(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var wi={toGeoJSON:function(e){return _i(this,{type:"Point",coordinates:vi(this.getLatLng(),e)})}};function ki(e,t){return new di(e,t)}ti.include(wi),si.include(wi),ri.include(wi),li.include({toGeoJSON:function(e){var t=!Dn(this._latlngs);return _i(this,{type:(t?"Multi":"")+"LineString",coordinates:yi(this._latlngs,t?1:0,!1,e)})}}),ci.include({toGeoJSON:function(e){var t=!Dn(this._latlngs),n=t&&!Dn(this._latlngs[0]),i=yi(this._latlngs,n?2:t?1:0,!0,e);return t||(i=[i]),_i(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Zn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),_i(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,i=[];return this.eachLayer(function(t){if(t.toGeoJSON){var r=t.toGeoJSON(e);if(n)i.push(r.geometry);else{var o=bi(r);"FeatureCollection"===o.type?i.push.apply(i,o.features):i.push(o)}}}),n?_i(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Si=ki,Ei=Kn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=F(t),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_t(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&gt(this._image),this},bringToBack:function(){return this._map&&vt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=F(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:ft("img");_t(t,"leaflet-image-layer"),this._zoomAnimated&&_t(t,"leaflet-zoom-animated"),this.options.className&&_t(t,this.options.className),t.onselectstart=u,t.onmousemove=u,t.onload=r(this.fire,this,"load"),t.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Tt(this._image,n,t)},_reset:function(){var e=this._image,t=new D(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();Ct(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){St(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),xi=function(e,t,n){return new Ei(e,t,n)},Ti=Ei.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:ft("video");if(_t(t,"leaflet-image-layer"),this._zoomAnimated&&_t(t,"leaflet-zoom-animated"),this.options.className&&_t(t,this.options.className),t.onselectstart=u,t.onmousemove=u,t.onloadeddata=r(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),i=[],o=0;o<n.length;o++)i.push(n[o].src);this._url=n.length>0?i:[t.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var s=0;s<this._url.length;s++){var a=ft("source");a.src=this._url[s],t.appendChild(a)}}}});function Ci(e,t,n){return new Ti(e,t,n)}var Ii=Ei.extend({_initImage:function(){var e=this._image=this._url;_t(e,"leaflet-image-layer"),this._zoomAnimated&&_t(e,"leaflet-zoom-animated"),this.options.className&&_t(e,this.options.className),e.onselectstart=u,e.onmousemove=u}});function Ni(e,t,n){return new Ii(e,t,n)}var Pi=Kn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof U||v(e))?(this._latlng=V(e),f(this,t)):(f(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&St(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&St(this._container,1),this.bringToFront(),this.options.interactive&&(_t(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(St(this._container,0),this._removeTimeout=setTimeout(r(pt,void 0,this._container),200)):pt(this._container),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=V(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gt(this._container),this},bringToBack:function(){return this._map&&vt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Qn){t=null;var n=this._source._layers;for(var i in n)if(n[i]._map){t=n[i];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=M(this.options.offset),n=this._getAnchor();this._zoomAnimated?Ct(this._container,e.add(n)):t=t.add(e).add(n);var i=this._containerBottom=-t.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(e,t,n,i){var r=t;return r instanceof e||(r=new e(i).setContent(t)),n&&r.setLatLng(n),r}}),Kn.include({_initOverlay:function(e,t,n,i){var r=n;return r instanceof e?(f(r,i),r._source=this):(r=t&&!i?t:new e(i,this)).setContent(n),r}});var Ai=Pi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Pi.prototype.openOn.call(this,e)},onAdd:function(e){Pi.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ii||this._source.on("preclick",qt))},onRemove:function(e){Pi.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ii||this._source.off("preclick",qt))},getEvents:function(){var e=Pi.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=ft("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ft("div",e+"-content-wrapper",t);if(this._contentNode=ft("div",e+"-content",n),Kt(t),Wt(this._contentNode),jt(t,"contextmenu",qt),this._tipContainer=ft("div",e+"-tip-container",t),this._tip=ft("div",e+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=ft("a",e+"-close-button",t);i.setAttribute("role","button"),i.setAttribute("aria-label","Close popup"),i.href="#close",i.innerHTML='<span aria-hidden="true">&#215;</span>',jt(i,"click",function(e){Zt(e),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var i=e.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled";r&&i>r?(t.height=r+"px",_t(e,o)):bt(e,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();Ct(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var e=this._map,t=parseInt(dt(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,i=this._containerWidth,r=new R(this._containerLeft,-n-this._containerBottom);r._add(It(this._container));var o=e.layerPointToContainerPoint(r),s=M(this.options.autoPanPadding),a=M(this.options.autoPanPaddingTopLeft||s),l=M(this.options.autoPanPaddingBottomRight||s),u=e.getSize(),c=0,h=0;o.x+i+l.x>u.x&&(c=o.x+i-u.x+l.x),o.x-c-a.x<0&&(c=o.x-a.x),o.y+n+l.y>u.y&&(h=o.y+n-u.y+l.y),o.y-h-a.y<0&&(h=o.y-a.y),(c||h)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([c,h]))}},_getAnchor:function(){return M(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Li=function(e,t){return new Ai(e,t)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(e,t,n){return this._initOverlay(Ai,e,t,n).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),Kn.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Ai,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Qn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){Gt(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof ii?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var Ri=Pi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Pi.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Pi.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Pi.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ft("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+s(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,i=this._map,r=this._container,o=i.latLngToContainerPoint(i.getCenter()),s=i.layerPointToContainerPoint(e),a=this.options.direction,l=r.offsetWidth,u=r.offsetHeight,c=M(this.options.offset),h=this._getAnchor();"top"===a?(t=l/2,n=u):"bottom"===a?(t=l/2,n=0):"center"===a?(t=l/2,n=u/2):"right"===a?(t=0,n=u/2):"left"===a?(t=l,n=u/2):s.x<o.x?(a="right",t=0,n=u/2):(a="left",t=l+2*(c.x+h.x),n=u/2),e=e.subtract(M(t,n,!0)).add(c).add(h),bt(r,"leaflet-tooltip-right"),bt(r,"leaflet-tooltip-left"),bt(r,"leaflet-tooltip-top"),bt(r,"leaflet-tooltip-bottom"),_t(r,"leaflet-tooltip-"+a),Ct(r,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&St(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return M(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Oi=function(e,t){return new Ri(e,t)};nn.include({openTooltip:function(e,t,n){return this._initOverlay(Ri,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Kn.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ri,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Qn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&(jt(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),jt(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)})}else this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,i=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Mi=Yn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(mt(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=M(n.bgPos);t.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Di(e){return new Mi(e)}Yn.Default=$n;var ji=Kn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:De.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){f(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),pt(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof R?e:new R(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,i=-e(-1/0,1/0),r=0,o=n.length;r<o;r++)t=n[r].style.zIndex,n[r]!==this._container&&t&&(i=e(i,+t));isFinite(i)&&(this.options.zIndex=i+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!De.ielt9){St(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var o=Math.min(1,(e-r.loaded)/200);St(r.el,o),o<1?t=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(T(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=ft("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(pt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[e],r=this._map;return i||((i=this._levels[e]={}).el=ft("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=t,i.origin=r.project(r.unproject(r.getPixelOrigin()),e).round(),i.zoom=e,this._setZoomTransform(i,r.getCenter(),r.getZoom()),u(i.el.offsetWidth),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var i=t.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)pt(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,i){var r=Math.floor(e/2),o=Math.floor(t/2),s=n-1,a=new R(+r,+o);a.z=+s;var l=this._tileCoordsToKey(a),u=this._tiles[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),s>i&&this._retainParent(r,o,s,i))},_retainChildren:function(e,t,n,i){for(var r=2*e;r<2*e+2;r++)for(var o=2*t;o<2*t+2;o++){var s=new R(r,o);s.z=n+1;var a=this._tileCoordsToKey(s),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,i){var r=Math.round(t);r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r);var o=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var i=this._map.getZoomScale(n,e.zoom),r=e.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(t,n)).round();De.any3d?Tt(e.el,r,i):Ct(e.el,r)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],i).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],i).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],i).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),i=t.getZoomScale(n,this._tileZoom),r=t.project(e,this._tileZoom).floor(),o=t.getSize().divideBy(2*i);return new D(r.subtract(o),r.add(o))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(e),r=this._pxBoundsToTileRange(i),o=r.getCenter(),s=[],a=this.options.keepBuffer,l=new D(r.getBottomLeft().subtract([a,-a]),r.getTopRight().add([a,-a]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var c=this._tiles[u].coords;c.z===this._tileZoom&&l.contains(new R(c.x,c.y))||(this._tiles[u].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var h=r.min.y;h<=r.max.y;h++)for(var d=r.min.x;d<=r.max.x;d++){var f=new R(d,h);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:s.push(f)}}if(s.sort(function(e,t){return e.distanceTo(o)-t.distanceTo(o)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<s.length;d++)this._addTile(s[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(e);return F(this.options.bounds).overlaps(i)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),i=e.scaleBy(n),r=i.add(n);return[t.unproject(i,e.z),t.unproject(r,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new z(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new R(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(pt(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){_t(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=u,e.onmousemove=u,De.ielt9&&this.options.opacity<1&&St(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),i=this._tileCoordsToKey(e),o=this.createTile(this._wrapCoords(e),r(this._tileReady,this,e));this._initTile(o),this.createTile.length<2&&x(r(this._tileReady,this,e,null,o)),Ct(o,n),this._tiles[i]={el:o,coords:e,current:!0},t.appendChild(o),this.fire("tileloadstart",{tile:o,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var i=this._tileCoordsToKey(e);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(St(n.el,0),T(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(_t(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),De.ielt9||!this._map._fadeAnimated?x(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new R(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new D(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function zi(e){return new ji(e)}var Fi=ji.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=f(this,t)).detectRetina&&De.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"===typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return jt(n,"load",r(this._tileOnLoad,this,t,n)),jt(n,"error",r(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:De.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=i),t["-y"]=i}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){De.ielt9?setTimeout(r(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var i=this.options.errorTileUrl;i&&t.getAttribute("src")!==i&&(t.src=i),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=u,t.onerror=u,!t.complete)){t.src=_;var n=this._tiles[e].coords;pt(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",_),ji.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==_))return ji.prototype._tileReady.call(this,e,t,n)}});function Ui(e,t){return new Fi(e,t)}var Vi=Fi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var i=n({},this.defaultWmsParams);for(var r in t)r in this.options||(i[r]=t[r]);var o=(t=f(this,t)).detectRetina&&De.retina?2:1,s=this.getTileSize();i.width=s.x*o,i.height=s.y*o,this.wmsParams=i},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,Fi.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,i=j(n.project(t[0]),n.project(t[1])),r=i.min,o=i.max,s=(this._wmsVersion>=1.3&&this._crs===qn?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),a=Fi.prototype.getTileUrl.call(this,e);return a+p(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function Bi(e,t){return new Vi(e,t)}Fi.WMS=Vi,Ui.wms=Bi;var Hi=Kn.extend({options:{padding:.1},initialize:function(e){f(this,e),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),_t(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),i=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,t),o=i.multiplyBy(-n).add(r).subtract(this._map._getNewPixelOrigin(e,t));De.any3d?Tt(this._container,o,n):Ct(this._container,o)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new D(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),qi=Hi.extend({options:{tolerance:0},getEvents:function(){var e=Hi.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Hi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");jt(e,"mousemove",this._onMouseMove,this),jt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),jt(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){T(this._redrawRequest),delete this._ctx,pt(this._container),Ft(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Hi.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),i=De.retina?2:1;Ct(t,e.min),t.width=i*n.x,t.height=i*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",De.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Hi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[s(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,i=t.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete e._order,delete this._layers[s(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"===typeof e.options.dashArray){var t,n,i=e.options.dashArray.split(/[, ]+/),r=[];for(n=0;n<i.length;n++){if(t=Number(i[n]),isNaN(t))return;r.push(t)}e.options._dashArray=r}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||x(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new D,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)e=i.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,i,r,o,s=e._parts,a=s.length,l=this._ctx;if(a){for(l.beginPath(),n=0;n<a;n++){for(i=0,r=s[n].length;i<r;i++)o=s[n][i],l[i?"lineTo":"moveTo"](o.x,o.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,i=Math.max(Math.round(e._radius),1),r=(Math.max(Math.round(e._radiusY),1)||i)/i;1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(t.x,t.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,i=this._map.mouseEventToLayerPoint(e),r=this._drawFirst;r;r=r.next)(t=r.layer).options.interactive&&t._containsPoint(i)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(n=t);this._fireEvent(!!n&&[n],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(bt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,i,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(t)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(e),i&&(_t(this._container,"leaflet-interactive"),this._fireEvent([i],e,"mouseover"),this._hoveredLayer=i)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,i=t.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function Wi(e){return De.canvas?new qi(e):null}var Ki=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Zi={_initContainer:function(){this._container=ft("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Hi.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Ki("shape");_t(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Ki("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[s(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;pt(t),e.removeInteractiveTarget(t),delete this._layers[s(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,i=e.options,r=e._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(t||(t=e._stroke=Ki("stroke")),r.appendChild(t),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,i.dashArray?t.dashStyle=v(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=i.lineCap.replace("butt","flat"),t.joinstyle=i.lineJoin):t&&(r.removeChild(t),e._stroke=null),i.fill?(n||(n=e._fill=Ki("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),i=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+i+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){gt(e._container)},_bringToBack:function(e){vt(e._container)}},Gi=De.vml?Ki:J,Qi=Hi.extend({_initContainer:function(){this._container=Gi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Gi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pt(this._container),Ft(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Hi.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),Ct(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Gi("path");e.options.className&&_t(t,e.options.className),e.options.interactive&&_t(t,"leaflet-interactive"),this._updateStyle(e),this._layers[s(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){pt(e._path),e.removeInteractiveTarget(e._path),delete this._layers[s(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,Y(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),i="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",r=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(e,r)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){gt(e._path)},_bringToBack:function(e){vt(e._path)}});function Ji(e){return De.svg||De.vml?new Qi(e):null}De.vml&&Qi.include(Zi),nn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Wi(e)||Ji(e)}});var Yi=ci.extend({initialize:function(e,t){ci.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=F(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Xi(e,t){return new Yi(e,t)}Qi.create=Gi,Qi.pointsToPath=Y,di.geometryToLayer=fi,di.coordsToLatLng=mi,di.coordsToLatLngs=gi,di.latLngToCoords=vi,di.latLngsToCoords=yi,di.getFeature=_i,di.asFeature=bi,nn.mergeOptions({boxZoom:!0});var $i=gn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){jt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ft(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),it(),Pt(),this._startPoint=this._map.mouseEventToContainerPoint(e),jt(document,{contextmenu:Gt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=ft("div","leaflet-zoom-box",this._container),_t(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new D(this._point,this._startPoint),n=t.getSize();Ct(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(pt(this._box),bt(this._container,"leaflet-crosshair")),rt(),At(),Ft(document,{contextmenu:Gt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var t=new z(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",$i),nn.mergeOptions({doubleClickZoom:!0});var er=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),i=t.options.zoomDelta,r=e.originalEvent.shiftKey?n-i:n+i;"center"===t.options.doubleClickZoom?t.setZoom(r):t.setZoomAround(e.containerPoint,r)}});nn.addInitHook("addHandler","doubleClickZoom",er),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var tr=gn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new _n(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}_t(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){bt(this._map._container,"leaflet-grab"),bt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=F(this._map.options.maxBounds);this._offsetLimit=j(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-t+n)%e+t-n,o=(i+t+n)%e-t-n,s=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(e){var t=this._map,n=t.options,i=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),i)t.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=r.multiplyBy(s/o),l=a.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,l),c=a.multiplyBy(u/l),h=u/(n.inertiaDeceleration*s),d=c.multiplyBy(-h/2).round();d.x||d.y?(d=t._limitOffset(d,t.options.maxBounds),x(function(){t.panBy(d,{duration:h,easeLinearity:s,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});nn.addInitHook("addHandler","dragging",tr),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var nr=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),jt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ft(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,i=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,i=this._panKeys={},r=this.keyCodes;for(t=0,n=r.left.length;t<n;t++)i[r.left[t]]=[-1*e,0];for(t=0,n=r.right.length;t<n;t++)i[r.right[t]]=[e,0];for(t=0,n=r.down.length;t<n;t++)i[r.down[t]]=[0,e];for(t=0,n=r.up.length;t<n;t++)i[r.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,i=this._zoomKeys={},r=this.keyCodes;for(t=0,n=r.zoomIn.length;t<n;t++)i[r.zoomIn[t]]=e;for(t=0,n=r.zoomOut.length;t<n;t++)i[r.zoomOut[t]]=-e},_addHooks:function(){jt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ft(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,i=this._map;if(n in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(t=this._panKeys[n],e.shiftKey&&(t=M(t).multiplyBy(3)),i.options.maxBounds&&(t=i._limitOffset(M(t),i.options.maxBounds)),i.options.worldCopyJump){var r=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(t)));i.panTo(r)}else i.panBy(t)}else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Gt(e)}}});nn.addInitHook("addHandler","keyboard",nr),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ir=gn.extend({addHooks:function(){jt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ft(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Xt(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),i),Gt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,o=n?Math.ceil(r/n)*n:r,s=e._limitZoom(t+(this._delta>0?o:-o))-t;this._delta=0,this._startTime=null,s&&("center"===e.options.scrollWheelZoom?e.setZoom(t+s):e.setZoomAround(this._lastMousePos,t+s))}});nn.addInitHook("addHandler","scrollWheelZoom",ir);var rr=600;nn.mergeOptions({tapHold:De.touchNative&&De.safari&&De.mobile,tapTolerance:15});var or=gn.extend({addHooks:function(){jt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ft(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new R(t.clientX,t.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(jt(document,"touchend",Zt),jt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),rr),jt(document,"touchend touchcancel contextmenu",this._cancel,this),jt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){Ft(document,"touchend",Zt),Ft(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),Ft(document,"touchend touchcancel contextmenu",this._cancel,this),Ft(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new R(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});nn.addInitHook("addHandler","tapHold",or),nn.mergeOptions({touchZoom:De.touch,bounceAtZoomLimits:!0});var sr=gn.extend({addHooks:function(){_t(this._map._container,"leaflet-touch-zoom"),jt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),Ft(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),jt(document,"touchmove",this._onTouchMove,this),jt(document,"touchend touchcancel",this._onTouchEnd,this),Zt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),i=t.mouseEventToContainerPoint(e.touches[1]),o=n.distanceTo(i)/this._startDist;if(this._zoom=t.getScaleZoom(o,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&o<1||this._zoom>t.getMaxZoom()&&o>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var s=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===s.x&&0===s.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),T(this._animRequest);var a=r(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=x(a,this,!0),Zt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,T(this._animRequest),Ft(document,"touchmove",this._onTouchMove,this),Ft(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});nn.addInitHook("addHandler","touchZoom",sr),nn.BoxZoom=$i,nn.DoubleClickZoom=er,nn.Drag=tr,nn.Keyboard=nr,nn.ScrollWheelZoom=ir,nn.TapHold=or,nn.TouchZoom=sr,e.Bounds=D,e.Browser=De,e.CRS=B,e.Canvas=qi,e.Circle=si,e.CircleMarker=ri,e.Class=I,e.Control=on,e.DivIcon=Mi,e.DivOverlay=Pi,e.DomEvent=en,e.DomUtil=Dt,e.Draggable=_n,e.Evented=A,e.FeatureGroup=Qn,e.GeoJSON=di,e.GridLayer=ji,e.Handler=gn,e.Icon=Yn,e.ImageOverlay=Ei,e.LatLng=U,e.LatLngBounds=z,e.Layer=Kn,e.LayerGroup=Zn,e.LineUtil=Fn,e.Map=nn,e.Marker=ti,e.Mixin=vn,e.Path=ii,e.Point=R,e.PolyUtil=En,e.Polygon=ci,e.Polyline=li,e.Popup=Ai,e.PosAnimation=tn,e.Projection=Bn,e.Rectangle=Yi,e.Renderer=Hi,e.SVG=Qi,e.SVGOverlay=Ii,e.TileLayer=Fi,e.Tooltip=Ri,e.Transformation=K,e.Util=C,e.VideoOverlay=Ti,e.bind=r,e.bounds=j,e.canvas=Wi,e.circle=ai,e.circleMarker=oi,e.control=sn,e.divIcon=Di,e.extend=n,e.featureGroup=Jn,e.geoJSON=ki,e.geoJson=Si,e.gridLayer=zi,e.icon=Xn,e.imageOverlay=xi,e.latLng=V,e.latLngBounds=F,e.layerGroup=Gn,e.map=rn,e.marker=ni,e.point=M,e.polygon=hi,e.polyline=ui,e.popup=Li,e.rectangle=Xi,e.setOptions=f,e.stamp=s,e.svg=Ji,e.svgOverlay=Ni,e.tileLayer=Ui,e.tooltip=Oi,e.transformation=Z,e.version=t,e.videoOverlay=Ci;var ar=window.L;e.noConflict=function(){return window.L=ar,this},window.L=e}(t)},4(e,t,n){"use strict";var i=n(853),r=n(43),o=n(950);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(s(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),w=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var I=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var N=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function L(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case _:return"Profiler";case y:return"StrictMode";case S:return"Suspense";case E:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case w:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case x:return null!==(t=e.displayName||null)?t:L(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return L(e(t))}catch(n){}}return null}var R=Array.isArray,O=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},j=[],z=-1;function F(e){return{current:e}}function U(e){0>z||(e.current=j[z],j[z]=null,z--)}function V(e,t){z++,j[z]=e.current,e.current=t}var B,H,q=F(null),W=F(null),K=F(null),Z=F(null);function G(e,t){switch(V(K,t),V(W,e),V(q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=yh(t=vh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(q),V(q,e)}function Q(){U(q),U(W),U(K)}function J(e){null!==e.memoizedState&&V(Z,e);var t=q.current,n=yh(t,e.type);t!==n&&(V(W,e),V(q,n))}function Y(e){W.current===e&&(U(q),U(W)),Z.current===e&&(U(Z),cd._currentValue=D)}function X(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||"",H=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+B+e+H}var $=!1;function ee(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var i=r}Reflect.construct(e,[],n)}else{try{n.call()}catch(o){i=o}e.call(n.prototype)}}else{try{throw Error()}catch(s){i=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&i&&"string"===typeof a.stack)return[a.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=i.DetermineComponentFrameRoot(),s=o[0],a=o[1];if(s&&a){var l=s.split("\n"),u=a.split("\n");for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===u.length)for(i=l.length-1,r=u.length-1;1<=i&&0<=r&&l[i]!==u[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==u[r]){if(1!==i||1!==r)do{if(i--,0>--r||l[i]!==u[r]){var c="\n"+l[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=i&&0<=r);break}}}finally{$=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?X(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return X(e.type);case 16:return X("Lazy");case 13:return e.child!==t&&null!==t?X("Suspense Fallback"):X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return X("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(i){return"\nError generating stack: "+i.message+"\n"+i.stack}}var ie=Object.prototype.hasOwnProperty,re=i.unstable_scheduleCallback,oe=i.unstable_cancelCallback,se=i.unstable_shouldYield,ae=i.unstable_requestPaint,le=i.unstable_now,ue=i.unstable_getCurrentPriorityLevel,ce=i.unstable_ImmediatePriority,he=i.unstable_UserBlockingPriority,de=i.unstable_NormalPriority,fe=i.unstable_LowPriority,pe=i.unstable_IdlePriority,me=i.log,ge=i.unstable_setDisableYieldValue,ve=null,ye=null;function _e(e){if("function"===typeof me&&ge(e),ye&&"function"===typeof ye.setStrictMode)try{ye.setStrictMode(ve,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(we(e)/ke|0)|0},we=Math.log,ke=Math.LN2;var Se=256,Ee=262144,xe=4194304;function Te(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ce(e,t,n){var i=e.pendingLanes;if(0===i)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var a=134217727&i;return 0!==a?0!==(i=a&~o)?r=Te(i):0!==(s&=a)?r=Te(s):n||0!==(n=a&~e)&&(r=Te(n)):0!==(a=i&~o)?r=Te(a):0!==s?r=Te(s):n||0!==(n=i&~e)&&(r=Te(n)),0===r?0:0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(n=t&-t)||32===o&&0!==(4194048&n))?t:r}function Ie(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ne(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Pe(){var e=xe;return 0===(62914560&(xe<<=1))&&(xe=4194304),e}function Ae(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Le(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Re(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-be(t);e.entangledLanes|=t,e.entanglements[i]=1073741824|e.entanglements[i]|261930&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-be(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Me(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:De(n))&(e.suspendedLanes|t))?0:n}function De(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function je(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function ze(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:Td(e.type)}function Fe(e,t){var n=M.p;try{return M.p=e,t()}finally{M.p=n}}var Ue=Math.random().toString(36).slice(2),Ve="__reactFiber$"+Ue,Be="__reactProps$"+Ue,He="__reactContainer$"+Ue,qe="__reactEvents$"+Ue,We="__reactListeners$"+Ue,Ke="__reactHandles$"+Ue,Ze="__reactResources$"+Ue,Ge="__reactMarker$"+Ue;function Qe(e){delete e[Ve],delete e[Be],delete e[qe],delete e[We],delete e[Ke]}function Je(e){var t=e[Ve];if(t)return t;for(var n=e.parentNode;n;){if(t=n[He]||n[Ve]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Dh(e);null!==e;){if(n=e[Ve])return n;e=Dh(e)}return t}n=(e=n).parentNode}return null}function Ye(e){if(e=e[Ve]||e[He]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Xe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(s(33))}function $e(e){var t=e[Ze];return t||(t=e[Ze]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ge]=!0}var tt=new Set,nt={};function it(e,t){rt(e,t),rt(e+"Capture",t)}function rt(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},at={};function lt(e,t,n){if(r=t,ie.call(at,r)||!ie.call(st,r)&&(ot.test(r)?at[r]=!0:(st[r]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var i=t.toLowerCase().slice(0,5);if("data-"!==i&&"aria-"!==i)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var r}function ut(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ct(e,t,n,i){if(null===i)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+i)}}function ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=dt(e)?"checked":"value";e._valueTracker=function(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var r=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=dt(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function vt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yt(e,t,n,i,r,o,s,a){e.name="",null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ht(t)):e.value!==""+ht(t)&&(e.value=""+ht(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?bt(e,s,ht(t)):null!=n?bt(e,s,ht(n)):null!=i&&e.removeAttribute("value"),null==r&&null!=o&&(e.defaultChecked=!!o),null!=r&&(e.checked=r&&"function"!==typeof r&&"symbol"!==typeof r),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ht(a):e.removeAttribute("name")}function _t(e,t,n,i,r,o,s,a){if(null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.type=o),null!=t||null!=n){if(!("submit"!==o&&"reset"!==o||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+ht(n):"",t=null!=t?""+ht(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}i="function"!==typeof(i=null!=i?i:r)&&"symbol"!==typeof i&&!!i,e.checked=a?e.checked:!!i,e.defaultChecked=!!i,null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.name=s),ft(e)}function bt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ht(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function kt(e,t,n){null==t||((t=""+ht(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ht(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(s(92));if(R(i)){if(1<i.length)throw Error(s(93));i=i[0]}n=i}null==n&&(n=""),t=n}n=ht(t),e.defaultValue=n,(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i),ft(e)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var xt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tt(e,t,n){var i=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?i?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":i?e.setProperty(t,n):"number"!==typeof n||0===n||xt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(s(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Tt(e,r,i)}else for(var o in t)t.hasOwnProperty(o)&&Tt(e,o,t[o])}function It(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Pt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Lt(){}var Rt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Mt=null,Dt=null;function jt(e){var t=Ye(e);if(t&&(e=t.stateNode)){var n=e[Be]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+vt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Be]||null;if(!r)throw Error(s(90));yt(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&pt(i)}break e;case"textarea":kt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var zt=!1;function Ft(e,t,n){if(zt)return e(t,n);zt=!0;try{return e(t)}finally{if(zt=!1,(null!==Mt||null!==Dt)&&($u(),Mt&&(t=Mt,e=Dt,Dt=Mt=null,jt(t),e)))for(t=0;t<e.length;t++)jt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var i=n[Be]||null;if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Vt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(Vt)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(Yd){Bt=!1}var qt=null,Wt=null,Kt=null;function Zt(){if(Kt)return Kt;var e,t,n=Wt,i=n.length,r="value"in qt?qt.value:qt.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===r[o-t];t++);return Kt=r.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Qt(){return!0}function Jt(){return!1}function Yt(e){function t(t,n,i,r,o){for(var s in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Qt:Jt,this.isPropagationStopped=Jt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qt)},persist:function(){},isPersistent:Qt}),t}var Xt,$t,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Yt(tn),rn=f({},tn,{view:0,detail:0}),on=Yt(rn),sn=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Xt=e.screenX-en.screenX,$t=e.screenY-en.screenY):$t=Xt=0,en=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:$t}}),an=Yt(sn),ln=Yt(f({},sn,{dataTransfer:0})),un=Yt(f({},rn,{relatedTarget:0})),cn=Yt(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),hn=Yt(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),dn=Yt(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function vn(){return gn}var yn=Yt(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),_n=Yt(f({},sn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Yt(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn})),wn=Yt(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=Yt(f({},sn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sn=Yt(f({},tn,{newState:0,oldState:0})),En=[9,13,27,32],xn=Vt&&"CompositionEvent"in window,Tn=null;Vt&&"documentMode"in document&&(Tn=document.documentMode);var Cn=Vt&&"TextEvent"in window&&!Tn,In=Vt&&(!xn||Tn&&8<Tn&&11>=Tn),Nn=String.fromCharCode(32),Pn=!1;function An(e,t){switch(e){case"keyup":return-1!==En.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ln(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Dn(e,t,n,i){Mt?Dt?Dt.push(i):Dt=[i]:Mt=i,0<(t=ih(t,"onChange")).length&&(n=new nn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var jn=null,zn=null;function Fn(e){Qc(e,0)}function Un(e){if(pt(Xe(e)))return e}function Vn(e,t){if("change"===e)return t}var Bn=!1;if(Vt){var Hn;if(Vt){var qn="oninput"in document;if(!qn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),qn="function"===typeof Wn.oninput}Hn=qn}else Hn=!1;Bn=Hn&&(!document.documentMode||9<document.documentMode)}function Kn(){jn&&(jn.detachEvent("onpropertychange",Zn),zn=jn=null)}function Zn(e){if("value"===e.propertyName&&Un(zn)){var t=[];Dn(t,zn,e,Ot(e)),Ft(Fn,t)}}function Gn(e,t,n){"focusin"===e?(Kn(),zn=n,(jn=t).attachEvent("onpropertychange",Zn)):"focusout"===e&&Kn()}function Qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(zn)}function Jn(e,t){if("click"===e)return Un(t)}function Yn(e,t){if("input"===e||"change"===e)return Un(t)}var Xn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function $n(e,t){if(Xn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!ie.call(t,r)||!Xn(e[r],t[r]))return!1}return!0}function ei(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ti(e,t){var n,i=ei(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ei(i)}}function ni(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ni(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ii(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ri(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var oi=Vt&&"documentMode"in document&&11>=document.documentMode,si=null,ai=null,li=null,ui=!1;function ci(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ui||null==si||si!==mt(i)||("selectionStart"in(i=si)&&ri(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},li&&$n(li,i)||(li=i,0<(i=ih(ai,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=si)))}function hi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var di={animationend:hi("Animation","AnimationEnd"),animationiteration:hi("Animation","AnimationIteration"),animationstart:hi("Animation","AnimationStart"),transitionrun:hi("Transition","TransitionRun"),transitionstart:hi("Transition","TransitionStart"),transitioncancel:hi("Transition","TransitionCancel"),transitionend:hi("Transition","TransitionEnd")},fi={},pi={};function mi(e){if(fi[e])return fi[e];if(!di[e])return e;var t,n=di[e];for(t in n)if(n.hasOwnProperty(t)&&t in pi)return fi[e]=n[t];return e}Vt&&(pi=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);var gi=mi("animationend"),vi=mi("animationiteration"),yi=mi("animationstart"),_i=mi("transitionrun"),bi=mi("transitionstart"),wi=mi("transitioncancel"),ki=mi("transitionend"),Si=new Map,Ei="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xi(e,t){Si.set(e,t),it(t,[e])}Ei.push("scrollEnd");var Ti="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ci=[],Ii=0,Ni=0;function Pi(){for(var e=Ii,t=Ni=Ii=0;t<e;){var n=Ci[t];Ci[t++]=null;var i=Ci[t];Ci[t++]=null;var r=Ci[t];Ci[t++]=null;var o=Ci[t];if(Ci[t++]=null,null!==i&&null!==r){var s=i.pending;null===s?r.next=r:(r.next=s.next,s.next=r),i.pending=r}0!==o&&Oi(n,r,o)}}function Ai(e,t,n,i){Ci[Ii++]=e,Ci[Ii++]=t,Ci[Ii++]=n,Ci[Ii++]=i,Ni|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function Li(e,t,n,i){return Ai(e,t,n,i),Mi(e)}function Ri(e,t){return Ai(e,null,null,t),Mi(e)}function Oi(e,t,n){e.lanes|=n;var i=e.alternate;null!==i&&(i.lanes|=n);for(var r=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(i=o.alternate)&&(i.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(r=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,r&&null!==t&&(r=31-be(n),null===(i=(e=o.hiddenUpdates)[r])?e[r]=[t]:i.push(t),t.lane=536870912|n),o):null}function Mi(e){if(50<qu)throw qu=0,Wu=null,Error(s(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Di={};function ji(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zi(e,t,n,i){return new ji(e,t,n,i)}function Fi(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ui(e,t){var n=e.alternate;return null===n?((n=zi(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vi(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Bi(e,t,n,i,r,o){var a=0;if(i=e,"function"===typeof e)Fi(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=zi(31,n,t,r)).elementType=C,e.lanes=o,e;case v:return Hi(n.children,r,o,t);case y:a=8,r|=24;break;case _:return(e=zi(12,n,t,2|r)).elementType=_,e.lanes=o,e;case S:return(e=zi(13,n,t,r)).elementType=S,e.lanes=o,e;case E:return(e=zi(19,n,t,r)).elementType=E,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:a=10;break e;case b:a=9;break e;case k:a=11;break e;case x:a=14;break e;case T:a=16,i=null;break e}a=29,n=Error(s(130,null===e?"null":typeof e,"")),i=null}return(t=zi(a,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Hi(e,t,n,i){return(e=zi(7,e,i,t)).lanes=n,e}function qi(e,t,n){return(e=zi(6,e,null,t)).lanes=n,e}function Wi(e){var t=zi(18,null,null,0);return t.stateNode=e,t}function Ki(e,t,n){return(t=zi(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Zi=new WeakMap;function Gi(e,t){if("object"===typeof e&&null!==e){var n=Zi.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Zi.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Qi=[],Ji=0,Yi=null,Xi=0,$i=[],er=0,tr=null,nr=1,ir="";function rr(e,t){Qi[Ji++]=Xi,Qi[Ji++]=Yi,Yi=e,Xi=t}function or(e,t,n){$i[er++]=nr,$i[er++]=ir,$i[er++]=tr,tr=e;var i=nr;e=ir;var r=32-be(i)-1;i&=~(1<<r),n+=1;var o=32-be(t)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,nr=1<<32-be(t)+r|n<<r|i,ir=o+e}else nr=1<<o|n<<r|i,ir=e}function sr(e){null!==e.return&&(rr(e,1),or(e,1,0))}function ar(e){for(;e===Yi;)Yi=Qi[--Ji],Qi[Ji]=null,Xi=Qi[--Ji],Qi[Ji]=null;for(;e===tr;)tr=$i[--er],$i[er]=null,ir=$i[--er],$i[er]=null,nr=$i[--er],$i[er]=null}function lr(e,t){$i[er++]=nr,$i[er++]=ir,$i[er++]=tr,nr=t.id,ir=t.overflow,tr=e}var ur=null,cr=null,hr=!1,dr=null,fr=!1,pr=Error(s(519));function mr(e){throw wr(Gi(Error(s(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),pr}function gr(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ve]=e,t[Be]=i,n){case"dialog":Jc("cancel",t),Jc("close",t);break;case"iframe":case"object":case"embed":Jc("load",t);break;case"video":case"audio":for(n=0;n<Zc.length;n++)Jc(Zc[n],t);break;case"source":Jc("error",t);break;case"img":case"image":case"link":Jc("error",t),Jc("load",t);break;case"details":Jc("toggle",t);break;case"input":Jc("invalid",t),_t(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Jc("invalid",t);break;case"textarea":Jc("invalid",t),St(t,i.value,i.defaultValue,i.children)}"string"!==typeof(n=i.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===i.suppressHydrationWarning||uh(t.textContent,n)?(null!=i.popover&&(Jc("beforetoggle",t),Jc("toggle",t)),null!=i.onScroll&&Jc("scroll",t),null!=i.onScrollEnd&&Jc("scrollend",t),null!=i.onClick&&(t.onclick=Lt),t=!0):t=!1,t||mr(e,!0)}function vr(e){for(ur=e.return;ur;)switch(ur.tag){case 5:case 31:case 13:return void(fr=!1);case 27:case 3:return void(fr=!0);default:ur=ur.return}}function yr(e){if(e!==ur)return!1;if(!hr)return vr(e),hr=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||_h(e.type,e.memoizedProps)),t=!t),t&&cr&&mr(e),vr(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));cr=Mh(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));cr=Mh(e)}else 27===n?(n=cr,Th(e.type)?(e=Oh,Oh=null,cr=e):cr=n):cr=ur?Rh(e.stateNode.nextSibling):null;return!0}function _r(){cr=ur=null,hr=!1}function br(){var e=dr;return null!==e&&(null===Pu?Pu=e:Pu.push.apply(Pu,e),dr=null),e}function wr(e){null===dr?dr=[e]:dr.push(e)}var kr=F(null),Sr=null,Er=null;function xr(e,t,n){V(kr,t._currentValue),t._currentValue=n}function Tr(e){e._currentValue=kr.current,U(kr)}function Cr(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ir(e,t,n,i){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var o=r.dependencies;if(null!==o){var a=r.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=r;for(var u=0;u<t.length;u++)if(l.context===t[u]){o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Cr(o.return,n,e),i||(a=null);break e}o=l.next}}else if(18===r.tag){if(null===(a=r.return))throw Error(s(341));a.lanes|=n,null!==(o=a.alternate)&&(o.lanes|=n),Cr(a,n,e),a=null}else a=r.child;if(null!==a)a.return=r;else for(a=r;null!==a;){if(a===e){a=null;break}if(null!==(r=a.sibling)){r.return=a.return,a=r;break}a=a.return}r=a}}function Nr(e,t,n,i){e=null;for(var r=t,o=!1;null!==r;){if(!o)if(0!==(524288&r.flags))o=!0;else if(0!==(262144&r.flags))break;if(10===r.tag){var a=r.alternate;if(null===a)throw Error(s(387));if(null!==(a=a.memoizedProps)){var l=r.type;Xn(r.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(r===Z.current){if(null===(a=r.alternate))throw Error(s(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(cd):e=[cd])}r=r.return}null!==e&&Ir(t,e,n,i),t.flags|=262144}function Pr(e){for(e=e.firstContext;null!==e;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ar(e){Sr=e,Er=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Lr(e){return Or(Sr,e)}function Rr(e,t){return null===Sr&&Ar(e),Or(e,t)}function Or(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Er){if(null===e)throw Error(s(308));Er=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Er=Er.next=t;return n}var Mr="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Dr=i.unstable_scheduleCallback,jr=i.unstable_NormalPriority,zr={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fr(){return{controller:new Mr,data:new Map,refCount:0}}function Ur(e){e.refCount--,0===e.refCount&&Dr(jr,function(){e.controller.abort()})}var Vr=null,Br=0,Hr=0,qr=null;function Wr(){if(0===--Br&&null!==Vr){null!==qr&&(qr.status="fulfilled");var e=Vr;Vr=null,Hr=0,qr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Kr=O.S;O.S=function(e,t){Ru=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Vr){var n=Vr=[];Br=0,Hr=Bc(),qr={status:"pending",value:void 0,then:function(e){n.push(e)}}}Br++,t.then(Wr,Wr)}(0,t),null!==Kr&&Kr(e,t)};var Zr=F(null);function Gr(){var e=Zr.current;return null!==e?e:pu.pooledCache}function Qr(e,t){V(Zr,null===t?Zr.current:t.pool)}function Jr(){var e=Gr();return null===e?null:{parent:zr._currentValue,pool:e}}var Yr=Error(s(460)),Xr=Error(s(474)),$r=Error(s(542)),eo={then:function(){}};function to(e){return"fulfilled"===(e=e.status)||"rejected"===e}function no(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Lt,Lt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw so(e=t.reason),e;default:if("string"===typeof t.status)t.then(Lt,Lt);else{if(null!==(e=pu)&&100<e.shellSuspendCounter)throw Error(s(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw so(e=t.reason),e}throw ro=t,Yr}}function io(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw ro=t,Yr;throw t}}var ro=null;function oo(){if(null===ro)throw Error(s(459));var e=ro;return ro=null,e}function so(e){if(e===Yr||e===$r)throw Error(s(483))}var ao=null,lo=0;function uo(e){var t=lo;return lo+=1,null===ao&&(ao=[]),no(ao,e,t)}function co(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ho(e,t){if(t.$$typeof===p)throw Error(s(525));throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=Ui(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=67108866,n):i:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=qi(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function u(e,t,n,i){var o=n.type;return o===v?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===T&&io(o)===t.type)?(co(t=r(t,n.props),n),t.return=e,t):(co(t=Bi(n.type,n.key,n.props,null,e.mode,i),n),t.return=e,t)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ki(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,o){return null===t||7!==t.tag?((t=Hi(n,e.mode,i,o)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=qi(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return co(n=Bi(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Ki(t,e.mode,n)).return=e,t;case T:return d(e,t=io(t),n)}if(R(t)||P(t))return(t=Hi(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,uo(t),n);if(t.$$typeof===w)return d(e,Rr(e,t),n);ho(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===r?u(e,t,n,i):null;case g:return n.key===r?c(e,t,n,i):null;case T:return f(e,t,n=io(n),i)}if(R(n)||P(n))return null!==r?null:h(e,t,n,i,null);if("function"===typeof n.then)return f(e,t,uo(n),i);if(n.$$typeof===w)return f(e,t,Rr(e,n),i);ho(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case m:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case g:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case T:return p(e,t,n,i=io(i),r)}if(R(i)||P(i))return h(t,e=e.get(n)||null,i,r,null);if("function"===typeof i.then)return p(e,t,n,uo(i),r);if(i.$$typeof===w)return p(e,t,n,Rr(t,i),r);ho(t,i)}return null}function y(l,u,c,h){if("object"===typeof c&&null!==c&&c.type===v&&null===c.key&&(c=c.props.children),"object"===typeof c&&null!==c){switch(c.$$typeof){case m:e:{for(var _=c.key;null!==u;){if(u.key===_){if((_=c.type)===v){if(7===u.tag){n(l,u.sibling),(h=r(u,c.props.children)).return=l,l=h;break e}}else if(u.elementType===_||"object"===typeof _&&null!==_&&_.$$typeof===T&&io(_)===u.type){n(l,u.sibling),co(h=r(u,c.props),c),h.return=l,l=h;break e}n(l,u);break}t(l,u),u=u.sibling}c.type===v?((h=Hi(c.props.children,l.mode,h,c.key)).return=l,l=h):(co(h=Bi(c.type,c.key,c.props,null,l.mode,h),c),h.return=l,l=h)}return a(l);case g:e:{for(_=c.key;null!==u;){if(u.key===_){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(h=r(u,c.children||[])).return=l,l=h;break e}n(l,u);break}t(l,u),u=u.sibling}(h=Ki(c,l.mode,h)).return=l,l=h}return a(l);case T:return y(l,u,c=io(c),h)}if(R(c))return function(r,s,a,l){for(var u=null,c=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(r,h,a[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(r,h),s=o(v,s,m),null===c?u=v:c.sibling=v,c=v,h=g}if(m===a.length)return n(r,h),hr&&rr(r,m),u;if(null===h){for(;m<a.length;m++)null!==(h=d(r,a[m],l))&&(s=o(h,s,m),null===c?u=h:c.sibling=h,c=h);return hr&&rr(r,m),u}for(h=i(h);m<a.length;m++)null!==(g=p(h,r,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach(function(e){return t(r,e)}),hr&&rr(r,m),u}(l,u,c,h);if(P(c)){if("function"!==typeof(_=P(c)))throw Error(s(150));return function(r,a,l,u){if(null==l)throw Error(s(151));for(var c=null,h=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var _=f(r,m,y.value,u);if(null===_){null===m&&(m=v);break}e&&m&&null===_.alternate&&t(r,m),a=o(_,a,g),null===h?c=_:h.sibling=_,h=_,m=v}if(y.done)return n(r,m),hr&&rr(r,g),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(r,y.value,u))&&(a=o(y,a,g),null===h?c=y:h.sibling=y,h=y);return hr&&rr(r,g),c}for(m=i(m);!y.done;g++,y=l.next())null!==(y=p(m,r,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?c=y:h.sibling=y,h=y);return e&&m.forEach(function(e){return t(r,e)}),hr&&rr(r,g),c}(l,u,c=_.call(c),h)}if("function"===typeof c.then)return y(l,u,uo(c),h);if(c.$$typeof===w)return y(l,u,Rr(l,c),h);ho(l,c)}return"string"===typeof c&&""!==c||"number"===typeof c||"bigint"===typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(h=r(u,c)).return=l,l=h):(n(l,u),(h=qi(c,l.mode,h)).return=l,l=h),a(l)):n(l,u)}return function(e,t,n,i){try{lo=0;var r=y(e,t,n,i);return ao=null,r}catch(s){if(s===Yr||s===$r)throw s;var o=zi(29,s,null,e.mode);return o.lanes=i,o.return=e,o}}}var po=fo(!0),mo=fo(!1),go=!1;function vo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _o(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bo(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&fu)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Mi(e),Oi(e,null,n),t}return Ai(e,i,t,n),Mi(e)}function wo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function ko(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,callbacks:i.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var So=!1;function Eo(){if(So){if(null!==qr)throw qr}}function xo(e,t,n,i){So=!1;var r=e.updateQueue;go=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,u=l.next;l.next=null,null===s?o=u:s.next=u,s=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==o){var h=r.baseState;for(s=0,c=u=l=null,a=o;;){var d=-536870913&a.lane,p=d!==a.lane;if(p?(gu&d)===d:(i&d)===d){0!==d&&d===Hr&&(So=!0),null!==c&&(c=c.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;d=t;var v=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(v,h,d);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(d="function"===typeof(m=g.payload)?m.call(v,h,d):m)||void 0===d)break e;h=f({},h,d);break e;case 2:go=!0}}null!==(d=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=r.callbacks)?r.callbacks=[d]:p.push(d))}else p={lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=p,l=h):c=c.next=p,s|=d;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(p=a).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}null===c&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,null===o&&(r.shared.lanes=0),Eu|=s,e.lanes=s,e.memoizedState=h}}function To(e,t){if("function"!==typeof e)throw Error(s(191,e));e.call(t)}function Co(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)To(n[e],t)}var Io=F(null),No=F(0);function Po(e,t){V(No,e=ku),V(Io,t),ku=e|t.baseLanes}function Ao(){V(No,ku),V(Io,Io.current)}function Lo(){ku=No.current,U(Io),U(No)}var Ro=F(null),Oo=null;function Mo(e){var t=e.alternate;V(Uo,1&Uo.current),V(Ro,e),null===Oo&&(null===t||null!==Io.current||null!==t.memoizedState)&&(Oo=e)}function Do(e){V(Uo,Uo.current),V(Ro,e),null===Oo&&(Oo=e)}function jo(e){22===e.tag?(V(Uo,Uo.current),V(Ro,e),null===Oo&&(Oo=e)):zo()}function zo(){V(Uo,Uo.current),V(Ro,Ro.current)}function Fo(e){U(Ro),Oo===e&&(Oo=null),U(Uo)}var Uo=F(0);function Vo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ah(n)||Lh(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bo=0,Ho=null,qo=null,Wo=null,Ko=!1,Zo=!1,Go=!1,Qo=0,Jo=0,Yo=null,Xo=0;function $o(){throw Error(s(321))}function es(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xn(e[n],t[n]))return!1;return!0}function ts(e,t,n,i,r,o){return Bo=o,Ho=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?ga:va,Go=!1,o=n(i,r),Go=!1,Zo&&(o=is(t,n,i,r)),ns(e),o}function ns(e){O.H=ma;var t=null!==qo&&null!==qo.next;if(Bo=0,Wo=qo=Ho=null,Ko=!1,Jo=0,Yo=null,t)throw Error(s(300));null===e||Ra||null!==(e=e.dependencies)&&Pr(e)&&(Ra=!0)}function is(e,t,n,i){Ho=e;var r=0;do{if(Zo&&(Yo=null),Jo=0,Zo=!1,25<=r)throw Error(s(301));if(r+=1,Wo=qo=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}O.H=ya,o=t(n,i)}while(Zo);return o}function rs(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?cs(t):t,e=e.useState()[0],(null!==qo?qo.memoizedState:null)!==e&&(Ho.flags|=1024),t}function os(){var e=0!==Qo;return Qo=0,e}function ss(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function as(e){if(Ko){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ko=!1}Bo=0,Wo=qo=Ho=null,Zo=!1,Jo=Qo=0,Yo=null}function ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wo?Ho.memoizedState=Wo=e:Wo=Wo.next=e,Wo}function us(){if(null===qo){var e=Ho.alternate;e=null!==e?e.memoizedState:null}else e=qo.next;var t=null===Wo?Ho.memoizedState:Wo.next;if(null!==t)Wo=t,qo=e;else{if(null===e){if(null===Ho.alternate)throw Error(s(467));throw Error(s(310))}e={memoizedState:(qo=e).memoizedState,baseState:qo.baseState,baseQueue:qo.baseQueue,queue:qo.queue,next:null},null===Wo?Ho.memoizedState=Wo=e:Wo=Wo.next=e}return Wo}function cs(e){var t=Jo;return Jo+=1,null===Yo&&(Yo=[]),e=no(Yo,e,t),t=Ho,null===(null===Wo?t.memoizedState:Wo.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?ga:va),e}function hs(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return cs(e);if(e.$$typeof===w)return Lr(e)}throw Error(s(438,String(e)))}function ds(e){var t=null,n=Ho.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var i=Ho.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(t={data:i.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Ho.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=I;return t.index++,n}function fs(e,t){return"function"===typeof t?t(e):t}function ps(e){return ms(us(),qo,e)}function ms(e,t,n){var i=e.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=n;var r=e.baseQueue,o=i.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}t.baseQueue=r=o,i.pending=null}if(o=e.baseState,null===r)e.memoizedState=o;else{var l=a=null,u=null,c=t=r.next,h=!1;do{var d=-536870913&c.lane;if(d!==c.lane?(gu&d)===d:(Bo&d)===d){var f=c.revertLane;if(0===f)null!==u&&(u=u.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===Hr&&(h=!0);else{if((Bo&f)===f){c=c.next,f===Hr&&(h=!0);continue}d={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=d,a=o):u=u.next=d,Ho.lanes|=f,Eu|=f}d=c.action,Go&&n(o,d),o=c.hasEagerState?c.eagerState:n(o,d)}else f={lane:d,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,a=o):u=u.next=f,Ho.lanes|=d,Eu|=d;c=c.next}while(null!==c&&c!==t);if(null===u?a=o:u.next=l,!Xn(o,e.memoizedState)&&(Ra=!0,h&&null!==(n=qr)))throw n;e.memoizedState=o,e.baseState=a,e.baseQueue=u,i.lastRenderedState=o}return null===r&&(i.lanes=0),[e.memoizedState,i.dispatch]}function gs(e){var t=us(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);Xn(o,t.memoizedState)||(Ra=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function vs(e,t,n){var i=Ho,r=us(),o=hr;if(o){if(void 0===n)throw Error(s(407));n=n()}else n=t();var a=!Xn((qo||r).memoizedState,n);if(a&&(r.memoizedState=n,Ra=!0),r=r.queue,Bs(bs.bind(null,i,r,e),[e]),r.getSnapshot!==t||a||null!==Wo&&1&Wo.memoizedState.tag){if(i.flags|=2048,js(9,{destroy:void 0},_s.bind(null,i,r,n,t),null),null===pu)throw Error(s(349));o||0!==(127&Bo)||ys(i,t,n)}return n}function ys(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Ho.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ho.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _s(e,t,n,i){t.value=n,t.getSnapshot=i,ws(t)&&ks(e)}function bs(e,t,n){return n(function(){ws(t)&&ks(e)})}function ws(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xn(e,n)}catch(i){return!0}}function ks(e){var t=Ri(e,2);null!==t&&Gu(t,e,2)}function Ss(e){var t=ls();if("function"===typeof e){var n=e;if(e=n(),Go){_e(!0);try{n()}finally{_e(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:e},t}function Es(e,t,n,i){return e.baseState=n,ms(e,qo,"function"===typeof i?i:fs)}function xs(e,t,n,i,r){if(da(e))throw Error(s(485));if(null!==(e=t.action)){var o={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==O.T?n(!0):o.isTransition=!1,i(o),null===(n=t.pending)?(o.next=t.pending=o,Ts(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Ts(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var o=O.T,s={};O.T=s;try{var a=n(r,i),l=O.S;null!==l&&l(s,a),Cs(e,t,a)}catch(u){Ns(e,t,u)}finally{null!==o&&null!==s.types&&(o.types=s.types),O.T=o}}else try{Cs(e,t,o=n(r,i))}catch(c){Ns(e,t,c)}}function Cs(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Is(e,t,n)},function(n){return Ns(e,t,n)}):Is(e,t,n)}function Is(e,t,n){t.status="fulfilled",t.value=n,Ps(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Ts(e,n)))}function Ns(e,t,n){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do{t.status="rejected",t.reason=n,Ps(t),t=t.next}while(t!==i)}e.action=null}function Ps(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function As(e,t){return t}function Ls(e,t){if(hr){var n=pu.formState;if(null!==n){e:{var i=Ho;if(hr){if(cr){t:{for(var r=cr,o=fr;8!==r.nodeType;){if(!o){r=null;break t}if(null===(r=Rh(r.nextSibling))){r=null;break t}}r="F!"===(o=r.data)||"F"===o?r:null}if(r){cr=Rh(r.nextSibling),i="F!"===r.data;break e}}mr(i)}i=!1}i&&(t=n[0])}}return(n=ls()).memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:t},n.queue=i,n=ua.bind(null,Ho,i),i.dispatch=n,i=Ss(!1),o=ha.bind(null,Ho,!1,i.queue),r={state:t,dispatch:null,action:e,pending:null},(i=ls()).queue=r,n=xs.bind(null,Ho,r,o,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function Rs(e){return Os(us(),qo,e)}function Os(e,t,n){if(t=ms(e,t,As)[0],e=ps(fs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var i=cs(t)}catch(s){if(s===Yr)throw $r;throw s}else i=t;var r=(t=us()).queue,o=r.dispatch;return n!==t.memoizedState&&(Ho.flags|=2048,js(9,{destroy:void 0},Ms.bind(null,r,n),null)),[i,o,e]}function Ms(e,t){e.action=t}function Ds(e){var t=us(),n=qo;if(null!==n)return Os(t,n,e);us(),t=t.memoizedState;var i=(n=us()).queue.dispatch;return n.memoizedState=e,[t,i,!1]}function js(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},null===(t=Ho.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ho.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function zs(){return us().memoizedState}function Fs(e,t,n,i){var r=ls();Ho.flags|=e,r.memoizedState=js(1|t,{destroy:void 0},n,void 0===i?null:i)}function Us(e,t,n,i){var r=us();i=void 0===i?null:i;var o=r.memoizedState.inst;null!==qo&&null!==i&&es(i,qo.memoizedState.deps)?r.memoizedState=js(t,o,n,i):(Ho.flags|=e,r.memoizedState=js(1|t,o,n,i))}function Vs(e,t){Fs(8390656,8,e,t)}function Bs(e,t){Us(2048,8,e,t)}function Hs(e){var t=us().memoizedState;return function(e){Ho.flags|=4;var t=Ho.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Ho.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&fu))throw Error(s(440));return t.impl.apply(void 0,arguments)}}function qs(e,t){return Us(4,2,e,t)}function Ws(e,t){return Us(4,4,e,t)}function Ks(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Zs(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Us(4,4,Ks.bind(null,t,e),n)}function Gs(){}function Qs(e,t){var n=us();t=void 0===t?null:t;var i=n.memoizedState;return null!==t&&es(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Js(e,t){var n=us();t=void 0===t?null:t;var i=n.memoizedState;if(null!==t&&es(t,i[1]))return i[0];if(i=e(),Go){_e(!0);try{e()}finally{_e(!1)}}return n.memoizedState=[i,t],i}function Ys(e,t,n){return void 0===n||0!==(1073741824&Bo)&&0===(261930&gu)?e.memoizedState=t:(e.memoizedState=n,e=Zu(),Ho.lanes|=e,Eu|=e,n)}function Xs(e,t,n,i){return Xn(n,t)?n:null!==Io.current?(e=Ys(e,n,i),Xn(e,t)||(Ra=!0),e):0===(42&Bo)||0!==(1073741824&Bo)&&0===(261930&gu)?(Ra=!0,e.memoizedState=n):(e=Zu(),Ho.lanes|=e,Eu|=e,t)}function $s(e,t,n,i,r){var o=M.p;M.p=0!==o&&8>o?o:8;var s=O.T,a={};O.T=a,ha(e,!1,t,n);try{var l=r(),u=O.S;if(null!==u&&u(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)ca(e,t,function(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(i.status="rejected",i.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),i}(l,i),Ku());else ca(e,t,i,Ku())}catch(c){ca(e,t,{then:function(){},status:"rejected",reason:c},Ku())}finally{M.p=o,null!==s&&null!==a.types&&(s.types=a.types),O.T=s}}function ea(){}function ta(e,t,n,i){if(5!==e.tag)throw Error(s(476));var r=na(e).queue;$s(e,r,t,D,null===n?ea:function(){return ia(e),n(i)})}function na(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:D},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ia(e){var t=na(e);null===t.next&&(t=e.alternate.memoizedState),ca(e,t.next.queue,{},Ku())}function ra(){return Lr(cd)}function oa(){return us().memoizedState}function sa(){return us().memoizedState}function aa(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Ku(),i=bo(t,e=_o(n),n);return null!==i&&(Gu(i,t,n),wo(i,t,n)),t={cache:Fr()},void(e.payload=t)}t=t.return}}function la(e,t,n){var i=Ku();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},da(e)?fa(t,n):null!==(n=Li(e,t,n,i))&&(Gu(n,e,i),pa(n,t,i))}function ua(e,t,n){ca(e,t,n,Ku())}function ca(e,t,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(da(e))fa(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,Xn(a,s))return Ai(e,t,r,0),null===pu&&Pi(),!1}catch(l){}if(null!==(n=Li(e,t,r,i)))return Gu(n,e,i),pa(n,t,i),!0}return!1}function ha(e,t,n,i){if(i={lane:2,revertLane:Bc(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},da(e)){if(t)throw Error(s(479))}else null!==(t=Li(e,n,i,2))&&Gu(t,e,2)}function da(e){var t=e.alternate;return e===Ho||null!==t&&t===Ho}function fa(e,t){Zo=Ko=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pa(e,t,n){if(0!==(4194048&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var ma={readContext:Lr,use:hs,useCallback:$o,useContext:$o,useEffect:$o,useImperativeHandle:$o,useLayoutEffect:$o,useInsertionEffect:$o,useMemo:$o,useReducer:$o,useRef:$o,useState:$o,useDebugValue:$o,useDeferredValue:$o,useTransition:$o,useSyncExternalStore:$o,useId:$o,useHostTransitionStatus:$o,useFormState:$o,useActionState:$o,useOptimistic:$o,useMemoCache:$o,useCacheRefresh:$o};ma.useEffectEvent=$o;var ga={readContext:Lr,use:hs,useCallback:function(e,t){return ls().memoizedState=[e,void 0===t?null:t],e},useContext:Lr,useEffect:Vs,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Fs(4194308,4,Ks.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fs(4194308,4,e,t)},useInsertionEffect:function(e,t){Fs(4,2,e,t)},useMemo:function(e,t){var n=ls();t=void 0===t?null:t;var i=e();if(Go){_e(!0);try{e()}finally{_e(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=ls();if(void 0!==n){var r=n(t);if(Go){_e(!0);try{n(t)}finally{_e(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=la.bind(null,Ho,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},ls().memoizedState=e},useState:function(e){var t=(e=Ss(e)).queue,n=ua.bind(null,Ho,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Gs,useDeferredValue:function(e,t){return Ys(ls(),e,t)},useTransition:function(){var e=Ss(!1);return e=$s.bind(null,Ho,e.queue,!0,!1),ls().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Ho,r=ls();if(hr){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===pu)throw Error(s(349));0!==(127&gu)||ys(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Vs(bs.bind(null,i,o,e),[e]),i.flags|=2048,js(9,{destroy:void 0},_s.bind(null,i,o,n,t),null),n},useId:function(){var e=ls(),t=pu.identifierPrefix;if(hr){var n=ir;t="_"+t+"R_"+(n=(nr&~(1<<32-be(nr)-1)).toString(32)+n),0<(n=Qo++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Xo++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ra,useFormState:Ls,useActionState:Ls,useOptimistic:function(e){var t=ls();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ha.bind(null,Ho,!0,n),n.dispatch=t,[e,t]},useMemoCache:ds,useCacheRefresh:function(){return ls().memoizedState=aa.bind(null,Ho)},useEffectEvent:function(e){var t=ls(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&fu))throw Error(s(440));return n.impl.apply(void 0,arguments)}}},va={readContext:Lr,use:hs,useCallback:Qs,useContext:Lr,useEffect:Bs,useImperativeHandle:Zs,useInsertionEffect:qs,useLayoutEffect:Ws,useMemo:Js,useReducer:ps,useRef:zs,useState:function(){return ps(fs)},useDebugValue:Gs,useDeferredValue:function(e,t){return Xs(us(),qo.memoizedState,e,t)},useTransition:function(){var e=ps(fs)[0],t=us().memoizedState;return["boolean"===typeof e?e:cs(e),t]},useSyncExternalStore:vs,useId:oa,useHostTransitionStatus:ra,useFormState:Rs,useActionState:Rs,useOptimistic:function(e,t){return Es(us(),0,e,t)},useMemoCache:ds,useCacheRefresh:sa};va.useEffectEvent=Hs;var ya={readContext:Lr,use:hs,useCallback:Qs,useContext:Lr,useEffect:Bs,useImperativeHandle:Zs,useInsertionEffect:qs,useLayoutEffect:Ws,useMemo:Js,useReducer:gs,useRef:zs,useState:function(){return gs(fs)},useDebugValue:Gs,useDeferredValue:function(e,t){var n=us();return null===qo?Ys(n,e,t):Xs(n,qo.memoizedState,e,t)},useTransition:function(){var e=gs(fs)[0],t=us().memoizedState;return["boolean"===typeof e?e:cs(e),t]},useSyncExternalStore:vs,useId:oa,useHostTransitionStatus:ra,useFormState:Ds,useActionState:Ds,useOptimistic:function(e,t){var n=us();return null!==qo?Es(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ds,useCacheRefresh:sa};function _a(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}ya.useEffectEvent=Hs;var ba={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ku(),r=_o(i);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=bo(e,r,i))&&(Gu(t,e,i),wo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ku(),r=_o(i);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=bo(e,r,i))&&(Gu(t,e,i),wo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ku(),i=_o(n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=bo(e,i,n))&&(Gu(t,e,n),wo(t,e,n))}};function wa(e,t,n,i,r,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!$n(n,i)||!$n(r,o))}function ka(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ba.enqueueReplaceState(t,t.state,null)}function Sa(e,t){var n=t;if("ref"in t)for(var i in n={},t)"ref"!==i&&(n[i]=t[i]);if(e=e.defaultProps)for(var r in n===t&&(n=f({},n)),e)void 0===n[r]&&(n[r]=e[r]);return n}function Ea(e){Ti(e)}function xa(e){console.error(e)}function Ta(e){Ti(e)}function Ca(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Ia(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Na(e,t,n){return(n=_o(n)).tag=3,n.payload={element:null},n.callback=function(){Ca(e,t)},n}function Pa(e){return(e=_o(e)).tag=3,e}function Aa(e,t,n,i){var r=n.type.getDerivedStateFromError;if("function"===typeof r){var o=i.value;e.payload=function(){return r(o)},e.callback=function(){Ia(t,n,i)}}var s=n.stateNode;null!==s&&"function"===typeof s.componentDidCatch&&(e.callback=function(){Ia(t,n,i),"function"!==typeof r&&(null===Du?Du=new Set([this]):Du.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}var La=Error(s(461)),Ra=!1;function Oa(e,t,n,i){t.child=null===e?mo(t,null,n,i):po(t,e.child,n,i)}function Ma(e,t,n,i,r){n=n.render;var o=t.ref;if("ref"in i){var s={};for(var a in i)"ref"!==a&&(s[a]=i[a])}else s=i;return Ar(t),i=ts(e,t,n,s,o,r),a=os(),null===e||Ra?(hr&&a&&sr(t),t.flags|=1,Oa(e,t,i,r),t.child):(ss(e,t,r),rl(e,t,r))}function Da(e,t,n,i,r){if(null===e){var o=n.type;return"function"!==typeof o||Fi(o)||void 0!==o.defaultProps||null!==n.compare?((e=Bi(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ja(e,t,o,i,r))}if(o=e.child,!ol(e,r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:$n)(s,i)&&e.ref===t.ref)return rl(e,t,r)}return t.flags|=1,(e=Ui(o,i)).ref=t.ref,e.return=t,t.child=e}function ja(e,t,n,i,r){if(null!==e){var o=e.memoizedProps;if($n(o,i)&&e.ref===t.ref){if(Ra=!1,t.pendingProps=i=o,!ol(e,r))return t.lanes=e.lanes,rl(e,t,r);0!==(131072&e.flags)&&(Ra=!0)}}return qa(e,t,n,i,r)}function za(e,t,n,i){var r=i.children,o=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===i.mode){if(0!==(128&t.flags)){if(o=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,r=0;null!==i;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~o}else i=0,t.child=null;return Ua(e,t,o,n,i)}if(0===(536870912&n))return i=t.lanes=536870912,Ua(e,t,null!==o?o.baseLanes|n:n,n,i);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Qr(0,null!==o?o.cachePool:null),null!==o?Po(t,o):Ao(),jo(t)}else null!==o?(Qr(0,o.cachePool),Po(t,o),zo(),t.memoizedState=null):(null!==e&&Qr(0,null),Ao(),zo());return Oa(e,t,r,n),t.child}function Fa(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Ua(e,t,n,i,r){var o=Gr();return o=null===o?null:{parent:zr._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},null!==e&&Qr(0,null),Ao(),jo(t),null!==e&&Nr(e,t,i,!0),t.childLanes=r,null}function Va(e,t){return(t=$a({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Ba(e,t,n){return po(t,e.child,null,n),(e=Va(t,t.pendingProps)).flags|=2,Fo(t),t.memoizedState=null,e}function Ha(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(s(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function qa(e,t,n,i,r){return Ar(t),n=ts(e,t,n,i,void 0,r),i=os(),null===e||Ra?(hr&&i&&sr(t),t.flags|=1,Oa(e,t,n,r),t.child):(ss(e,t,r),rl(e,t,r))}function Wa(e,t,n,i,r,o){return Ar(t),t.updateQueue=null,n=is(t,i,n,r),ns(e),i=os(),null===e||Ra?(hr&&i&&sr(t),t.flags|=1,Oa(e,t,n,o),t.child):(ss(e,t,o),rl(e,t,o))}function Ka(e,t,n,i,r){if(Ar(t),null===t.stateNode){var o=Di,s=n.contextType;"object"===typeof s&&null!==s&&(o=Lr(s)),o=new n(i,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=ba,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=i,o.state=t.memoizedState,o.refs={},vo(t),s=n.contextType,o.context="object"===typeof s&&null!==s?Lr(s):Di,o.state=t.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(_a(t,n,s,i),o.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(s=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),s!==o.state&&ba.enqueueReplaceState(o,o.state,null),xo(t,i,o,r),Eo(),o.state=t.memoizedState),"function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){o=t.stateNode;var a=t.memoizedProps,l=Sa(n,a);o.props=l;var u=o.context,c=n.contextType;s=Di,"object"===typeof c&&null!==c&&(s=Lr(c));var h=n.getDerivedStateFromProps;c="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate,a=t.pendingProps!==a,c||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a||u!==s)&&ka(t,o,i,s),go=!1;var d=t.memoizedState;o.state=d,xo(t,i,o,r),Eo(),u=t.memoizedState,a||d!==u||go?("function"===typeof h&&(_a(t,n,h,i),u=t.memoizedState),(l=go||wa(t,n,l,i,d,u,s))?(c||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=u),o.props=i,o.state=u,o.context=s,i=l):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,yo(e,t),c=Sa(n,s=t.memoizedProps),o.props=c,h=t.pendingProps,d=o.context,u=n.contextType,l=Di,"object"===typeof u&&null!==u&&(l=Lr(u)),(u="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==l)&&ka(t,o,i,l),go=!1,d=t.memoizedState,o.state=d,xo(t,i,o,r),Eo();var f=t.memoizedState;s!==h||d!==f||go||null!==e&&null!==e.dependencies&&Pr(e.dependencies)?("function"===typeof a&&(_a(t,n,a,i),f=t.memoizedState),(c=go||wa(t,n,c,i,d,f,l)||null!==e&&null!==e.dependencies&&Pr(e.dependencies))?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),o.props=i,o.state=f,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return o=i,Ha(e,t),i=0!==(128&t.flags),o||i?(o=t.stateNode,n=i&&"function"!==typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&i?(t.child=po(t,e.child,null,r),t.child=po(t,null,n,r)):Oa(e,t,n,r),t.memoizedState=o.state,e=t.child):e=rl(e,t,r),e}function Za(e,t,n,i){return _r(),t.flags|=256,Oa(e,t,n,i),t.child}var Ga={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qa(e){return{baseLanes:e,cachePool:Jr()}}function Ja(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Cu),e}function Ya(e,t,n){var i,r=t.pendingProps,o=!1,a=0!==(128&t.flags);if((i=a)||(i=(null===e||null!==e.memoizedState)&&0!==(2&Uo.current)),i&&(o=!0,t.flags&=-129),i=0!==(32&t.flags),t.flags&=-33,null===e){if(hr){if(o?Mo(t):zo(),(e=cr)?null!==(e=null!==(e=Ph(e,fr))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==tr?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},(n=Wi(e)).return=t,t.child=n,ur=t,cr=null):e=null,null===e)throw mr(t);return Lh(e)?t.lanes=32:t.lanes=536870912,null}var l=r.children;return r=r.fallback,o?(zo(),l=$a({mode:"hidden",children:l},o=t.mode),r=Hi(r,o,n,null),l.return=t,r.return=t,l.sibling=r,t.child=l,(r=t.child).memoizedState=Qa(n),r.childLanes=Ja(e,i,n),t.memoizedState=Ga,Fa(null,r)):(Mo(t),Xa(t,l))}var u=e.memoizedState;if(null!==u&&null!==(l=u.dehydrated)){if(a)256&t.flags?(Mo(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(zo(),t.child=e.child,t.flags|=128,t=null):(zo(),l=r.fallback,o=t.mode,r=$a({mode:"visible",children:r.children},o),(l=Hi(l,o,n,null)).flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,po(t,e.child,null,n),(r=t.child).memoizedState=Qa(n),r.childLanes=Ja(e,i,n),t.memoizedState=Ga,t=Fa(null,r));else if(Mo(t),Lh(l)){if(i=l.nextSibling&&l.nextSibling.dataset)var c=i.dgst;i=c,(r=Error(s(419))).stack="",r.digest=i,wr({value:r,source:null,stack:null}),t=el(e,t,n)}else if(Ra||Nr(e,t,n,!1),i=0!==(n&e.childLanes),Ra||i){if(null!==(i=pu)&&(0!==(r=Me(i,n))&&r!==u.retryLane))throw u.retryLane=r,Ri(e,r),Gu(i,e,r),La;Ah(l)||sc(),t=el(e,t,n)}else Ah(l)?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,cr=Rh(l.nextSibling),ur=t,hr=!0,dr=null,fr=!1,null!==e&&lr(t,e),(t=Xa(t,r.children)).flags|=4096);return t}return o?(zo(),l=r.fallback,o=t.mode,c=(u=e.child).sibling,(r=Ui(u,{mode:"hidden",children:r.children})).subtreeFlags=65011712&u.subtreeFlags,null!==c?l=Ui(c,l):(l=Hi(l,o,n,null)).flags|=2,l.return=t,r.return=t,r.sibling=l,t.child=r,Fa(null,r),r=t.child,null===(l=e.child.memoizedState)?l=Qa(n):(null!==(o=l.cachePool)?(u=zr._currentValue,o=o.parent!==u?{parent:u,pool:u}:o):o=Jr(),l={baseLanes:l.baseLanes|n,cachePool:o}),r.memoizedState=l,r.childLanes=Ja(e,i,n),t.memoizedState=Ga,Fa(e.child,r)):(Mo(t),e=(n=e.child).sibling,(n=Ui(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Xa(e,t){return(t=$a({mode:"visible",children:t},e.mode)).return=e,e.child=t}function $a(e,t){return(e=zi(22,e,null,t)).lanes=0,e}function el(e,t,n){return po(t,e.child,null,n),(e=Xa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Cr(e.return,t,n)}function nl(e,t,n,i,r,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r,s.treeForkCount=o)}function il(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;i=i.children;var s=Uo.current,a=0!==(2&s);if(a?(s=1&s|2,t.flags|=128):s&=1,V(Uo,s),Oa(e,t,i,n),i=hr?Xi:0,!a&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===Vo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),nl(t,!1,r,n,o,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Vo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}nl(t,!0,n,null,o,i);break;case"together":nl(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function rl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Eu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Nr(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ui(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ui(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ol(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Pr(e))}function sl(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ra=!0;else{if(!ol(e,n)&&0===(128&t.flags))return Ra=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),xr(0,zr,e.memoizedState.cache),_r();break;case 27:case 5:J(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:xr(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Do(t),null;break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(Mo(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ya(e,t,n):(Mo(t),null!==(e=rl(e,t,n))?e.sibling:null);Mo(t);break;case 19:var r=0!==(128&e.flags);if((i=0!==(n&t.childLanes))||(Nr(e,t,n,!1),i=0!==(n&t.childLanes)),r){if(i)return il(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),V(Uo,Uo.current),i)break;return null;case 22:return t.lanes=0,za(e,t,n,t.pendingProps);case 24:xr(0,zr,e.memoizedState.cache)}return rl(e,t,n)}(e,t,n);Ra=0!==(131072&e.flags)}else Ra=!1,hr&&0!==(1048576&t.flags)&&or(t,Xi,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=io(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var r=e.$$typeof;if(r===k){t.tag=11,t=Ma(null,t,e,i,n);break e}if(r===x){t.tag=14,t=Da(null,t,e,i,n);break e}}throw t=L(e)||e,Error(s(306,t,""))}Fi(e)?(i=Sa(e,i),t.tag=1,t=Ka(null,t,e,i,n)):(t.tag=0,t=qa(null,t,e,i,n))}return t;case 0:return qa(e,t,t.type,t.pendingProps,n);case 1:return Ka(e,t,i=t.type,r=Sa(i,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(s(387));i=t.pendingProps;var o=t.memoizedState;r=o.element,yo(e,t),xo(t,i,null,n);var a=t.memoizedState;if(i=a.cache,xr(0,zr,i),i!==o.cache&&Ir(t,[zr],n,!0),Eo(),i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Za(e,t,i,n);break e}if(i!==r){wr(r=Gi(Error(s(424)),t)),t=Za(e,t,i,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(cr=Rh(e.firstChild),ur=t,hr=!0,dr=null,fr=!0,n=mo(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(_r(),i===r){t=rl(e,t,n);break e}Oa(e,t,i,n)}t=t.child}return t;case 26:return Ha(e,t),null===e?(n=Wh(t.type,null,t.pendingProps,null))?t.memoizedState=n:hr||(n=t.type,e=t.pendingProps,(i=gh(K.current).createElement(n))[Ve]=t,i[Be]=e,dh(i,n,e),et(i),t.stateNode=i):t.memoizedState=Wh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return J(t),null===e&&hr&&(i=t.stateNode=jh(t.type,t.pendingProps,K.current),ur=t,fr=!0,r=cr,Th(t.type)?(Oh=r,cr=Rh(i.firstChild)):cr=r),Oa(e,t,t.pendingProps.children,n),Ha(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&hr&&((r=i=cr)&&(null!==(i=function(e,t,n,i){for(;1===e.nodeType;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(i){if(!e[Ge])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===o)return e}if(null===(e=Rh(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,fr))?(t.stateNode=i,ur=t,cr=Rh(i.firstChild),fr=!1,r=!0):r=!1),r||mr(t)),J(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,i=o.children,_h(r,o)?i=null:null!==a&&_h(r,a)&&(t.flags|=32),null!==t.memoizedState&&(r=ts(e,t,rs,null,null,n),cd._currentValue=r),Ha(e,t),Oa(e,t,i,n),t.child;case 6:return null===e&&hr&&((e=n=cr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Rh(e.nextSibling)))return null}return e}(n,t.pendingProps,fr))?(t.stateNode=n,ur=t,cr=null,e=!0):e=!1),e||mr(t)),null;case 13:return Ya(e,t,n);case 4:return G(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=po(t,null,i,n):Oa(e,t,i,n),t.child;case 11:return Ma(e,t,t.type,t.pendingProps,n);case 7:return Oa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oa(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,xr(0,t.type,i.value),Oa(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Ar(t),i=i(r=Lr(r)),t.flags|=1,Oa(e,t,i,n),t.child;case 14:return Da(e,t,t.type,t.pendingProps,n);case 15:return ja(e,t,t.type,t.pendingProps,n);case 19:return il(e,t,n);case 31:return function(e,t,n){var i=t.pendingProps,r=0!==(128&t.flags);if(t.flags&=-129,null===e){if(hr){if("hidden"===i.mode)return e=Va(t,i),t.lanes=536870912,Fa(null,e);if(Do(t),(e=cr)?null!==(e=null!==(e=Ph(e,fr))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==tr?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},(n=Wi(e)).return=t,t.child=n,ur=t,cr=null):e=null,null===e)throw mr(t);return t.lanes=536870912,null}return Va(t,i)}var o=e.memoizedState;if(null!==o){var a=o.dehydrated;if(Do(t),r)if(256&t.flags)t.flags&=-257,t=Ba(e,t,n);else{if(null===t.memoizedState)throw Error(s(558));t.child=e.child,t.flags|=128,t=null}else if(Ra||Nr(e,t,n,!1),r=0!==(n&e.childLanes),Ra||r){if(null!==(i=pu)&&0!==(a=Me(i,n))&&a!==o.retryLane)throw o.retryLane=a,Ri(e,a),Gu(i,e,a),La;sc(),t=Ba(e,t,n)}else e=o.treeContext,cr=Rh(a.nextSibling),ur=t,hr=!0,dr=null,fr=!1,null!==e&&lr(t,e),(t=Va(t,i)).flags|=4096;return t}return(e=Ui(e.child,{mode:i.mode,children:i.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return za(e,t,n,t.pendingProps);case 24:return Ar(t),i=Lr(zr),null===e?(null===(r=Gr())&&(r=pu,o=Fr(),r.pooledCache=o,o.refCount++,null!==o&&(r.pooledCacheLanes|=n),r=o),t.memoizedState={parent:i,cache:r},vo(t),xr(0,zr,r)):(0!==(e.lanes&n)&&(yo(e,t),xo(t,null,null,n),Eo()),r=e.memoizedState,o=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),xr(0,zr,i)):(i=o.cache,xr(0,zr,i),i!==r.cache&&Ir(t,[zr],n,!0))),Oa(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function al(e){e.flags|=4}function ll(e,t,n,i,r){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&r)===r)if(e.stateNode.complete)e.flags|=8192;else{if(!ic())throw ro=eo,Xr;e.flags|=8192}}else e.flags&=-16777217}function ul(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!rd(t)){if(!ic())throw ro=eo,Xr;e.flags|=8192}}function cl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Pe():536870912,e.lanes|=t,Iu|=t)}function hl(e,t){if(!hr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function dl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=65011712&r.subtreeFlags,i|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function fl(e,t,n){var i=t.pendingProps;switch(ar(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return dl(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Tr(zr),Q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(yr(t)?al(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,br())),dl(t),null;case 26:var r=t.type,o=t.memoizedState;return null===e?(al(t),null!==o?(dl(t),ul(t,o)):(dl(t),ll(t,r,0,0,n))):o?o!==e.memoizedState?(al(t),dl(t),ul(t,o)):(dl(t),t.flags&=-16777217):((e=e.memoizedProps)!==i&&al(t),dl(t),ll(t,r,0,0,n)),null;case 27:if(Y(t),n=K.current,r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&al(t);else{if(!i){if(null===t.stateNode)throw Error(s(166));return dl(t),null}e=q.current,yr(t)?gr(t):(e=jh(r,i,n),t.stateNode=e,al(t))}return dl(t),null;case 5:if(Y(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&al(t);else{if(!i){if(null===t.stateNode)throw Error(s(166));return dl(t),null}if(o=q.current,yr(t))gr(t);else{var a=gh(K.current);switch(o){case 1:o=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:o=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":o=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":o=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(o=a.createElement("div")).innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o="string"===typeof i.is?a.createElement("select",{is:i.is}):a.createElement("select"),i.multiple?o.multiple=!0:i.size&&(o.size=i.size);break;default:o="string"===typeof i.is?a.createElement(r,{is:i.is}):a.createElement(r)}}o[Ve]=t,o[Be]=i;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)o.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=o;e:switch(dh(o,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&al(t)}}return dl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&al(t);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(e=K.current,yr(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(r=ur))switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Ve]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||uh(e.nodeValue,n)))||mr(t,!0)}else(e=gh(e).createTextNode(i))[Ve]=t,t.stateNode=e}return dl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(i=yr(t),null!==n){if(null===e){if(!i)throw Error(s(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(557));e[Ve]=t}else _r(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;dl(t),e=!1}else n=br(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Fo(t),t):(Fo(t),null);if(0!==(128&t.flags))throw Error(s(558))}return dl(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=yr(t),null!==i&&null!==i.dehydrated){if(null===e){if(!r)throw Error(s(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(s(317));r[Ve]=t}else _r(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;dl(t),r=!1}else r=br(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(Fo(t),t):(Fo(t),null)}return Fo(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==i,e=null!==e&&null!==e.memoizedState,n&&(r=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(r=i.alternate.memoizedState.cachePool.pool),o=null,null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(o=i.memoizedState.cachePool.pool),o!==r&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),cl(t,t.updateQueue),dl(t),null);case 4:return Q(),null===e&&$c(t.stateNode.containerInfo),dl(t),null;case 10:return Tr(t.type),dl(t),null;case 19:if(U(Uo),null===(i=t.memoizedState))return dl(t),null;if(r=0!==(128&t.flags),null===(o=i.rendering))if(r)hl(i,!1);else{if(0!==Su||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=Vo(e))){for(t.flags|=128,hl(i,!1),e=o.updateQueue,t.updateQueue=e,cl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vi(n,e),n=n.sibling;return V(Uo,1&Uo.current|2),hr&&rr(t,i.treeForkCount),t.child}e=e.sibling}null!==i.tail&&le()>Ou&&(t.flags|=128,r=!0,hl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Vo(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,cl(t,e),hl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!hr)return dl(t),null}else 2*le()-i.renderingStartTime>Ou&&536870912!==n&&(t.flags|=128,r=!0,hl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=le(),e.sibling=null,n=Uo.current,V(Uo,r?1&n|2:1&n),hr&&rr(t,i.treeForkCount),e):(dl(t),null);case 22:case 23:return Fo(t),Lo(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?0!==(536870912&n)&&0===(128&t.flags)&&(dl(t),6&t.subtreeFlags&&(t.flags|=8192)):dl(t),null!==(n=t.updateQueue)&&cl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&U(Zr),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Tr(zr),dl(t),null;case 25:case 30:return null}throw Error(s(156,t.tag))}function pl(e,t){switch(ar(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Tr(zr),Q(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 31:if(null!==t.memoizedState){if(Fo(t),null===t.alternate)throw Error(s(340));_r()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Fo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));_r()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(Uo),null;case 4:return Q(),null;case 10:return Tr(t.type),null;case 22:case 23:return Fo(t),Lo(),null!==e&&U(Zr),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Tr(zr),null;default:return null}}function ml(e,t){switch(ar(t),t.tag){case 3:Tr(zr),Q();break;case 26:case 27:case 5:Y(t);break;case 4:Q();break;case 31:null!==t.memoizedState&&Fo(t);break;case 13:Fo(t);break;case 19:U(Uo);break;case 10:Tr(t.type);break;case 22:case 23:Fo(t),Lo(),null!==e&&U(Zr);break;case 24:Tr(zr)}}function gl(e,t){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var o=n.create,s=n.inst;i=o(),s.destroy=i}n=n.next}while(n!==r)}}catch(a){Sc(t,t.return,a)}}function vl(e,t,n){try{var i=t.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var o=r.next;i=o;do{if((i.tag&e)===e){var s=i.inst,a=s.destroy;if(void 0!==a){s.destroy=void 0,r=t;var l=n,u=a;try{u()}catch(c){Sc(r,l,c)}}}i=i.next}while(i!==o)}}catch(c){Sc(t,t.return,c)}}function yl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Co(t,n)}catch(i){Sc(e,e.return,i)}}}function _l(e,t,n){n.props=Sa(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Sc(e,t,i)}}function bl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;default:i=e.stateNode}"function"===typeof n?e.refCleanup=n(i):n.current=i}}catch(r){Sc(e,t,r)}}function wl(e,t){var n=e.ref,i=e.refCleanup;if(null!==n)if("function"===typeof i)try{i()}catch(r){Sc(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(o){Sc(e,t,o)}else n.current=null}function kl(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Sc(e,e.return,r)}}function Sl(e,t,n){try{var i=e.stateNode;!function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,o=null,a=null,l=null,u=null,c=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":u=d;default:i.hasOwnProperty(p)||ch(e,t,p,null,i,d)}}for(var f in i){var p=i[f];if(d=n[f],i.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":o=p;break;case"name":r=p;break;case"checked":c=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(s(137,t));break;default:p!==d&&ch(e,t,f,p,i,d)}}return void yt(e,a,l,u,c,h,o,r);case"select":for(o in p=a=l=f=null,n)if(u=n[o],n.hasOwnProperty(o)&&null!=u)switch(o){case"value":break;case"multiple":p=u;default:i.hasOwnProperty(o)||ch(e,t,o,null,i,u)}for(r in i)if(o=i[r],u=n[r],i.hasOwnProperty(r)&&(null!=o||null!=u))switch(r){case"value":f=o;break;case"defaultValue":l=o;break;case"multiple":a=o;default:o!==u&&ch(e,t,r,o,i,u)}return t=l,n=a,i=p,void(null!=f?wt(e,!!n,f,!1):!!i!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(r=n[l],n.hasOwnProperty(l)&&null!=r&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ch(e,t,l,null,i,r)}for(a in i)if(r=i[a],o=n[a],i.hasOwnProperty(a)&&(null!=r||null!=o))switch(a){case"value":f=r;break;case"defaultValue":p=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(s(91));break;default:r!==o&&ch(e,t,a,r,i,o)}return void kt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!i.hasOwnProperty(m))if("selected"===m)e.selected=!1;else ch(e,t,m,null,i,f);for(u in i)if(f=i[u],p=n[u],i.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))if("selected"===u)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else ch(e,t,u,f,i,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!i.hasOwnProperty(g)&&ch(e,t,g,null,i,f);for(c in i)if(f=i[c],p=n[c],i.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(s(137,t));break;default:ch(e,t,c,f,i,p)}return;default:if(It(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!i.hasOwnProperty(v)&&hh(e,t,v,void 0,i,f);for(h in i)f=i[h],p=n[h],!i.hasOwnProperty(h)||f===p||void 0===f&&void 0===p||hh(e,t,h,f,i,p);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!i.hasOwnProperty(y)&&ch(e,t,y,null,i,f);for(d in i)f=i[d],p=n[d],!i.hasOwnProperty(d)||f===p||null==f&&null==p||ch(e,t,d,f,i,p)}(i,e.type,n,t),i[Be]=t}catch(r){Sc(e,e.return,r)}}function El(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Th(e.type)||4===e.tag}function xl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||El(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Th(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Tl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Lt));else if(4!==i&&(27===i&&Th(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Tl(e,t,n),e=e.sibling;null!==e;)Tl(e,t,n),e=e.sibling}function Cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&(27===i&&Th(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Cl(e,t,n),e=e.sibling;null!==e;)Cl(e,t,n),e=e.sibling}function Il(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);dh(t,i,n),t[Ve]=e,t[Be]=n}catch(o){Sc(e,e.return,o)}}var Nl=!1,Pl=!1,Al=!1,Ll="function"===typeof WeakSet?WeakSet:Set,Rl=null;function Ol(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Gl(e,n),4&i&&gl(5,n);break;case 1:if(Gl(e,n),4&i)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){Sc(n,n.return,s)}else{var r=Sa(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){Sc(n,n.return,a)}}64&i&&yl(n),512&i&&bl(n,n.return);break;case 3:if(Gl(e,n),64&i&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Co(e,t)}catch(s){Sc(n,n.return,s)}}break;case 27:null===t&&4&i&&Il(n);case 26:case 5:Gl(e,n),null===t&&4&i&&kl(n),512&i&&bl(n,n.return);break;case 12:Gl(e,n);break;case 31:Gl(e,n),4&i&&Ul(e,n);break;case 13:Gl(e,n),4&i&&Vl(e,n),64&i&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}(e,n=Cc.bind(null,n))));break;case 22:if(!(i=null!==n.memoizedState||Nl)){t=null!==t&&null!==t.memoizedState||Pl,r=Nl;var o=Pl;Nl=i,(Pl=t)&&!o?Jl(e,n,0!==(8772&n.subtreeFlags)):Gl(e,n),Nl=r,Pl=o}break;case 30:break;default:Gl(e,n)}}function Ml(e){var t=e.alternate;null!==t&&(e.alternate=null,Ml(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Qe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Dl=null,jl=!1;function zl(e,t,n){for(n=n.child;null!==n;)Fl(e,t,n),n=n.sibling}function Fl(e,t,n){if(ye&&"function"===typeof ye.onCommitFiberUnmount)try{ye.onCommitFiberUnmount(ve,n)}catch(o){}switch(n.tag){case 26:Pl||wl(n,t),zl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Pl||wl(n,t);var i=Dl,r=jl;Th(n.type)&&(Dl=n.stateNode,jl=!1),zl(e,t,n),zh(n.stateNode),Dl=i,jl=r;break;case 5:Pl||wl(n,t);case 6:if(i=Dl,r=jl,Dl=null,zl(e,t,n),jl=r,null!==(Dl=i))if(jl)try{(9===Dl.nodeType?Dl.body:"HTML"===Dl.nodeName?Dl.ownerDocument.body:Dl).removeChild(n.stateNode)}catch(s){Sc(n,t,s)}else try{Dl.removeChild(n.stateNode)}catch(s){Sc(n,t,s)}break;case 18:null!==Dl&&(jl?(Ch(9===(e=Dl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),qd(e)):Ch(Dl,n.stateNode));break;case 4:i=Dl,r=jl,Dl=n.stateNode.containerInfo,jl=!0,zl(e,t,n),Dl=i,jl=r;break;case 0:case 11:case 14:case 15:vl(2,n,t),Pl||vl(4,n,t),zl(e,t,n);break;case 1:Pl||(wl(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount&&_l(n,t,i)),zl(e,t,n);break;case 21:zl(e,t,n);break;case 22:Pl=(i=Pl)||null!==n.memoizedState,zl(e,t,n),Pl=i;break;default:zl(e,t,n)}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{qd(e)}catch(n){Sc(t,t.return,n)}}}function Vl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{qd(e)}catch(n){Sc(t,t.return,n)}}function Bl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Ll),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Ll),t;default:throw Error(s(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var i=Ic.bind(null,e,t);t.then(i,i)}})}function Hl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i],o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(Th(l.type)){Dl=l.stateNode,jl=!1;break e}break;case 5:Dl=l.stateNode,jl=!1;break e;case 3:case 4:Dl=l.stateNode.containerInfo,jl=!0;break e}l=l.return}if(null===Dl)throw Error(s(160));Fl(o,a,r),Dl=null,jl=!1,null!==(o=r.alternate)&&(o.return=null),r.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Wl(t,e),t=t.sibling}var ql=null;function Wl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hl(t,e),Kl(e),4&i&&(vl(3,e,e.return),gl(3,e),vl(5,e,e.return));break;case 1:Hl(t,e),Kl(e),512&i&&(Pl||null===n||wl(n,n.return)),64&i&&Nl&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var r=ql;if(Hl(t,e),Kl(e),512&i&&(Pl||null===n||wl(n,n.return)),4&i){var o=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n)if(null===i)if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":(!(o=r.getElementsByTagName("title")[0])||o[Ge]||o[Ve]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=r.createElement(i),r.head.insertBefore(o,r.querySelector("head > title"))),dh(o,i,n),o[Ve]=e,et(o),i=o;break e;case"link":var a=nd("link","href",r).get(i+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((o=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}dh(o=r.createElement(i),i,n),r.head.appendChild(o);break;case"meta":if(a=nd("meta","content",r).get(i+(n.content||"")))for(l=0;l<a.length;l++)if((o=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}dh(o=r.createElement(i),i,n),r.head.appendChild(o);break;default:throw Error(s(468,i))}o[Ve]=e,et(o),i=o}e.stateNode=i}else id(r,e.type,e.stateNode);else e.stateNode=Yh(r,i,e.memoizedProps);else o!==i?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===i?id(r,e.type,e.stateNode):Yh(r,i,e.memoizedProps)):null===i&&null!==e.stateNode&&Sl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hl(t,e),Kl(e),512&i&&(Pl||null===n||wl(n,n.return)),null!==n&&4&i&&Sl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hl(t,e),Kl(e),512&i&&(Pl||null===n||wl(n,n.return)),32&e.flags){r=e.stateNode;try{Et(r,"")}catch(m){Sc(e,e.return,m)}}4&i&&null!=e.stateNode&&Sl(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&i&&(Al=!0);break;case 6:if(Hl(t,e),Kl(e),4&i){if(null===e.stateNode)throw Error(s(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(m){Sc(e,e.return,m)}}break;case 3:if(td=null,r=ql,ql=Vh(t.containerInfo),Hl(t,e),ql=r,Kl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{qd(t.containerInfo)}catch(m){Sc(e,e.return,m)}Al&&(Al=!1,Zl(e));break;case 4:i=ql,ql=Vh(e.stateNode.containerInfo),Hl(t,e),Kl(e),ql=i;break;case 12:default:Hl(t,e),Kl(e);break;case 31:case 19:Hl(t,e),Kl(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Bl(e,i)));break;case 13:Hl(t,e),Kl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Lu=le()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Bl(e,i)));break;case 22:r=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=Nl,h=Pl;if(Nl=c||r,Pl=h||u,Hl(t,e),Pl=h,Nl=c,Kl(e),8192&i)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||u||Nl||Pl||Ql(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(o=u.stateNode,r)"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var d=u.memoizedProps.style,f=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){Sc(u,u.return,m)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=r?"":u.memoizedProps}catch(m){Sc(u,u.return,m)}}}else if(18===t.tag){if(null===n){u=t;try{var p=u.stateNode;r?Ih(p,!0):Ih(u.stateNode,!1)}catch(m){Sc(u,u.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,Bl(e,n))));case 30:case 21:}}function Kl(e){var t=e.flags;if(2&t){try{for(var n,i=e.return;null!==i;){if(El(i)){n=i;break}i=i.return}if(null==n)throw Error(s(160));switch(n.tag){case 27:var r=n.stateNode;Cl(e,xl(e),r);break;case 5:var o=n.stateNode;32&n.flags&&(Et(o,""),n.flags&=-33),Cl(e,xl(e),o);break;case 3:case 4:var a=n.stateNode.containerInfo;Tl(e,xl(e),a);break;default:throw Error(s(161))}}catch(l){Sc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Zl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Zl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Gl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ol(e,t.alternate,t),t=t.sibling}function Ql(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vl(4,t,t.return),Ql(t);break;case 1:wl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&_l(t,t.return,n),Ql(t);break;case 27:zh(t.stateNode);case 26:case 5:wl(t,t.return),Ql(t);break;case 22:null===t.memoizedState&&Ql(t);break;default:Ql(t)}e=e.sibling}}function Jl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var i=t.alternate,r=e,o=t,s=o.flags;switch(o.tag){case 0:case 11:case 15:Jl(r,o,n),gl(4,o);break;case 1:if(Jl(r,o,n),"function"===typeof(r=(i=o).stateNode).componentDidMount)try{r.componentDidMount()}catch(u){Sc(i,i.return,u)}if(null!==(r=(i=o).updateQueue)){var a=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(null!==l)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)To(l[r],a)}catch(u){Sc(i,i.return,u)}}n&&64&s&&yl(o),bl(o,o.return);break;case 27:Il(o);case 26:case 5:Jl(r,o,n),n&&null===i&&4&s&&kl(o),bl(o,o.return);break;case 12:Jl(r,o,n);break;case 31:Jl(r,o,n),n&&4&s&&Ul(r,o);break;case 13:Jl(r,o,n),n&&4&s&&Vl(r,o);break;case 22:null===o.memoizedState&&Jl(r,o,n),bl(o,o.return);break;case 30:break;default:Jl(r,o,n)}t=t.sibling}}function Yl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ur(n))}function Xl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ur(e))}function $l(e,t,n,i){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)eu(e,t,n,i),t=t.sibling}function eu(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:$l(e,t,n,i),2048&r&&gl(9,t);break;case 1:case 31:case 13:default:$l(e,t,n,i);break;case 3:$l(e,t,n,i),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ur(e)));break;case 12:if(2048&r){$l(e,t,n,i),e=t.stateNode;try{var o=t.memoizedProps,s=o.id,a=o.onPostCommit;"function"===typeof a&&a(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Sc(t,t.return,l)}}else $l(e,t,n,i);break;case 23:break;case 22:o=t.stateNode,s=t.alternate,null!==t.memoizedState?2&o._visibility?$l(e,t,n,i):nu(e,t):2&o._visibility?$l(e,t,n,i):(o._visibility|=2,tu(e,t,n,i,0!==(10256&t.subtreeFlags)||!1)),2048&r&&Yl(s,t);break;case 24:$l(e,t,n,i),2048&r&&Xl(t.alternate,t)}}function tu(e,t,n,i,r){for(r=r&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var o=e,s=t,a=n,l=i,u=s.flags;switch(s.tag){case 0:case 11:case 15:tu(o,s,a,l,r),gl(8,s);break;case 23:break;case 22:var c=s.stateNode;null!==s.memoizedState?2&c._visibility?tu(o,s,a,l,r):nu(o,s):(c._visibility|=2,tu(o,s,a,l,r)),r&&2048&u&&Yl(s.alternate,s);break;case 24:tu(o,s,a,l,r),r&&2048&u&&Xl(s.alternate,s);break;default:tu(o,s,a,l,r)}t=t.sibling}}function nu(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:nu(n,i),2048&r&&Yl(i.alternate,i);break;case 24:nu(n,i),2048&r&&Xl(i.alternate,i);break;default:nu(n,i)}t=t.sibling}}var iu=8192;function ru(e,t,n){if(e.subtreeFlags&iu)for(e=e.child;null!==e;)ou(e,t,n),e=e.sibling}function ou(e,t,n){switch(e.tag){case 26:ru(e,t,n),e.flags&iu&&null!==e.memoizedState&&function(e,t,n,i){if("stylesheet"===n.type&&("string"!==typeof i.media||!1!==matchMedia(i.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var r=Kh(i.href),o=t.querySelector(Zh(r));if(o)return null!==(t=o._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=sd.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=o,void et(o);o=t.ownerDocument||t,i=Gh(i),(r=Fh.get(r))&&$h(i,r),et(o=o.createElement("link"));var s=o;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),dh(o,"link",i),n.instance=o}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=sd.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,ql,e.memoizedState,e.memoizedProps);break;case 5:default:ru(e,t,n);break;case 3:case 4:var i=ql;ql=Vh(e.stateNode.containerInfo),ru(e,t,n),ql=i;break;case 22:null===e.memoizedState&&(null!==(i=e.alternate)&&null!==i.memoizedState?(i=iu,iu=16777216,ru(e,t,n),iu=i):ru(e,t,n))}}function su(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function au(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];Rl=i,cu(i,e)}su(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lu(e),e=e.sibling}function lu(e){switch(e.tag){case 0:case 11:case 15:au(e),2048&e.flags&&vl(9,e,e.return);break;case 3:case 12:default:au(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,uu(e)):au(e)}}function uu(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];Rl=i,cu(i,e)}su(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vl(8,t,t.return),uu(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,uu(t));break;default:uu(t)}e=e.sibling}}function cu(e,t){for(;null!==Rl;){var n=Rl;switch(n.tag){case 0:case 11:case 15:vl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:Ur(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,Rl=i;else e:for(n=e;null!==Rl;){var r=(i=Rl).sibling,o=i.return;if(Ml(i),i===n){Rl=null;break e}if(null!==r){r.return=o,Rl=r;break e}Rl=o}}}var hu={getCacheForType:function(e){var t=Lr(zr),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Lr(zr).controller.signal}},du="function"===typeof WeakMap?WeakMap:Map,fu=0,pu=null,mu=null,gu=0,vu=0,yu=null,_u=!1,bu=!1,wu=!1,ku=0,Su=0,Eu=0,xu=0,Tu=0,Cu=0,Iu=0,Nu=null,Pu=null,Au=!1,Lu=0,Ru=0,Ou=1/0,Mu=null,Du=null,ju=0,zu=null,Fu=null,Uu=0,Vu=0,Bu=null,Hu=null,qu=0,Wu=null;function Ku(){return 0!==(2&fu)&&0!==gu?gu&-gu:null!==O.T?Bc():ze()}function Zu(){if(0===Cu)if(0===(536870912&gu)||hr){var e=Ee;0===(3932160&(Ee<<=1))&&(Ee=262144),Cu=e}else Cu=536870912;return null!==(e=Ro.current)&&(e.flags|=32),Cu}function Gu(e,t,n){(e!==pu||2!==vu&&9!==vu)&&null===e.cancelPendingCommit||(tc(e,0),Xu(e,gu,Cu,!1)),Le(e,n),0!==(2&fu)&&e===pu||(e===pu&&(0===(2&fu)&&(xu|=n),4===Su&&Xu(e,gu,Cu,!1)),Mc(e))}function Qu(e,t,n){if(0!==(6&fu))throw Error(s(327));for(var i=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Ie(e,t),r=i?function(e,t){var n=fu;fu|=2;var i=rc(),r=oc();pu!==e||gu!==t?(Mu=null,Ou=le()+500,tc(e,t)):bu=Ie(e,t);e:for(;;)try{if(0!==vu&&null!==mu){t=mu;var o=yu;t:switch(vu){case 1:vu=0,yu=null,dc(e,t,o,1);break;case 2:case 9:if(to(o)){vu=0,yu=null,hc(t);break}t=function(){2!==vu&&9!==vu||pu!==e||(vu=7),Mc(e)},o.then(t,t);break e;case 3:vu=7;break e;case 4:vu=5;break e;case 7:to(o)?(vu=0,yu=null,hc(t)):(vu=0,yu=null,dc(e,t,o,7));break;case 5:var a=null;switch(mu.tag){case 26:a=mu.memoizedState;case 5:case 27:var l=mu;if(a?rd(a):l.stateNode.complete){vu=0,yu=null;var u=l.sibling;if(null!==u)mu=u;else{var c=l.return;null!==c?(mu=c,fc(c)):mu=null}break t}}vu=0,yu=null,dc(e,t,o,5);break;case 6:vu=0,yu=null,dc(e,t,o,6);break;case 8:ec(),Su=6;break e;default:throw Error(s(462))}}uc();break}catch(h){nc(e,h)}return Er=Sr=null,O.H=i,O.A=r,fu=n,null!==mu?0:(pu=null,gu=0,Pi(),Su)}(e,t):ac(e,t,!0),o=i;;){if(0===r){bu&&!i&&Xu(e,t,0,!1);break}if(n=e.current.alternate,!o||Yu(n)){if(2===r){if(o=t,e.errorRecoveryDisabledLanes&o)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;r=Nu;var u=l.current.memoizedState.isDehydrated;if(u&&(tc(l,a).flags|=256),2!==(a=ac(l,a,!1))){if(wu&&!u){l.errorRecoveryDisabledLanes|=o,xu|=o,r=4;break e}o=Pu,Pu=r,null!==o&&(null===Pu?Pu=o:Pu.push.apply(Pu,o))}r=a}if(o=!1,2!==r)continue}}if(1===r){tc(e,0),Xu(e,t,0,!0);break}e:{switch(i=e,o=r){case 0:case 1:throw Error(s(345));case 4:if((4194048&t)!==t)break;case 6:Xu(i,t,Cu,!_u);break e;case 2:Pu=null;break;case 3:case 5:break;default:throw Error(s(329))}if((62914560&t)===t&&10<(r=Lu+300-le())){if(Xu(i,t,Cu,!_u),0!==Ce(i,0,!0))break e;Uu=t,i.timeoutHandle=wh(Ju.bind(null,i,n,Pu,Mu,Au,t,Cu,xu,Iu,_u,o,"Throttled",-0,0),r)}else Ju(i,n,Pu,Mu,Au,t,Cu,xu,Iu,_u,o,null,-0,0)}break}r=ac(e,t,!1),o=!1}Mc(e)}function Ju(e,t,n,i,r,o,s,a,l,u,c,h,d,f){if(e.timeoutHandle=-1,8192&(h=t.subtreeFlags)||16785408===(16785408&h)){ou(t,o,h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Lt});var p=(62914560&o)===o?Lu-le():(4194048&o)===o?Ru-le():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&ld(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&ld(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===od&&(od=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],o=r.transferSize,s=r.initiatorType,a=r.duration;if(o&&a&&fh(s)){for(s=0,a=r.responseEnd,i+=1;i<n.length;i++){var l=n[i],u=l.startTime;if(u>a)break;var c=l.transferSize,h=l.initiatorType;c&&fh(h)&&(s+=c*((l=l.responseEnd)<a?1:(a-u)/(l-u)))}if(--i,t+=8*(o+s)/(r.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var r=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&ld(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>od?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}(h,p)))return Uu=o,e.cancelPendingCommit=p(mc.bind(null,e,t,o,n,i,r,s,a,l,c,h,null,d,f)),void Xu(e,o,s,!u)}mc(e,t,o,n,i,r,s,a,l)}function Yu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Xn(o(),r))return!1}catch(s){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xu(e,t,n,i){t&=~Tu,t&=~xu,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var o=31-be(r),s=1<<o;i[o]=-1,r&=~s}0!==n&&Re(e,n,t)}function $u(){return 0!==(6&fu)||(Dc(0,!1),!1)}function ec(){if(null!==mu){if(0===vu)var e=mu.return;else Er=Sr=null,as(e=mu),ao=null,lo=0,e=mu;for(;null!==e;)ml(e.alternate,e),e=e.return;mu=null}}function tc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,kh(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uu=0,ec(),pu=e,mu=n=Ui(e.current,null),gu=t,vu=0,yu=null,_u=!1,bu=Ie(e,t),wu=!1,Iu=Cu=Tu=xu=Eu=Su=0,Pu=Nu=null,Au=!1,0!==(8&t)&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var r=31-be(i),o=1<<r;t|=e[r],i&=~o}return ku=t,Pi(),n}function nc(e,t){Ho=null,O.H=ma,t===Yr||t===$r?(t=oo(),vu=3):t===Xr?(t=oo(),vu=4):vu=t===La?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,yu=t,null===mu&&(Su=1,Ca(e,Gi(t,e.current)))}function ic(){var e=Ro.current;return null===e||((4194048&gu)===gu?null===Oo:((62914560&gu)===gu||0!==(536870912&gu))&&e===Oo)}function rc(){var e=O.H;return O.H=ma,null===e?ma:e}function oc(){var e=O.A;return O.A=hu,e}function sc(){Su=4,_u||(4194048&gu)!==gu&&null!==Ro.current||(bu=!0),0===(134217727&Eu)&&0===(134217727&xu)||null===pu||Xu(pu,gu,Cu,!1)}function ac(e,t,n){var i=fu;fu|=2;var r=rc(),o=oc();pu===e&&gu===t||(Mu=null,tc(e,t)),t=!1;var s=Su;e:for(;;)try{if(0!==vu&&null!==mu){var a=mu,l=yu;switch(vu){case 8:ec(),s=6;break e;case 3:case 2:case 9:case 6:null===Ro.current&&(t=!0);var u=vu;if(vu=0,yu=null,dc(e,a,l,u),n&&bu){s=0;break e}break;default:u=vu,vu=0,yu=null,dc(e,a,l,u)}}lc(),s=Su;break}catch(c){nc(e,c)}return t&&e.shellSuspendCounter++,Er=Sr=null,fu=i,O.H=r,O.A=o,null===mu&&(pu=null,gu=0,Pi()),s}function lc(){for(;null!==mu;)cc(mu)}function uc(){for(;null!==mu&&!se();)cc(mu)}function cc(e){var t=sl(e.alternate,e,ku);e.memoizedProps=e.pendingProps,null===t?fc(e):mu=t}function hc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Wa(n,t,t.pendingProps,t.type,void 0,gu);break;case 11:t=Wa(n,t,t.pendingProps,t.type.render,t.ref,gu);break;case 5:as(t);default:ml(n,t),t=sl(n,t=mu=Vi(t,ku),ku)}e.memoizedProps=e.pendingProps,null===t?fc(e):mu=t}function dc(e,t,n,i){Er=Sr=null,as(t),ao=null,lo=0;var r=t.return;try{if(function(e,t,n,i,r){if(n.flags|=32768,null!==i&&"object"===typeof i&&"function"===typeof i.then){if(null!==(t=n.alternate)&&Nr(t,n,r,!0),null!==(n=Ro.current)){switch(n.tag){case 31:case 13:return null===Oo?sc():null===n.alternate&&0===Su&&(Su=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===eo?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),Ec(e,i,r)),!1;case 22:return n.flags|=65536,i===eo?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),Ec(e,i,r)),!1}throw Error(s(435,n.tag))}return Ec(e,i,r),sc(),!1}if(hr)return null!==(t=Ro.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==pr&&wr(Gi(e=Error(s(422),{cause:i}),n))):(i!==pr&&wr(Gi(t=Error(s(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,i=Gi(i,n),ko(e,r=Na(e.stateNode,i,r)),4!==Su&&(Su=2)),!1;var o=Error(s(520),{cause:i});if(o=Gi(o,n),null===Nu?Nu=[o]:Nu.push(o),4!==Su&&(Su=2),null===t)return!0;i=Gi(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,ko(n,e=Na(n.stateNode,i,e)),!1;case 1:if(t=n.type,o=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==o&&"function"===typeof o.componentDidCatch&&(null===Du||!Du.has(o))))return n.flags|=65536,r&=-r,n.lanes|=r,Aa(r=Pa(r),e,n,i),ko(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,gu))return Su=1,Ca(e,Gi(n,e.current)),void(mu=null)}catch(o){if(null!==r)throw mu=r,o;return Su=1,Ca(e,Gi(n,e.current)),void(mu=null)}32768&t.flags?(hr||1===i?e=!0:bu||0!==(536870912&gu)?e=!1:(_u=e=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=Ro.current)&&13===i.tag&&(i.flags|=16384))),pc(t,e)):fc(t)}function fc(e){var t=e;do{if(0!==(32768&t.flags))return void pc(t,_u);e=t.return;var n=fl(t.alternate,t,ku);if(null!==n)return void(mu=n);if(null!==(t=t.sibling))return void(mu=t);mu=t=e}while(null!==t);0===Su&&(Su=5)}function pc(e,t){do{var n=pl(e.alternate,e);if(null!==n)return n.flags&=32767,void(mu=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(mu=e);mu=e=n}while(null!==e);Su=6,mu=null}function mc(e,t,n,i,r,o,a,l,u){e.cancelPendingCommit=null;do{bc()}while(0!==ju);if(0!==(6&fu))throw Error(s(327));if(null!==t){if(t===e.current)throw Error(s(177));if(o=t.lanes|t.childLanes,function(e,t,n,i,r,o){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=s&~n;0<n;){var c=31-be(n),h=1<<c;a[c]=0,l[c]=-1;var d=u[c];if(null!==d)for(u[c]=null,c=0;c<d.length;c++){var f=d[c];null!==f&&(f.lane&=-536870913)}n&=~h}0!==i&&Re(e,i,0),0!==o&&0===r&&0!==e.tag&&(e.suspendedLanes|=o&~(s&~t))}(e,n,o|=Ni,a,l,u),e===pu&&(mu=pu=null,gu=0),Fu=t,zu=e,Uu=n,Vu=o,Bu=r,Hu=i,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,re(de,function(){return wc(),null})):(e.callbackNode=null,e.callbackPriority=0),i=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||i){i=O.T,O.T=null,r=M.p,M.p=2,a=fu,fu|=4;try{!function(e,t){if(e=e.containerInfo,ph=_d,ri(e=ii(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(g){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=a+r),d!==o||0!==i&&3!==d.nodeType||(u=a+i),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===r&&(l=a),f===o&&++h===i&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(mh={focusedElem:e,selectionRange:n},_d=!1,Rl=t;null!==Rl;)if(e=(t=Rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Rl=e;else for(;null!==Rl;){switch(o=(t=Rl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(r=e[n]).ref.impl=r.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==o){e=void 0,n=t,r=o.memoizedProps,o=o.memoizedState,i=n.stateNode;try{var m=Sa(n.type,r);e=i.getSnapshotBeforeUpdate(m,o),i.__reactInternalSnapshotBeforeUpdate=e}catch(v){Sc(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Nh(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Nh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(s(163))}if(null!==(e=t.sibling)){e.return=t.return,Rl=e;break}Rl=t.return}}(e,t)}finally{fu=a,M.p=r,O.T=i}}ju=1,gc(),vc(),yc()}}function gc(){if(1===ju){ju=0;var e=zu,t=Fu,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var i=M.p;M.p=2;var r=fu;fu|=4;try{Wl(t,e);var o=mh,s=ii(e.containerInfo),a=o.focusedElem,l=o.selectionRange;if(s!==a&&a&&a.ownerDocument&&ni(a.ownerDocument.documentElement,a)){if(null!==l&&ri(a)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in a)a.selectionStart=u,a.selectionEnd=Math.min(c,a.value.length);else{var h=a.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),p=a.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(s=g,g=m,m=s);var v=ti(a,m),y=ti(a,g);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var _=h.createRange();_.setStart(v.node,v.offset),f.removeAllRanges(),m>g?(f.addRange(_),f.extend(y.node,y.offset)):(_.setEnd(y.node,y.offset),f.addRange(_))}}}}for(h=[],f=a;f=f.parentNode;)1===f.nodeType&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<h.length;a++){var b=h[a];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}_d=!!ph,mh=ph=null}finally{fu=r,M.p=i,O.T=n}}e.current=t,ju=2}}function vc(){if(2===ju){ju=0;var e=zu,t=Fu,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var i=M.p;M.p=2;var r=fu;fu|=4;try{Ol(e,t.alternate,t)}finally{fu=r,M.p=i,O.T=n}}ju=3}}function yc(){if(4===ju||3===ju){ju=0,ae();var e=zu,t=Fu,n=Uu,i=Hu;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?ju=5:(ju=0,Fu=zu=null,_c(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(Du=null),je(n),t=t.stateNode,ye&&"function"===typeof ye.onCommitFiberRoot)try{ye.onCommitFiberRoot(ve,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==i){t=O.T,r=M.p,M.p=2,O.T=null;try{for(var o=e.onRecoverableError,s=0;s<i.length;s++){var a=i[s];o(a.value,{componentStack:a.stack})}}finally{O.T=t,M.p=r}}0!==(3&Uu)&&bc(),Mc(e),r=e.pendingLanes,0!==(261930&n)&&0!==(42&r)?e===Wu?qu++:(qu=0,Wu=e):qu=0,Dc(0,!1)}}function _c(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ur(t)))}function bc(){return gc(),vc(),yc(),wc()}function wc(){if(5!==ju)return!1;var e=zu,t=Vu;Vu=0;var n=je(Uu),i=O.T,r=M.p;try{M.p=32>n?32:n,O.T=null,n=Bu,Bu=null;var o=zu,a=Uu;if(ju=0,Fu=zu=null,Uu=0,0!==(6&fu))throw Error(s(331));var l=fu;if(fu|=4,lu(o.current),eu(o,o.current,a,n),fu=l,Dc(0,!1),ye&&"function"===typeof ye.onPostCommitFiberRoot)try{ye.onPostCommitFiberRoot(ve,o)}catch(u){}return!0}finally{M.p=r,O.T=i,_c(e,t)}}function kc(e,t,n){t=Gi(n,t),null!==(e=bo(e,t=Na(e.stateNode,t,2),2))&&(Le(e,2),Mc(e))}function Sc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Du||!Du.has(i))){e=Gi(n,e),null!==(i=bo(t,n=Pa(2),2))&&(Aa(n,i,t,e),Le(i,2),Mc(i));break}}t=t.return}}function Ec(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new du;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(wu=!0,r.add(n),e=xc.bind(null,e,t,n),t.then(e,e))}function xc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pu===e&&(gu&n)===n&&(4===Su||3===Su&&(62914560&gu)===gu&&300>le()-Lu?0===(2&fu)&&tc(e,0):Tu|=n,Iu===gu&&(Iu=0)),Mc(e)}function Tc(e,t){0===t&&(t=Pe()),null!==(e=Ri(e,t))&&(Le(e,t),Mc(e))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(s(314))}null!==i&&i.delete(t),Tc(e,n)}var Nc=null,Pc=null,Ac=!1,Lc=!1,Rc=!1,Oc=0;function Mc(e){e!==Pc&&null===e.next&&(null===Pc?Nc=Pc=e:Pc=Pc.next=e),Lc=!0,Ac||(Ac=!0,Eh(function(){0!==(6&fu)?re(ce,jc):zc()}))}function Dc(e,t){if(!Rc&&Lc){Rc=!0;do{for(var n=!1,i=Nc;null!==i;){if(!t)if(0!==e){var r=i.pendingLanes;if(0===r)var o=0;else{var s=i.suspendedLanes,a=i.pingedLanes;o=(1<<31-be(42|e)+1)-1,o=201326741&(o&=r&~(s&~a))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Vc(i,o))}else o=gu,0===(3&(o=Ce(i,i===pu?o:0,null!==i.cancelPendingCommit||-1!==i.timeoutHandle)))||Ie(i,o)||(n=!0,Vc(i,o));i=i.next}}while(n);Rc=!1}}function jc(){zc()}function zc(){Lc=Ac=!1;var e=0;0!==Oc&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==bh&&(bh=e,!0);return bh=null,!1}()&&(e=Oc);for(var t=le(),n=null,i=Nc;null!==i;){var r=i.next,o=Fc(i,t);0===o?(i.next=null,null===n?Nc=r:n.next=r,null===r&&(Pc=n)):(n=i,(0!==e||0!==(3&o))&&(Lc=!0)),i=r}0!==ju&&5!==ju||Dc(e,!1),0!==Oc&&(Oc=0)}function Fc(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var s=31-be(o),a=1<<s,l=r[s];-1===l?0!==(a&n)&&0===(a&i)||(r[s]=Ne(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}if(n=gu,n=Ce(e,e===(t=pu)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),i=e.callbackNode,0===n||e===t&&(2===vu||9===vu)||null!==e.cancelPendingCommit)return null!==i&&null!==i&&oe(i),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ie(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==i&&oe(i),je(n)){case 2:case 8:n=he;break;case 32:default:n=de;break;case 268435456:n=pe}return i=Uc.bind(null,e),n=re(n,i),e.callbackPriority=t,e.callbackNode=n,t}return null!==i&&null!==i&&oe(i),e.callbackPriority=2,e.callbackNode=null,2}function Uc(e,t){if(0!==ju&&5!==ju)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(bc()&&e.callbackNode!==n)return null;var i=gu;return 0===(i=Ce(e,e===pu?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Qu(e,i,t),Fc(e,le()),null!=e.callbackNode&&e.callbackNode===n?Uc.bind(null,e):null)}function Vc(e,t){if(bc())return null;Qu(e,t,!0)}function Bc(){if(0===Oc){var e=Hr;0===e&&(e=Se,0===(261888&(Se<<=1))&&(Se=256)),Oc=e}return Oc}function Hc(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function qc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Wc=0;Wc<Ei.length;Wc++){var Kc=Ei[Wc];xi(Kc.toLowerCase(),"on"+(Kc[0].toUpperCase()+Kc.slice(1)))}xi(gi,"onAnimationEnd"),xi(vi,"onAnimationIteration"),xi(yi,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(_i,"onTransitionRun"),xi(bi,"onTransitionStart"),xi(wi,"onTransitionCancel"),xi(ki,"onTransitionEnd"),rt("onMouseEnter",["mouseout","mouseover"]),rt("onMouseLeave",["mouseout","mouseover"]),rt("onPointerEnter",["pointerout","pointerover"]),rt("onPointerLeave",["pointerout","pointerover"]),it("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),it("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),it("onBeforeInput",["compositionend","keypress","textInput","paste"]),it("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),it("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),it("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zc));function Qc(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break e;o=a,r.currentTarget=u;try{o(r)}catch(c){Ti(c)}r.currentTarget=null,o=l}else for(s=0;s<i.length;s++){if(l=(a=i[s]).instance,u=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break e;o=a,r.currentTarget=u;try{o(r)}catch(c){Ti(c)}r.currentTarget=null,o=l}}}}function Jc(e,t){var n=t[qe];void 0===n&&(n=t[qe]=new Set);var i=e+"__bubble";n.has(i)||(eh(t,e,2,!1),n.add(i))}function Yc(e,t,n){var i=0;t&&(i|=4),eh(n,e,i,t)}var Xc="_reactListening"+Math.random().toString(36).slice(2);function $c(e){if(!e[Xc]){e[Xc]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Gc.has(t)||Yc(t,!1,e),Yc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Xc]||(t[Xc]=!0,Yc("selectionchange",!1,t))}}function eh(e,t,n,i){switch(Td(t)){case 2:var r=bd;break;case 8:r=wd;break;default:r=kd}n=r.bind(null,t,n,e),r=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function th(e,t,n,i,r){var o=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var a=i.stateNode.containerInfo;if(a===r)break;if(4===s)for(s=i.return;null!==s;){var u=s.tag;if((3===u||4===u)&&s.stateNode.containerInfo===r)return;s=s.return}for(;null!==a;){if(null===(s=Je(a)))return;if(5===(u=s.tag)||6===u||26===u||27===u){i=o=s;continue e}a=a.parentNode}}i=i.return}Ft(function(){var i=o,r=Ot(n),s=[];e:{var a=Si.get(e);if(void 0!==a){var u=nn,c=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":u=yn;break;case"focusin":c="focus",u=un;break;case"focusout":c="blur",u=un;break;case"beforeblur":case"afterblur":u=un;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=an;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=bn;break;case gi:case vi:case yi:u=cn;break;case ki:u=wn;break;case"scroll":case"scrollend":u=on;break;case"wheel":u=kn;break;case"copy":case"cut":case"paste":u=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=_n;break;case"toggle":case"beforetoggle":u=Sn}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),f=h?null!==a?a+"Capture":null:a;h=[];for(var p,m=i;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Ut(m,f))&&h.push(nh(m,g,p)),d)break;m=m.return}0<h.length&&(a=new u(a,c,null,n,r),s.push({event:a,listeners:h}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Rt||!(c=n.relatedTarget||n.fromElement)||!Je(c)&&!c[He])&&(u||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,u?(u=i,null!==(c=(c=n.relatedTarget||n.toElement)?Je(c):null)&&(d=l(c),h=c.tag,c!==d||5!==h&&27!==h&&6!==h)&&(c=null)):(u=null,c=i),u!==c)){if(h=an,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(h=_n,g="onPointerLeave",f="onPointerEnter",m="pointer"),d=null==u?a:Xe(u),p=null==c?a:Xe(c),(a=new h(g,m+"leave",u,n,r)).target=d,a.relatedTarget=p,g=null,Je(r)===i&&((h=new h(f,m+"enter",c,n,r)).target=p,h.relatedTarget=d,g=h),d=g,u&&c)e:{for(h=rh,m=c,p=0,g=f=u;g;g=h(g))p++;g=0;for(var v=m;v;v=h(v))g++;for(;0<p-g;)f=h(f),p--;for(;0<g-p;)m=h(m),g--;for(;p--;){if(f===m||null!==m&&f===m.alternate){h=f;break e}f=h(f),m=h(m)}h=null}else h=null;null!==u&&oh(s,a,u,h,!1),null!==c&&null!==d&&oh(s,d,c,h,!0)}if("select"===(u=(a=i?Xe(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===u&&"file"===a.type)var y=Vn;else if(Mn(a))if(Bn)y=Yn;else{y=Qn;var _=Gn}else!(u=a.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?i&&It(i.elementType)&&(y=Vn):y=Jn;switch(y&&(y=y(e,i))?Dn(s,y,n,r):(_&&_(e,a,i),"focusout"===e&&i&&"number"===a.type&&null!=i.memoizedProps.value&&bt(a,"number",a.value)),_=i?Xe(i):window,e){case"focusin":(Mn(_)||"true"===_.contentEditable)&&(si=_,ai=i,li=null);break;case"focusout":li=ai=si=null;break;case"mousedown":ui=!0;break;case"contextmenu":case"mouseup":case"dragend":ui=!1,ci(s,n,r);break;case"selectionchange":if(oi)break;case"keydown":case"keyup":ci(s,n,r)}var b;if(xn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Rn?An(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(In&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Rn&&(b=Zt()):(Wt="value"in(qt=r)?qt.value:qt.textContent,Rn=!0)),0<(_=ih(i,w)).length&&(w=new dn(w,e,null,n,r),s.push({event:w,listeners:_}),b?w.data=b:null!==(b=Ln(n))&&(w.data=b))),(b=Cn?function(e,t){switch(e){case"compositionend":return Ln(t);case"keypress":return 32!==t.which?null:(Pn=!0,Nn);case"textInput":return(e=t.data)===Nn&&Pn?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!xn&&An(e,t)?(e=Zt(),Kt=Wt=qt=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=ih(i,"onBeforeInput")).length&&(_=new dn("onBeforeInput","beforeinput",null,n,r),s.push({event:_,listeners:w}),_.data=b)),function(e,t,n,i,r){if("submit"===t&&n&&n.stateNode===r){var o=Hc((r[Be]||null).action),s=i.submitter;s&&null!==(t=(t=s[Be]||null)?Hc(t.formAction):s.getAttribute("formAction"))&&(o=t,s=null);var a=new nn("action","action",null,i,r);e.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(0!==Oc){var e=s?qc(r,s):new FormData(r);ta(n,{pending:!0,data:e,method:r.method,action:o},null,e)}}else"function"===typeof o&&(a.preventDefault(),e=s?qc(r,s):new FormData(r),ta(n,{pending:!0,data:e,method:r.method,action:o},o,e))},currentTarget:r}]})}}(s,e,i,n,r)}Qc(s,t)})}function nh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ih(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===o||(null!=(r=Ut(e,n))&&i.unshift(nh(e,r,o)),null!=(r=Ut(e,t))&&i.push(nh(e,r,o))),3===e.tag)return i;e=e.return}return[]}function rh(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function oh(e,t,n,i,r){for(var o=t._reactName,s=[];null!==n&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(a=a.tag,null!==l&&l===i)break;5!==a&&26!==a&&27!==a||null===u||(l=u,r?null!=(u=Ut(n,o))&&s.unshift(nh(n,u,l)):r||null!=(u=Ut(n,o))&&s.push(nh(n,u,l))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var sh=/\r\n?/g,ah=/\u0000|\uFFFD/g;function lh(e){return("string"===typeof e?e:""+e).replace(sh,"\n").replace(ah,"")}function uh(e,t){return t=lh(t),lh(e)===t}function ch(e,t,n,i,r,o){switch(n){case"children":"string"===typeof i?"body"===t||"textarea"===t&&""===i||Et(e,i):("number"===typeof i||"bigint"===typeof i)&&"body"!==t&&Et(e,""+i);break;case"className":ut(e,"class",i);break;case"tabIndex":ut(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ut(e,n,i);break;case"style":Ct(e,i,o);break;case"data":if("object"!==t){ut(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==i||"function"===typeof i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=At(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"===typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof o&&("formAction"===n?("input"!==t&&ch(e,t,"name",r.name,r,null),ch(e,t,"formEncType",r.formEncType,r,null),ch(e,t,"formMethod",r.formMethod,r,null),ch(e,t,"formTarget",r.formTarget,r,null)):(ch(e,t,"encType",r.encType,r,null),ch(e,t,"method",r.method,r,null),ch(e,t,"target",r.target,r,null))),null==i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=At(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=Lt);break;case"onScroll":null!=i&&Jc("scroll",e);break;case"onScrollEnd":null!=i&&Jc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(s(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(s(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"muted":e.muted=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"===typeof i||"boolean"===typeof i||"symbol"===typeof i){e.removeAttribute("xlink:href");break}n=At(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"===typeof i||"symbol"===typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Jc("beforetoggle",e),Jc("toggle",e),lt(e,"popover",i);break;case"xlinkActuate":ct(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ct(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ct(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ct(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ct(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ct(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ct(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ct(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ct(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":lt(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=Nt.get(n)||n,i)}}function hh(e,t,n,i,r,o){switch(n){case"style":Ct(e,i,o);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(s(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(s(60));e.innerHTML=n}}break;case"children":"string"===typeof i?Et(e,i):("number"===typeof i||"bigint"===typeof i)&&Et(e,""+i);break;case"onScroll":null!=i&&Jc("scroll",e);break;case"onScrollEnd":null!=i&&Jc("scrollend",e);break;case"onClick":null!=i&&(e.onclick=Lt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),"function"===typeof(o=null!=(o=e[Be]||null)?o[n]:null)&&e.removeEventListener(t,o,r),"function"!==typeof i)?n in e?e[n]=i:!0===i?e.setAttribute(n,""):lt(e,n,i):("function"!==typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r)))}}function dh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Jc("error",e),Jc("load",e);var i,r=!1,o=!1;for(i in n)if(n.hasOwnProperty(i)){var a=n[i];if(null!=a)switch(i){case"src":r=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:ch(e,t,i,a,n,null)}}return o&&ch(e,t,"srcSet",n.srcSet,n,null),void(r&&ch(e,t,"src",n.src,n,null));case"input":Jc("invalid",e);var l=i=a=o=null,u=null,c=null;for(r in n)if(n.hasOwnProperty(r)){var h=n[r];if(null!=h)switch(r){case"name":o=h;break;case"type":a=h;break;case"checked":u=h;break;case"defaultChecked":c=h;break;case"value":i=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(s(137,t));break;default:ch(e,t,r,h,n,null)}}return void _t(e,i,l,u,c,a,o,!1);case"select":for(o in Jc("invalid",e),r=a=i=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":i=l;break;case"defaultValue":a=l;break;case"multiple":r=l;default:ch(e,t,o,l,n,null)}return t=i,n=a,e.multiple=!!r,void(null!=t?wt(e,!!r,t,!1):null!=n&&wt(e,!!r,n,!0));case"textarea":for(a in Jc("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":r=l;break;case"defaultValue":o=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(s(91));break;default:ch(e,t,a,l,n,null)}return void St(e,r,o,i);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(r=n[u]))if("selected"===u)e.selected=r&&"function"!==typeof r&&"symbol"!==typeof r;else ch(e,t,u,r,n,null);return;case"dialog":Jc("beforetoggle",e),Jc("toggle",e),Jc("cancel",e),Jc("close",e);break;case"iframe":case"object":Jc("load",e);break;case"video":case"audio":for(r=0;r<Zc.length;r++)Jc(Zc[r],e);break;case"image":Jc("error",e),Jc("load",e);break;case"details":Jc("toggle",e);break;case"embed":case"source":case"link":Jc("error",e),Jc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(r=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:ch(e,t,c,r,n,null)}return;default:if(It(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(r=n[h])&&hh(e,t,h,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(r=n[l])&&ch(e,t,l,r,n,null))}function fh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var ph=null,mh=null;function gh(e){return 9===e.nodeType?e:e.ownerDocument}function vh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function _h(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bh=null;var wh="function"===typeof setTimeout?setTimeout:void 0,kh="function"===typeof clearTimeout?clearTimeout:void 0,Sh="function"===typeof Promise?Promise:void 0,Eh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Sh?function(e){return Sh.resolve(null).then(e).catch(xh)}:wh;function xh(e){setTimeout(function(){throw e})}function Th(e){return"head"===e}function Ch(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)||"/&"===n){if(0===i)return e.removeChild(r),void qd(t);i--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)i++;else if("html"===n)zh(e.ownerDocument.documentElement);else if("head"===n){zh(n=e.ownerDocument.head);for(var o=n.firstChild;o;){var s=o.nextSibling,a=o.nodeName;o[Ge]||"SCRIPT"===a||"STYLE"===a||"LINK"===a&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=s}}else"body"===n&&zh(e.ownerDocument.body);n=r}while(n);qd(t)}function Ih(e,t){var n=e;e=0;do{var i=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=i}while(n)}function Nh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Nh(n),Qe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Ph(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Rh(e.nextSibling)))return null}return e}function Ah(e){return"$?"===e.data||"$~"===e.data}function Lh(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Rh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Oh=null;function Mh(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Rh(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Dh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function jh(e,t,n){switch(t=gh(n),e){case"html":if(!(e=t.documentElement))throw Error(s(452));return e;case"head":if(!(e=t.head))throw Error(s(453));return e;case"body":if(!(e=t.body))throw Error(s(454));return e;default:throw Error(s(451))}}function zh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Qe(e)}var Fh=new Map,Uh=new Set;function Vh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Bh=M.d;M.d={f:function(){var e=Bh.f(),t=$u();return e||t},r:function(e){var t=Ye(e);null!==t&&5===t.tag&&"form"===t.type?ia(t):Bh.r(e)},D:function(e){Bh.D(e),qh("dns-prefetch",e,null)},C:function(e,t){Bh.C(e,t),qh("preconnect",e,t)},L:function(e,t,n){Bh.L(e,t,n);var i=Hh;if(i&&e&&t){var r='link[rel="preload"][as="'+vt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+vt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(r+='[imagesizes="'+vt(n.imageSizes)+'"]')):r+='[href="'+vt(e)+'"]';var o=r;switch(t){case"style":o=Kh(e);break;case"script":o=Qh(e)}Fh.has(o)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Fh.set(o,e),null!==i.querySelector(r)||"style"===t&&i.querySelector(Zh(o))||"script"===t&&i.querySelector(Jh(o))||(dh(t=i.createElement("link"),"link",e),et(t),i.head.appendChild(t)))}},m:function(e,t){Bh.m(e,t);var n=Hh;if(n&&e){var i=t&&"string"===typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+vt(i)+'"][href="'+vt(e)+'"]',o=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Qh(e)}if(!Fh.has(o)&&(e=f({rel:"modulepreload",href:e},t),Fh.set(o,e),null===n.querySelector(r))){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Jh(o)))return}dh(i=n.createElement("link"),"link",e),et(i),n.head.appendChild(i)}}},X:function(e,t){Bh.X(e,t);var n=Hh;if(n&&e){var i=$e(n).hoistableScripts,r=Qh(e),o=i.get(r);o||((o=n.querySelector(Jh(r)))||(e=f({src:e,async:!0},t),(t=Fh.get(r))&&ed(e,t),et(o=n.createElement("script")),dh(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(r,o))}},S:function(e,t,n){Bh.S(e,t,n);var i=Hh;if(i&&e){var r=$e(i).hoistableStyles,o=Kh(e);t=t||"default";var s=r.get(o);if(!s){var a={loading:0,preload:null};if(s=i.querySelector(Zh(o)))a.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Fh.get(o))&&$h(e,n);var l=s=i.createElement("link");et(l),dh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Xh(s,t,i)}s={type:"stylesheet",instance:s,count:1,state:a},r.set(o,s)}}},M:function(e,t){Bh.M(e,t);var n=Hh;if(n&&e){var i=$e(n).hoistableScripts,r=Qh(e),o=i.get(r);o||((o=n.querySelector(Jh(r)))||(e=f({src:e,async:!0,type:"module"},t),(t=Fh.get(r))&&ed(e,t),et(o=n.createElement("script")),dh(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(r,o))}}};var Hh="undefined"===typeof document?null:document;function qh(e,t,n){var i=Hh;if(i&&"string"===typeof t&&t){var r=vt(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"===typeof n&&(r+='[crossorigin="'+n+'"]'),Uh.has(r)||(Uh.add(r),e={rel:e,crossOrigin:n,href:t},null===i.querySelector(r)&&(dh(t=i.createElement("link"),"link",e),et(t),i.head.appendChild(t)))}}function Wh(e,t,n,i){var r,o,a,l,u=(u=K.current)?Vh(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Kh(n.href),(i=(n=$e(u).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Kh(n.href);var c=$e(u).hoistableStyles,h=c.get(e);if(h||(u=u.ownerDocument||u,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,h),(c=u.querySelector(Zh(e)))&&!c._p&&(h.instance=c,h.state.loading=5),Fh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Fh.set(e,n),c||(r=u,o=e,a=n,l=h.state,r.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=r.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),dh(o,"link",a),et(o),r.head.appendChild(o))))),t&&null===i)throw Error(s(528,""));return h}if(t&&null!==i)throw Error(s(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Qh(n),(i=(n=$e(u).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Kh(e){return'href="'+vt(e)+'"'}function Zh(e){return'link[rel="stylesheet"]['+e+"]"}function Gh(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Qh(e){return'[src="'+vt(e)+'"]'}function Jh(e){return"script[async]"+e}function Yh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+vt(n.href)+'"]');if(i)return t.instance=i,et(i),i;var r=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(i=(e.ownerDocument||e).createElement("style")),dh(i,"style",r),Xh(i,n.precedence,e),t.instance=i;case"stylesheet":r=Kh(n.href);var o=e.querySelector(Zh(r));if(o)return t.state.loading|=4,t.instance=o,et(o),o;i=Gh(n),(r=Fh.get(r))&&$h(i,r),et(o=(e.ownerDocument||e).createElement("link"));var a=o;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),dh(o,"link",i),t.state.loading|=4,Xh(o,n.precedence,e),t.instance=o;case"script":return o=Qh(n.src),(r=e.querySelector(Jh(o)))?(t.instance=r,et(r),r):(i=n,(r=Fh.get(o))&&ed(i=f({},n),r),et(r=(e=e.ownerDocument||e).createElement("script")),dh(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(s(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,Xh(i,n.precedence,e));return t.instance}function Xh(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,o=r,s=0;s<i.length;s++){var a=i[s];if(a.dataset.precedence===t)o=a;else if(o!==r)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function $h(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function ed(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var td=null;function nd(e,t,n){if(null===td){var i=new Map,r=td=new Map;r.set(n,i)}else(i=(r=td).get(n))||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var o=n[r];if(!(o[Ge]||o[Ve]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var s=o.getAttribute(t)||"";s=e+s;var a=i.get(s);a?a.push(o):i.set(s,[o])}}return i}function id(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function rd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var od=0;function sd(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)ld(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var ad=null;function ld(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,ad=new Map,t.forEach(ud,e),ad=null,sd.call(e))}function ud(e,t){if(!(4&t.state.loading)){var n=ad.get(e);if(n)var i=n.get(null);else{n=new Map,ad.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<r.length;o++){var s=r[o];"LINK"!==s.nodeName&&"not all"===s.getAttribute("media")||(n.set(s.dataset.precedence,s),i=s)}i&&n.set(null,i)}s=(r=t.instance).getAttribute("data-precedence"),(o=n.get(s)||i)===i&&n.set(null,r),n.set(s,r),this.count++,i=sd.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),o?o.parentNode.insertBefore(r,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var cd={$$typeof:w,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function hd(e,t,n,i,r,o,s,a,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=o,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function dd(e,t,n,i,r,o,s,a,l,u,c,h){return e=new hd(e,t,n,s,l,u,c,h,a),t=1,!0===o&&(t|=24),o=zi(3,null,null,t),e.current=o,o.stateNode=e,(t=Fr()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:i,isDehydrated:n,cache:t},vo(o),e}function fd(e){return e?e=Di:Di}function pd(e,t,n,i,r,o){r=fd(r),null===i.context?i.context=r:i.pendingContext=r,(i=_o(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(i.callback=o),null!==(n=bo(e,i,t))&&(Gu(n,0,t),wo(n,e,t))}function md(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gd(e,t){md(e,t),(e=e.alternate)&&md(e,t)}function vd(e){if(13===e.tag||31===e.tag){var t=Ri(e,67108864);null!==t&&Gu(t,0,67108864),gd(e,67108864)}}function yd(e){if(13===e.tag||31===e.tag){var t=Ku(),n=Ri(e,t=De(t));null!==n&&Gu(n,0,t),gd(e,t)}}var _d=!0;function bd(e,t,n,i){var r=O.T;O.T=null;var o=M.p;try{M.p=2,kd(e,t,n,i)}finally{M.p=o,O.T=r}}function wd(e,t,n,i){var r=O.T;O.T=null;var o=M.p;try{M.p=8,kd(e,t,n,i)}finally{M.p=o,O.T=r}}function kd(e,t,n,i){if(_d){var r=Sd(i);if(null===r)th(e,t,i,Ed,n),Md(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Id=Dd(Id,e,t,n,i,r),!0;case"dragenter":return Nd=Dd(Nd,e,t,n,i,r),!0;case"mouseover":return Pd=Dd(Pd,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return Ad.set(o,Dd(Ad.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Ld.set(o,Dd(Ld.get(o)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Md(e,i),4&t&&-1<Od.indexOf(e)){for(;null!==r;){var o=Ye(r);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var s=Te(o.pendingLanes);if(0!==s){var a=o;for(a.pendingLanes|=2,a.entangledLanes|=2;s;){var l=1<<31-be(s);a.entanglements[1]|=l,s&=~l}Mc(o),0===(6&fu)&&(Ou=le()+500,Dc(0,!1))}}break;case 31:case 13:null!==(a=Ri(o,2))&&Gu(a,0,2),$u(),gd(o,2)}if(null===(o=Sd(i))&&th(e,t,i,Ed,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else th(e,t,i,null,n)}}function Sd(e){return xd(e=Ot(e))}var Ed=null;function xd(e){if(Ed=null,null!==(e=Je(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=u(t)))return e;e=null}else if(31===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ed=e,null}function Td(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case ce:return 2;case he:return 8;case de:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Cd=!1,Id=null,Nd=null,Pd=null,Ad=new Map,Ld=new Map,Rd=[],Od="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Md(e,t){switch(e){case"focusin":case"focusout":Id=null;break;case"dragenter":case"dragleave":Nd=null;break;case"mouseover":case"mouseout":Pd=null;break;case"pointerover":case"pointerout":Ad.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ld.delete(t.pointerId)}}function Dd(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=Ye(t))&&vd(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function jd(e){var t=Je(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=u(n)))return e.blockedOn=t,void Fe(e.priority,function(){yd(n)})}else if(31===t){if(null!==(t=c(n)))return e.blockedOn=t,void Fe(e.priority,function(){yd(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sd(e.nativeEvent);if(null!==n)return null!==(t=Ye(n))&&vd(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);Rt=i,n.target.dispatchEvent(i),Rt=null,t.shift()}return!0}function Fd(e,t,n){zd(e)&&n.delete(t)}function Ud(){Cd=!1,null!==Id&&zd(Id)&&(Id=null),null!==Nd&&zd(Nd)&&(Nd=null),null!==Pd&&zd(Pd)&&(Pd=null),Ad.forEach(Fd),Ld.forEach(Fd)}function Vd(e,t){e.blockedOn===t&&(e.blockedOn=null,Cd||(Cd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ud)))}var Bd=null;function Hd(e){Bd!==e&&(Bd=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Bd===e&&(Bd=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if("function"!==typeof i){if(null===xd(i||n))continue;break}var o=Ye(n);null!==o&&(e.splice(t,3),t-=3,ta(o,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function qd(e){function t(t){return Vd(t,e)}null!==Id&&Vd(Id,e),null!==Nd&&Vd(Nd,e),null!==Pd&&Vd(Pd,e),Ad.forEach(t),Ld.forEach(t);for(var n=0;n<Rd.length;n++){var i=Rd[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Rd.length&&null===(n=Rd[0]).blockedOn;)jd(n),null===n.blockedOn&&Rd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(i=0;i<n.length;i+=3){var r=n[i],o=n[i+1],s=r[Be]||null;if("function"===typeof o)s||Hd(n);else if(s){var a=null;if(o&&o.hasAttribute("formAction")){if(r=o,s=o[Be]||null)a=s.formAction;else if(null!==xd(r))continue}else a=s.action;"function"===typeof a?n[i+1]=a:(n.splice(i,3),i-=3),Hd(n)}}}function Wd(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return r=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==r&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var i=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==r&&(r(),r=null)}}}function Kd(e){this._internalRoot=e}function Zd(e){this._internalRoot=e}Zd.prototype.render=Kd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));pd(t.current,Ku(),e,t,null,null)},Zd.prototype.unmount=Kd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;pd(e.current,2,null,e,null,null),$u(),t[He]=null}},Zd.prototype.unstable_scheduleHydration=function(e){if(e){var t=ze();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rd.length&&0!==t&&t<Rd[n].priority;n++);Rd.splice(n,0,e),0===n&&jd(e)}};var Gd=r.version;if("19.2.4"!==Gd)throw Error(s(527,Gd,"19.2.4"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return h(r),e;if(o===i)return h(r),t;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Qd={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.4"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jd.isDisabled&&Jd.supportsFiber)try{ve=Jd.inject(Qd),ye=Jd}catch(Xd){}}t.createRoot=function(e,t){if(!a(e))throw Error(s(299));var n=!1,i="",r=Ea,o=xa,l=Ta;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(r=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=dd(e,1,!1,null,0,n,i,null,r,o,l,Wd),e[He]=t.current,$c(e),new Kd(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(s(299));var i=!1,r="",o=Ea,l=xa,u=Ta,c=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(u=n.onRecoverableError),void 0!==n.formState&&(c=n.formState)),(t=dd(e,1,!0,t,0,i,r,c,o,l,u,Wd)).context=fd(null),n=t.current,(r=_o(i=De(i=Ku()))).callback=null,bo(n,r,i),n=i,t.current.lanes=n,Le(t,n),Mc(t),e[He]=t.current,$c(e),new Zd(t)},t.version="19.2.4"},672(e,t,n){"use strict";var i=n(43);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var s={d:{f:o,r:function(){throw Error(r(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(r(299));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=s.p;try{if(l.T=null,s.p=2,e)return e()}finally{l.T=t,s.p=n,s.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,s.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&s.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,i=u(n,t.crossOrigin),r="string"===typeof t.integrity?t.integrity:void 0,o="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?s.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:o}):"script"===n&&s.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:o,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=u(t.as,t.crossOrigin);s.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&s.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,i=u(n,t.crossOrigin);s.d.L(e,n,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=u(t.as,t.crossOrigin);s.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else s.d.m(e)},t.requestFormReset=function(e){s.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.4"},391(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},950(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},799(e,t){"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function r(e,t,i){var r=null;if(void 0!==i&&(r=""+i),void 0!==t.key&&(r=""+t.key),"key"in t)for(var o in i={},t)"key"!==o&&(i[o]=t[o]);else i=t;return t=i.ref,{$$typeof:n,type:e,key:r,ref:void 0!==t?t:null,props:i}}t.Fragment=i,t.jsx=r,t.jsxs=r},288(e,t){"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}function _(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=y.prototype;var w=b.prototype=new _;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var k=Array.isArray;function S(){}var E={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function T(e,t,i){var r=i.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:i}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,r,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,u,c=!1;if(null===e)c=!0;else switch(a){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case i:c=!0;break;case d:return P((c=e._init)(e._payload),t,r,o,s)}}if(c)return s=s(e),c=""===o?"."+N(e,0):o,k(s)?(r="",null!=c&&(r=c.replace(I,"$&/")+"/"),P(s,t,r,"",function(e){return e})):null!=s&&(C(s)&&(l=s,u=r+(null==s.key||e&&e.key===s.key?"":(""+s.key).replace(I,"$&/")+"/")+c,s=T(l.type,u,l.props)),t.push(s)),1;c=0;var h,f=""===o?".":o+":";if(k(e))for(var m=0;m<e.length;m++)c+=P(o=e[m],t,r,a=f+N(o,m),s);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=p&&h[p]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(o=e.next()).done;)c+=P(o=o.value,t,r,a=f+N(o,m++),s);else if("object"===a){if("function"===typeof e.then)return P(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(S,S):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,r,o,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function A(e,t,n){if(null==e)return e;var i=[],r=0;return P(e,i,"","",function(e){return t.call(n,e,r++)}),i}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},O={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=O,t.Component=y,t.Fragment=r,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return E.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var i=g({},e.props),r=e.key;if(null!=t)for(o in void 0!==t.key&&(r=""+t.key),t)!x.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(i[o]=t[o]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var s=Array(o),a=0;a<o;a++)s[a]=arguments[a+2];i.children=s}return T(e.type,r,i)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var i,r={},o=null;if(null!=t)for(i in void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(r[i]=t[i]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+2];r.children=a}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===r[i]&&(r[i]=s[i]);return T(e,o,r)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=E.T,n={};E.T=n;try{var i=e(),r=E.S;null!==r&&r(n,i),"object"===typeof i&&null!==i&&"function"===typeof i.then&&i.then(S,R)}catch(o){R(o)}finally{null!==t&&null!==n.types&&(t.types=n.types),E.T=t}},t.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},t.use=function(e){return E.H.use(e)},t.useActionState=function(e,t,n){return E.H.useActionState(e,t,n)},t.useCallback=function(e,t){return E.H.useCallback(e,t)},t.useContext=function(e){return E.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return E.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return E.H.useEffect(e,t)},t.useEffectEvent=function(e){return E.H.useEffectEvent(e)},t.useId=function(){return E.H.useId()},t.useImperativeHandle=function(e,t,n){return E.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return E.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return E.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return E.H.useMemo(e,t)},t.useOptimistic=function(e,t){return E.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return E.H.useReducer(e,t,n)},t.useRef=function(e){return E.H.useRef(e)},t.useState=function(e){return E.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return E.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return E.H.useTransition()},t.version="19.2.4"},43(e,t,n){"use strict";e.exports=n(288)},579(e,t,n){"use strict";e.exports=n(799)},896(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<o(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,s=r>>>1;i<s;){var a=2*(i+1)-1,l=e[a],u=a+1,c=e[u];if(0>o(l,n))u<r&&0>o(c,l)?(e[i]=c,e[u]=n,i=u):(e[i]=l,e[a]=n,i=a);else{if(!(u<r&&0>o(c,n)))break e;e[i]=c,e[u]=n,i=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,n(u,t)}t=i(c)}}function k(e){if(g=!1,w(e),!m)if(null!==i(u))m=!0,E||(E=!0,S());else{var t=i(c);null!==t&&L(k,t.startTime-e)}}var S,E=!1,x=-1,T=5,C=-1;function I(){return!!v||!(t.unstable_now()-C<T)}function N(){if(v=!1,E){var e=t.unstable_now();C=e;var n=!0;try{e:{m=!1,g&&(g=!1,_(x),x=-1),p=!0;var o=f;try{t:{for(w(e),d=i(u);null!==d&&!(d.expirationTime>e&&I());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){d.callback=a,w(e),n=!0;break t}d===i(u)&&r(u),w(e)}else r(u);d=i(u)}if(null!==d)n=!0;else{var l=i(c);null!==l&&L(k,l.startTime-e),n=!1}}break e}finally{d=null,f=o,p=!1}n=void 0}}finally{n?S():E=!1}}}if("function"===typeof b)S=function(){b(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=N,S=function(){A.postMessage(null)}}else S=function(){y(N,0)};function L(e,n){x=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(c,e),null===i(u)&&e===i(c)&&(g?(_(x),x=-1):g=!0,L(k,o-s))):(e.sortIndex=a,n(u,e),m||p||(m=!0,E||(E=!0,S()))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853(e,t,n){"use strict";e.exports=n(896)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&i;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>s[e]=()=>i[e]);return s.default=()=>i,n.d(o,s),o}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/lile/",(()=>{"use strict";var e=n(43),t=n.t(e,2),i=n(391);function r(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function a(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const c=["sri"],h=["page"],d=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","unstable_mask","state","target","to","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"],p=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],m=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition","unstable_defaultShouldRevalidate"];var g="popstate";function v(e){return"object"===typeof e&&null!=e&&"pathname"in e&&"search"in e&&"hash"in e&&"state"in e&&"key"in e}function y(){return x(function(e,t){var n;let i=null===(n=t.state)||void 0===n?void 0:n.masked,{pathname:r,search:o,hash:s}=i||e.location;return k("",{pathname:r,search:o,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default",i?{pathname:e.location.pathname,search:e.location.search,hash:e.location.hash}:void 0)},function(e,t){return"string"===typeof t?t:S(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function _(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function b(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function w(e,t){return{usr:e.state,key:e.key,idx:t,masked:e.unstable_mask?{pathname:e.pathname,search:e.search,hash:e.hash}:void 0}}function k(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return u(u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?E(t):t),{},{state:n,key:t&&t.key||i||Math.random().toString(36).substring(2,10),unstable_mask:r})}function S(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function E(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function x(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:r=document.defaultView,v5Compat:o=!1}=i,s=r.history,a="POP",l=null,c=h();function h(){return(s.state||{idx:null}).idx}function d(){a="POP";let e=h(),t=null==e?null:e-c;c=e,l&&l({action:a,location:p.location,delta:t})}function f(e){return T(e)}null==c&&(c=0,s.replaceState(u(u({},s.state),{},{idx:c}),""));let p={get action(){return a},get location(){return e(r,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(g,d),l=e,()=>{r.removeEventListener(g,d),l=null}},createHref:e=>t(r,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a="PUSH";let i=v(e)?e:k(p.location,e,t);n&&n(i,e),c=h()+1;let u=w(i,c),d=p.createHref(i.unstable_mask||i);try{s.pushState(u,"",d)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;r.location.assign(d)}o&&l&&l({action:a,location:p.location,delta:1})},replace:function(e,t){a="REPLACE";let i=v(e)?e:k(p.location,e,t);n&&n(i,e),c=h();let r=w(i,c),u=p.createHref(i.unstable_mask||i);s.replaceState(r,"",u),o&&l&&l({action:a,location:p.location,delta:0})},go:e=>s.go(e)};return p}function T(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),_(n,"No window.location.(origin|href) available to create URL");let i="string"===typeof e?e:S(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}new WeakMap;function C(e,t){return I(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function I(e,t,n,i){let r=H(("string"===typeof t?E(t):t).pathname||"/",n);if(null==r)return null;let o=N(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=B(r);s=F(o[a],e,i)}return s}function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=function(e,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,a=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(i)&&s)return;_(l.relativePath.startsWith(i),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(i,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(i.length)}let u=J([i,l.relativePath]),c=n.concat(l);e.children&&e.children.length>0&&(_(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(u,'".')),N(e.children,t,c,u,s)),(null!=e.path||e.index)&&t.push({path:u,score:z(u,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let i of P(e.path))o(e,t,!0,i);else o(e,t)}),t}function P(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===i.length)return r?[o,""]:[o];let s=P(i.join("/")),a=[];return a.push(...s.map(e=>""===e?o:[o,e].join("/"))),r&&a.push(...s),a.map(t=>e.startsWith("/")&&""===t?"/":t)}var A=/^:[\w-]+$/,L=3,R=2,O=1,M=10,D=-2,j=e=>"*"===e;function z(e,t){let n=e.split("/"),i=n.length;return n.some(j)&&(i+=D),t&&(i+=R),n.filter(e=>!j(e)).reduce((e,t)=>e+(A.test(t)?L:""===t?O:M),i)}function F(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:i}=e,r={},o="/",s=[];for(let a=0;a<i.length;++a){let e=i[a],l=a===i.length-1,u="/"===o?t:t.slice(o.length)||"/",c=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),h=e.route;if(!c&&l&&n&&!i[i.length-1].route.index&&(c=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(r,c.params),s.push({params:r,pathname:J([o,c.pathname]),pathnameBase:Y(J([o,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(o=J([o,c.pathnameBase]))}return s}function U(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=V(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let o=r[0],s=o.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:s,pattern:e}}function V(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n,r,o)=>{if(i.push({paramName:t,isOptional:null!=n}),n){let t=o.charAt(r+e.length);return t&&"/"!==t?"/([^\\/]*)":"(?:/([^\\/]*))?"}return"/([^\\/]+)"}).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function B(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return b(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function H(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}var q=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function W(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}function K(e,t,n,i){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(i),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function Z(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function G(e){let t=Z(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Q(e,t,n){let i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?i=E(e):(i=u({},e),_(!i.pathname||!i.pathname.includes("?"),K("?","pathname","search",i)),_(!i.pathname||!i.pathname.includes("#"),K("#","pathname","hash",i)),_(!i.search||!i.search.includes("#"),K("#","search","hash",i)));let o,s=""===e||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:i,search:r="",hash:o=""}="string"===typeof e?E(e):e;return i?(i=i.replace(/\/\/+/g,"/"),t=i.startsWith("/")?W(i.substring(1),"/"):W(i,n)):t=n,{pathname:t,search:X(r),hash:$(o)}}(i,o),c=a&&"/"!==a&&a.endsWith("/"),h=(s||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!h||(l.pathname+="/"),l}var J=e=>e.join("/").replace(/\/\/+/g,"/"),Y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",$=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var ee=class{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.status=e,this.statusText=t||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function te(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function ne(e){return e.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ie="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function re(e,t){let n=e;if("string"!==typeof n||!q.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,r=!1;if(ie)try{let e=new URL(window.location.href),i=n.startsWith("//")?new URL(e.protocol+n):new URL(n),o=H(i.pathname,t);i.origin===e.origin&&null!=o?n=o+i.search+i.hash:r=!0}catch(o){b(!1,'<Link to="'.concat(n,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}return{absoluteURL:i,isExternal:r,to:n}}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oe=["POST","PUT","PATCH","DELETE"],se=(new Set(oe),["GET",...oe]);new Set(se),Symbol("ResetLoaderData");var ae=e.createContext(null);ae.displayName="DataRouter";var le=e.createContext(null);le.displayName="DataRouterState";var ue=e.createContext(!1);function ce(){return e.useContext(ue)}var he=e.createContext({isTransitioning:!1});he.displayName="ViewTransition";var de=e.createContext(new Map);de.displayName="Fetchers";var fe=e.createContext(null);fe.displayName="Await";var pe=e.createContext(null);pe.displayName="Navigation";var me=e.createContext(null);me.displayName="Location";var ge=e.createContext({outlet:null,matches:[],isDataRoute:!1});ge.displayName="Route";var ve=e.createContext(null);ve.displayName="RouteError";var ye="REACT_ROUTER_ERROR";function _e(){return null!=e.useContext(me)}function be(){return _(_e(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(me).location}var we="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ke(t){e.useContext(pe).static||e.useLayoutEffect(t)}function Se(){let{isDataRoute:t}=e.useContext(ge);return t?function(){let{router:t}=Me("useNavigate"),n=je("useNavigate"),i=e.useRef(!1);ke(()=>{i.current=!0});let r=e.useCallback(async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(i.current,we),i.current&&("number"===typeof e?await t.navigate(e):await t.navigate(e,u({fromRouteId:n},r)))},[t,n]);return r}():function(){_(_e(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext(ae),{basename:n,navigator:i}=e.useContext(pe),{matches:r}=e.useContext(ge),{pathname:o}=be(),s=JSON.stringify(G(r)),a=e.useRef(!1);ke(()=>{a.current=!0});let l=e.useCallback(function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(a.current,we),!a.current)return;if("number"===typeof e)return void i.go(e);let l=Q(e,JSON.parse(s),o,"path"===r.relative);null==t&&"/"!==n&&(l.pathname="/"===l.pathname?n:J([n,l.pathname])),(r.replace?i.replace:i.push)(l,r.state,r)},[n,i,s,o,t]);return l}()}var Ee=e.createContext(null);function xe(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:i}=e.useContext(ge),{pathname:r}=be(),o=JSON.stringify(G(i));return e.useMemo(()=>Q(t,JSON.parse(o),r,"path"===n),[t,o,r,n])}function Te(t,n,i){_(_e(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=e.useContext(pe),{matches:o}=e.useContext(ge),s=o[o.length-1],a=s?s.params:{},l=s?s.pathname:"/",c=s?s.pathnameBase:"/",h=s&&s.route;{let e=h&&h.path||"";Ue(l,!h||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(l,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let d,f=be();if(n){var p;let e="string"===typeof n?E(n):n;_("/"===c||(null===(p=e.pathname)||void 0===p?void 0:p.startsWith(c)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(c,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),d=e}else d=f;let m=d.pathname||"/",g=m;if("/"!==c){let e=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=C(t,{pathname:g});b(h||null!=v,'No routes matched location "'.concat(d.pathname).concat(d.search).concat(d.hash,'" ')),b(null==v||void 0!==v[v.length-1].route.element||void 0!==v[v.length-1].route.Component||void 0!==v[v.length-1].route.lazy,'Matched leaf route at location "'.concat(d.pathname).concat(d.search).concat(d.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let y=Re(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},a,e.params),pathname:J([c,r.encodeLocation?r.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:J([c,r.encodeLocation?r.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,i);return n&&y?e.createElement(me.Provider,{value:{location:u({pathname:"/",search:"",hash:"",state:null,key:"default",unstable_mask:void 0},d),navigationType:"POP"}},y):y}function Ce(){let t=ze(),n=te(t)?"".concat(t.status," ").concat(t.statusText):t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=e.createElement(e.Fragment,null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:s},"ErrorBoundary")," or"," ",e.createElement("code",{style:s},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),i?e.createElement("pre",{style:o},i):null,a)}var Ie=e.createElement(Ce,null),Ne=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let t=this.state.error;if(this.context&&"object"===typeof t&&t&&"digest"in t&&"string"===typeof t.digest){const e=function(e){if(e.startsWith("".concat(ye,":").concat("ROUTE_ERROR_RESPONSE",":{")))try{let t=JSON.parse(e.slice(40));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText)return new ee(t.status,t.statusText,t.data)}catch(t){}}(t.digest);e&&(t=e)}let n=void 0!==t?e.createElement(ge.Provider,{value:this.props.routeContext},e.createElement(ve.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?e.createElement(Ae,{error:t},n):n}};Ne.contextType=ue;var Pe=new WeakMap;function Ae(t){let{children:n,error:i}=t,{basename:r}=e.useContext(pe);if("object"===typeof i&&i&&"digest"in i&&"string"===typeof i.digest){let t=function(e){if(e.startsWith("".concat(ye,":").concat("REDIRECT",":{")))try{let t=JSON.parse(e.slice(28));if("object"===typeof t&&t&&"number"===typeof t.status&&"string"===typeof t.statusText&&"string"===typeof t.location&&"boolean"===typeof t.reloadDocument&&"boolean"===typeof t.replace)return t}catch(t){}}(i.digest);if(t){let n=Pe.get(i);if(n)throw n;let o=re(t.location,r);if(ie&&!Pe.get(i)){if(!o.isExternal&&!t.reloadDocument){const e=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:t.replace}));throw Pe.set(i,e),e}window.location.href=o.absoluteURL||o.to}return e.createElement("meta",{httpEquiv:"refresh",content:"0;url=".concat(o.absoluteURL||o.to)})}}return n}function Le(t){let{routeContext:n,match:i,children:r}=t,o=e.useContext(ae);return o&&o.static&&o.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=i.route.id),e.createElement(ge.Provider,{value:n},r)}function Re(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,r=null===i||void 0===i?void 0:i.state;if(null==t){if(!r)return null;if(r.errors)t=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;t=r.matches}}let o=t,s=null===r||void 0===r?void 0:r.errors;if(null!=s){let e=o.findIndex(e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id]));_(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),o=o.slice(0,Math.min(o.length,e+1))}let a=!1,l=-1;if(i&&r){a=r.renderFallback;for(let e=0;e<o.length;e++){let t=o[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:n}=r,s=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!n||void 0===n[t.route.id]);if(t.route.lazy||s){i.isStatic&&(a=!0),o=l>=0?o.slice(0,l+1):[o[0]];break}}}}let u=null===i||void 0===i?void 0:i.onError,c=r&&u?(e,t)=>{var n,i;u(e,{location:r.location,params:null!==(n=null===(i=r.matches)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.params)&&void 0!==n?n:{},unstable_pattern:ne(r.matches),errorInfo:t})}:void 0;return o.reduceRight((t,i,u)=>{let h,d=!1,f=null,p=null;r&&(h=s&&i.route.id?s[i.route.id]:void 0,f=i.route.errorElement||Ie,a&&(l<0&&0===u?(Ue("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):l===u&&(d=!0,p=i.route.hydrateFallbackElement||null)));let m=n.concat(o.slice(0,u+1)),g=()=>{let n;return n=h?f:d?p:i.route.Component?e.createElement(i.route.Component,null):i.route.element?i.route.element:t,e.createElement(Le,{match:i,routeContext:{outlet:t,matches:m,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===u)?e.createElement(Ne,{location:r.location,revalidation:r.revalidation,component:f,error:h,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:c}):g()},null)}function Oe(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Me(t){let n=e.useContext(ae);return _(n,Oe(t)),n}function De(t){let n=e.useContext(le);return _(n,Oe(t)),n}function je(t){let n=function(t){let n=e.useContext(ge);return _(n,Oe(t)),n}(t),i=n.matches[n.matches.length-1];return _(i.route.id,"".concat(t,' can only be used on routes that contain a unique "id"')),i.route.id}function ze(){var t;let n=e.useContext(ve),i=De("useRouteError"),r=je("useRouteError");return void 0!==n?n:null===(t=i.errors)||void 0===t?void 0:t[r]}var Fe={};function Ue(e,t,n){t||Fe[e]||(Fe[e]=!0,b(!1,n))}var Ve={};function Be(e,t){e||Ve[t]||(Ve[t]=!0,console.warn(t))}t.useOptimistic;e.memo(He);function He(e){let{routes:t,future:n,state:i,isStatic:r,onError:o}=e;return Te(t,void 0,{state:i,isStatic:r,onError:o,future:n})}function qe(t){let{to:n,replace:i,state:r,relative:o}=t;_(_e(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=e.useContext(pe);b(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=e.useContext(ge),{pathname:l}=be(),u=Se(),c=Q(n,G(a),l,"path"===o),h=JSON.stringify(c);return e.useEffect(()=>{u(JSON.parse(h),{replace:i,state:r,relative:o})},[u,h,o,i,r]),null}function We(t){return function(t){let n=e.useContext(ge).outlet;return e.useMemo(()=>n&&e.createElement(Ee.Provider,{value:t},n),[n,t])}(t.context)}function Ke(e){_(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ze(t){let{basename:n="/",children:i=null,location:r,navigationType:o="POP",navigator:s,static:a=!1,unstable_useTransitions:l}=t;_(!_e(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),c=e.useMemo(()=>({basename:u,navigator:s,static:a,unstable_useTransitions:l,future:{}}),[u,s,a,l]);"string"===typeof r&&(r=E(r));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:m="default",unstable_mask:g}=r,v=e.useMemo(()=>{let e=H(h,u);return null==e?null:{location:{pathname:e,search:d,hash:f,state:p,key:m,unstable_mask:g},navigationType:o}},[u,h,d,f,p,m,o,g]);return b(null!=v,'<Router basename="'.concat(u,'"> is not able to match the URL "').concat(h).concat(d).concat(f,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==v?null:e.createElement(pe.Provider,{value:c},e.createElement(me.Provider,{children:i,value:v}))}function Ge(e){let{children:t,location:n}=e;return Te(Qe(t),n)}e.Component;function Qe(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];return e.Children.forEach(t,(t,r)=>{if(!e.isValidElement(t))return;let o=[...n,r];if(t.type===e.Fragment)return void i.push.apply(i,Qe(t.props.children,o));_(t.type===Ke,"[".concat("string"===typeof t.type?t.type:t.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),_(!t.props.index||!t.props.children,"An index route cannot have child routes.");let s={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,middleware:t.props.middleware,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(s.children=Qe(t.props.children,o)),i.push(s)}),i}var Je="get",Ye="application/x-www-form-urlencoded";function Xe(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var $e=null;var et=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tt(e){return null==e||et.has(e)?e:(b(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Ye,'"')),null)}function nt(e,t){let n,i,r,o,s;if(Xe(a=e)&&"form"===a.tagName.toLowerCase()){let s=e.getAttribute("action");i=s?H(s,t):null,n=e.getAttribute("method")||Je,r=tt(e.getAttribute("enctype"))||Ye,o=new FormData(e)}else if(function(e){return Xe(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Xe(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||s.getAttribute("action");if(i=a?H(a,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||Je,r=tt(e.getAttribute("formenctype"))||tt(s.getAttribute("enctype"))||Ye,o=new FormData(s,e),!function(){if(null===$e)try{new FormData(document.createElement("form"),0),$e=!1}catch(e){$e=!0}return $e}()){let{name:t,type:n,value:i}=e;if("image"===n){let e=t?"".concat(t,"."):"";o.append("".concat(e,"x"),"0"),o.append("".concat(e,"y"),"0")}else t&&o.append(t,i)}}else{if(Xe(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Je,i=null,r=Ye,s=e}var a;return o&&"text/plain"===r&&(s=o,o=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:o,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function it(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function rt(e,t,n,i){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return n?r.pathname.endsWith("/")?r.pathname="".concat(r.pathname,"_.").concat(i):r.pathname="".concat(r.pathname,".").concat(i):"/"===r.pathname?r.pathname="_root.".concat(i):t&&"/"===H(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(i):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(i),r}async function ot(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function st(e){return null!=e&&"string"===typeof e.page}function at(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function lt(e,t,n,i,r,o){let s=(e,t)=>!n[t]||e.route.id!==n[t].route.id,a=(e,t)=>{var i;return n[t].pathname!==e.pathname||(null===(i=n[t].route.path)||void 0===i?void 0:i.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===o?t.filter((e,t)=>s(e,t)||a(e,t)):"data"===o?t.filter((t,o)=>{let l=i.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(s(t,o)||a(t,o))return!0;if(t.route.shouldRevalidate){var u;let i=t.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:(null===(u=n[0])||void 0===u?void 0:u.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof i)return i}return!0}):[]}function ut(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=e.map(e=>{let i=t.routes[e.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1),[...new Set(i)];var i}function ct(e,t){let n=new Set,i=new Set(t);return e.reduce((e,r)=>{if(t&&!st(r)&&"script"===r.as&&r.href&&i.has(r.href))return e;let o=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}(r));return n.has(o)||(n.add(o),e.push({key:o,link:r})),e},[])}function ht(e,t){return"lazy"===e.mode&&!0===t}function dt(){let t=e.useContext(ae);return it(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ft(){let t=e.useContext(le);return it(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var pt=e.createContext(void 0);function mt(){let t=e.useContext(pt);return it(t,"You must render this element inside a <HydratedRouter> element"),t}function gt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function vt(e,t,n){if(n&&!wt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}pt.displayName="FrameworkContext";function yt(t){let{page:n}=t,i=r(t,h),{router:o}=dt(),s=e.useMemo(()=>C(o.routes,n,o.basename),[o.routes,n,o.basename]);return s?e.createElement(bt,u({page:n,matches:s},i)):null}function _t(t){let{manifest:n,routeModules:i}=mt(),[r,o]=e.useState([]);return e.useEffect(()=>{let e=!1;return async function(e,t,n){return ct((await Promise.all(e.map(async e=>{let i=t.routes[e.route.id];if(i){let e=await ot(i,n);return e.links?e.links():[]}return[]}))).flat(1).filter(at).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?u(u({},e),{},{rel:"prefetch",as:"style"}):u(u({},e),{},{rel:"prefetch"})))}(t,n,i).then(t=>{e||o(t)}),()=>{e=!0}},[t,n,i]),r}function bt(t){let{page:n,matches:i}=t,o=r(t,d),s=be(),{future:a,manifest:l,routeModules:c}=mt(),{basename:h}=dt(),{loaderData:f,matches:p}=ft(),m=e.useMemo(()=>lt(n,i,p,l,s,"data"),[n,i,p,l,s]),g=e.useMemo(()=>lt(n,i,p,l,s,"assets"),[n,i,p,l,s]),v=e.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let e=new Set,t=!1;if(i.forEach(n=>{var i;let r=l.routes[n.route.id];r&&r.hasLoader&&(!m.some(e=>e.route.id===n.route.id)&&n.route.id in f&&null!==(i=c[n.route.id])&&void 0!==i&&i.shouldRevalidate||r.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let r=rt(n,h,a.unstable_trailingSlashAwareDataRequests,"data");return t&&e.size>0&&r.searchParams.set("_routes",i.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[r.pathname+r.search]},[h,a.unstable_trailingSlashAwareDataRequests,f,s,l,m,i,n,c]),y=e.useMemo(()=>ut(g,l),[g,l]),_=_t(g);return e.createElement(e.Fragment,null,v.map(t=>e.createElement("link",u({key:t,rel:"prefetch",as:"fetch",href:t},o))),y.map(t=>e.createElement("link",u({key:t,rel:"modulepreload",href:t},o))),_.map(t=>{var n;let{key:i,link:r}=t;return e.createElement("link",u(u({key:i,nonce:o.nonce},r),{},{crossOrigin:null!==(n=r.crossOrigin)&&void 0!==n?n:o.crossOrigin}))}))}var wt=!1;function kt(t){let{manifest:n,serverHandoffString:i,isSpaMode:o,renderMeta:s,routeDiscovery:a,ssr:l}=mt(),{router:h,static:d,staticContext:f}=dt(),{matches:p}=ft(),m=ce(),g=ht(a,l);s&&(s.didRenderScripts=!0);let v=vt(p,null,o);e.useEffect(()=>{0},[]);let y=e.useMemo(()=>{var o;if(m)return null;let s=f?"window.__reactRouterContext = ".concat(i,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",a=d?"".concat(null!==n.hmr&&void 0!==o&&o.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(v.map((e,t)=>{let i="route".concat(t),r=n.routes[e.route.id];it(r,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:o,clientLoaderModule:s,clientMiddlewareModule:a,hydrateFallbackModule:l,module:u}=r,c=[...o?[{module:o,varName:"".concat(i,"_clientAction")}]:[],...s?[{module:s,varName:"".concat(i,"_clientLoader")}]:[],...a?[{module:a,varName:"".concat(i,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(i,"_HydrateFallback")}]:[],{module:u,varName:"".concat(i,"_main")}];return 1===c.length?"import * as ".concat(i," from ").concat(JSON.stringify(u),";"):[c.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(i," = {").concat(c.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,i=r(e,c),o=new Set(t.state.matches.map(e=>e.route.id)),s=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(s.pop();s.length>0;)a.push("/".concat(s.join("/"))),s.pop();a.forEach(e=>{let n=C(t.routes,e,t.basename);n&&n.forEach(e=>o.add(e.route.id))});let l=[...o].reduce((e,t)=>Object.assign(e,{[t]:i.routes[t]}),{});return u(u({},i),{},{routes:l,sri:!!n||void 0})}(n,h),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(v.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return e.createElement(e.Fragment,null,e.createElement("script",u(u({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:void 0})),e.createElement("script",u(u({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:a},type:"module",async:!0})))},[]),_=wt||m?[]:(n.entry.imports.concat(ut(v,n,{includeHydrateFallback:!0})),[...new Set(b)]);var b;let w="object"===typeof n.sri?n.sri:{};return Be(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),wt||m?null:e.createElement(e.Fragment,null,"object"===typeof n.sri?e.createElement("script",u(u({},t),{},{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}})):null,g?null:e.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:t.crossOrigin,integrity:w[n.url],suppressHydrationWarning:!0}),e.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:t.crossOrigin,integrity:w[n.entry.module],suppressHydrationWarning:!0}),_.map(n=>e.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:t.crossOrigin,integrity:w[n],suppressHydrationWarning:!0})),y)}function St(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}e.Component;function Et(t){let{error:n,isOutsideRemixApp:i}=t;console.error(n);let r,o=e.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(te(n))return e.createElement(xt,{title:"Unhandled Thrown Response!"},e.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),o);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return e.createElement(xt,{title:"Application Error!",isOutsideRemixApp:i},e.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),e.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),o)}function xt(t){var n;let{title:i,renderScripts:r,isOutsideRemixApp:o,children:s}=t,{routeModules:a}=mt();return null!==a.root&&void 0!==n&&n.Layout&&!o?s:e.createElement("html",{lang:"en"},e.createElement("head",null,e.createElement("meta",{charSet:"utf-8"}),e.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),e.createElement("title",null,i)),e.createElement("body",null,e.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},s,r?e.createElement(kt,null):null)))}var Tt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{Tt&&(window.__reactRouterVersion="7.13.1")}catch(xy){}function Ct(t){let{basename:n,children:i,unstable_useTransitions:r,window:o}=t,s=e.useRef();null==s.current&&(s.current=y({window:o,v5Compat:!0}));let a=s.current,[l,u]=e.useState({action:a.action,location:a.location}),c=e.useCallback(t=>{!1===r?u(t):e.startTransition(()=>u(t))},[r]);return e.useLayoutEffect(()=>a.listen(c),[a,c]),e.createElement(Ze,{basename:n,children:i,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:r})}var It=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nt=e.forwardRef(function(t,n){let{onClick:i,discover:o="render",prefetch:s="none",relative:a,reloadDocument:l,replace:c,unstable_mask:h,state:d,target:p,to:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:y}=t,b=r(t,f),{basename:w,navigator:k,unstable_useTransitions:E}=e.useContext(pe),x="string"===typeof m&&It.test(m),T=re(m,w);m=T.to;let C=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_(_e(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:r}=e.useContext(pe),{hash:o,pathname:s,search:a}=xe(t,{relative:n}),l=s;return"/"!==i&&(l="/"===s?i:J([i,s])),r.createHref({pathname:l,search:a,hash:o})}(m,{relative:a}),I=be(),N=null;if(h){let e=Q(h,[],I.unstable_mask?I.unstable_mask.pathname:"/",!0);"/"!==w&&(e.pathname="/"===e.pathname?w:J([w,e.pathname])),N=k.createHref(e)}let[P,A,L]=function(t,n){let i=e.useContext(pt),[r,o]=e.useState(!1),[s,a]=e.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:d}=n,f=e.useRef(null);e.useEffect(()=>{if("render"===t&&a(!0),"viewport"===t){let e=new IntersectionObserver(e=>{e.forEach(e=>{a(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[t]),e.useEffect(()=>{if(r){let e=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{o(!0)},m=()=>{o(!1),a(!1)};return i?"intent"!==t?[s,f,{}]:[s,f,{onFocus:gt(l,p),onBlur:gt(u,m),onMouseEnter:gt(c,p),onMouseLeave:gt(h,m),onTouchStart:gt(d,p)}]:[!1,f,{}]}(s,b),R=function(t){let{target:n,replace:i,unstable_mask:r,state:o,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=Se(),d=be(),f=xe(t,{relative:a});return e.useCallback(p=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(p,n)){p.preventDefault();let n=void 0!==i?i:S(d)===S(f),m=()=>h(t,{replace:n,unstable_mask:r,state:o,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:u});c?e.startTransition(()=>m()):m()}},[d,h,f,i,r,o,n,t,s,a,l,u,c])}(m,{replace:c,unstable_mask:h,state:d,target:p,preventScrollReset:g,relative:a,viewTransition:v,unstable_defaultShouldRevalidate:y,unstable_useTransitions:E});let O=!(T.isExternal||l),M=e.createElement("a",u(u(u({},b),L),{},{href:(O?N:void 0)||T.absoluteURL||C,onClick:O?function(e){i&&i(e),e.defaultPrevented||R(e)}:i,ref:St(n,A),target:p,"data-discover":x||"render"!==o?void 0:"true"}));return P&&!x?e.createElement(e.Fragment,null,M,e.createElement(yt,{page:C})):M});Nt.displayName="Link";var Pt=e.forwardRef(function(t,n){let{"aria-current":i="page",caseSensitive:o=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:h,children:d}=t,f=r(t,p),m=xe(c,{relative:f.relative}),g=be(),v=e.useContext(le),{navigator:y,basename:b}=e.useContext(pe),w=null!=v&&function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.useContext(he);_(null!=i,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Rt("useViewTransitionState"),o=xe(t,{relative:n});if(!i.isTransitioning)return!1;let s=H(i.currentLocation.pathname,r)||i.currentLocation.pathname,a=H(i.nextLocation.pathname,r)||i.nextLocation.pathname;return null!=U(o.pathname,a)||null!=U(o.pathname,s)}(m)&&!0===h,k=y.encodeLocation?y.encodeLocation(m).pathname:m.pathname,S=g.pathname,E=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;o||(S=S.toLowerCase(),E=E?E.toLowerCase():null,k=k.toLowerCase()),E&&b&&(E=H(E,b)||E);const x="/"!==k&&k.endsWith("/")?k.length-1:k.length;let T,C=S===k||!a&&S.startsWith(k)&&"/"===S.charAt(x),I=null!=E&&(E===k||!a&&E.startsWith(k)&&"/"===E.charAt(k.length)),N={isActive:C,isPending:I,isTransitioning:w},P=C?i:void 0;T="function"===typeof s?s(N):[s,C?"active":null,I?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let A="function"===typeof l?l(N):l;return e.createElement(Nt,u(u({},f),{},{"aria-current":P,className:T,ref:n,style:A,to:c,viewTransition:h}),"function"===typeof d?d(N):d)});Pt.displayName="NavLink";var At=e.forwardRef((t,n)=>{let{discover:i="render",fetcherKey:o,navigate:s,reloadDocument:a,replace:l,state:c,method:h=Je,action:d,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:y}=t,b=r(t,m),{unstable_useTransitions:w}=e.useContext(pe),k=Dt(),E=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:i}=e.useContext(pe),r=e.useContext(ge);_(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),s=u({},xe(t||".",{relative:n})),a=be();if(null==t){s.search=a.search;let e=new URLSearchParams(s.search),t=e.getAll("index"),n=t.some(e=>""===e);if(n){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();s.search=n?"?".concat(n):""}}t&&"."!==t||!o.route.index||(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index");"/"!==i&&(s.pathname="/"===s.pathname?i:J([i,s.pathname]));return S(s)}(d,{relative:p}),x="get"===h.toLowerCase()?"get":"post",T="string"===typeof d&&It.test(d);return e.createElement("form",u(u({ref:n,method:x,action:E,onSubmit:a?f:t=>{if(f&&f(t),t.defaultPrevented)return;t.preventDefault();let n=t.nativeEvent.submitter,i=(null===n||void 0===n?void 0:n.getAttribute("formmethod"))||h,r=()=>k(n||t.currentTarget,{fetcherKey:o,method:i,navigate:s,replace:l,state:c,relative:p,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:y});w&&!1!==s?e.startTransition(()=>r()):r()}},b),{},{"data-discover":T||"render"!==i?void 0:"true"}))});function Lt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Rt(t){let n=e.useContext(ae);return _(n,Lt(t)),n}At.displayName="Form";var Ot=0,Mt=()=>"__".concat(String(++Ot),"__");function Dt(){let{router:t}=Rt("useSubmit"),{basename:n}=e.useContext(pe),i=je("useRouteId"),r=t.fetch,o=t.navigate;return e.useCallback(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:a,encType:l,formData:u,body:c}=nt(e,n);if(!1===t.navigate){let e=t.fetcherKey||Mt();await r(e,i,t.action||s,{unstable_defaultShouldRevalidate:t.unstable_defaultShouldRevalidate,preventScrollReset:t.preventScrollReset,formData:u,body:c,formMethod:t.method||a,formEncType:t.encType||l,flushSync:t.flushSync})}else await o(t.action||s,{unstable_defaultShouldRevalidate:t.unstable_defaultShouldRevalidate,preventScrollReset:t.preventScrollReset,formData:u,body:c,formMethod:t.method||a,formEncType:t.encType||l,replace:t.replace,state:t.state,fromRouteId:i,flushSync:t.flushSync,viewTransition:t.viewTransition})},[r,o,n,i])}const jt=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},zt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],o=r+1<e.length,s=o?e[r+1]:0,a=r+2<e.length,l=a?e[r+2]:0,u=t>>2,c=(3&t)<<4|s>>4;let h=(15&s)<<2|l>>6,d=63&l;a||(d=64,o||(h=64)),i.push(n[u],n[c],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(jt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){const o=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(o>>10)),t[i++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],o=r<e.length?n[e.charAt(r)]:0;++r;const s=r<e.length?n[e.charAt(r)]:64;++r;const a=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==o||null==s||null==a)throw new Ft;const l=t<<2|o>>4;if(i.push(l),64!==s){const e=o<<4&240|s>>2;if(i.push(e),64!==a){const e=s<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ft extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ut=function(e){return function(e){const t=jt(e);return zt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Vt=function(e){try{return zt.decodeString(e,!0)}catch(xy){console.error("base64Decode failed: ",xy)}return null};function Bt(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Ht=()=>{try{return Bt().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/lile",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(xy){return}const t=e&&Vt(e[1]);return t&&JSON.parse(t)})()}catch(xy){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(xy))}},qt=e=>{var t;return null===(t=Ht())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},Wt=()=>{var e;return null===(e=Ht())||void 0===e?void 0:e.config},Kt=e=>{var t;return null===(t=Ht())||void 0===t?void 0:t["_".concat(e)]};class Zt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Gt(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Qt(e){return(await fetch(e,{credentials:"include"})).ok}const Jt={};let Yt=!1;function Xt(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Gt(window.location.host)||Jt[e]===t||Jt[e]||Yt)return;function n(e){return"__firebase__banner__".concat(e)}Jt[e]=t;const i="__firebase__banner",r=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Jt))Jt[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function o(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Yt=!0,function(){const e=document.getElementById(i);e&&e.remove()}()},e}function s(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(i),t=n("text"),s=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),u=n("preprendIcon"),c=document.getElementById(u)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=o();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(c,u),t.append(c,s,l,n),document.body.appendChild(t)}r?(s.innerText="Preview backend disconnected.",c.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(c.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',s.innerText="Preview backend running in this workspace."),s.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function $t(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function en(){var e;const t=null===(e=Ht())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(xy){return!1}}function tn(){return!en()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nn(){try{return"object"===typeof indexedDB}catch(xy){return!1}}class rn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,on.prototype.create)}}class on{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],r=i?function(e,t){return e.replace(sn,(e,n)=>{const i=t[n];return null!=i?String(i):"<".concat(n,"?>")})}(i,t):"Error",o="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new rn(n,o,t)}}const sn=/\{\$([^}]+)}/g;function an(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],o=t[r];if(ln(n)&&ln(o)){if(!an(n,o))return!1}else if(n!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ln(e){return null!==e&&"object"===typeof e}function un(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function cn(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}}),t}function hn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class dn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=fn),void 0===i.error&&(i.error=fn),void 0===i.complete&&(i.complete=fn);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(xy){}}),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(xy){"undefined"!==typeof console&&console.error&&console.error(xy)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fn(){}function pn(e){return e&&e._delegate?e._delegate:e}class mn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const gn="[DEFAULT]";class vn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Zt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(xy){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(xy){if(i)return null;throw xy}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:gn})}catch(xy){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(xy){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&o.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(i){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===gn?void 0:r),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(o){}var r;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn;return this.component?this.component.multipleInstances?e:gn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class yn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new vn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const _n=[];var bn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(bn||(bn={}));const wn={debug:bn.DEBUG,verbose:bn.VERBOSE,info:bn.INFO,warn:bn.WARN,error:bn.ERROR,silent:bn.SILENT},kn=bn.INFO,Sn={[bn.DEBUG]:"log",[bn.VERBOSE]:"log",[bn.INFO]:"info",[bn.WARN]:"warn",[bn.ERROR]:"error"},En=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=Sn[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];console[i]("[".concat(n,"]  ").concat(e.name,":"),...o)};class xn{constructor(e){this.name=e,this._logLevel=kn,this._logHandler=En,this._userLogHandler=null,_n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in bn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?wn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,bn.DEBUG,...t),this._logHandler(this,bn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,bn.VERBOSE,...t),this._logHandler(this,bn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,bn.INFO,...t),this._logHandler(this,bn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,bn.WARN,...t),this._logHandler(this,bn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,bn.ERROR,...t),this._logHandler(this,bn.ERROR,...t)}}let Tn,Cn;const In=new WeakMap,Nn=new WeakMap,Pn=new WeakMap,An=new WeakMap,Ln=new WeakMap;let Rn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Nn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Pn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function On(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Cn||(Cn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(jn(this),n),Dn(In.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Dn(e.apply(jn(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const o=e.call(jn(this),t,...i);return Pn.set(o,t.sort?t.sort():[t]),Dn(o)}}function Mn(e){return"function"===typeof e?On(e):(e instanceof IDBTransaction&&function(e){if(Nn.has(e))return;const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{t(),i()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});Nn.set(e,t)}(e),t=e,(Tn||(Tn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Rn):e);var t}function Dn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{t(Dn(e.result)),i()},o=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&In.set(t,e)}).catch(()=>{}),Ln.set(t,e),t}(e);if(An.has(e))return An.get(e);const t=Mn(e);return t!==e&&(An.set(e,t),Ln.set(t,e)),t}const jn=e=>Ln.get(e);const zn=["get","getKey","getAll","getAllKeys","count"],Fn=["put","add","delete","clear"],Un=new Map;function Vn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Un.get(t))return Un.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Fn.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!zn.includes(n))return;const o=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return i&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),r&&t.done]))[0]};return Un.set(t,o),o}Rn=(e=>u(u({},e),{},{get:(t,n,i)=>Vn(t,n)||e.get(t,n,i),has:(t,n)=>!!Vn(t,n)||e.has(t,n)}))(Rn);class Bn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Hn="@firebase/app",qn="0.14.8",Wn=new xn("@firebase/app"),Kn="@firebase/app-compat",Zn="@firebase/analytics-compat",Gn="@firebase/analytics",Qn="@firebase/app-check-compat",Jn="@firebase/app-check",Yn="@firebase/auth",Xn="@firebase/auth-compat",$n="@firebase/database",ei="@firebase/data-connect",ti="@firebase/database-compat",ni="@firebase/functions",ii="@firebase/functions-compat",ri="@firebase/installations",oi="@firebase/installations-compat",si="@firebase/messaging",ai="@firebase/messaging-compat",li="@firebase/performance",ui="@firebase/performance-compat",ci="@firebase/remote-config",hi="@firebase/remote-config-compat",di="@firebase/storage",fi="@firebase/storage-compat",pi="@firebase/firestore",mi="@firebase/ai",gi="@firebase/firestore-compat",vi="firebase",yi="[DEFAULT]",_i={[Hn]:"fire-core",[Kn]:"fire-core-compat",[Gn]:"fire-analytics",[Zn]:"fire-analytics-compat",[Jn]:"fire-app-check",[Qn]:"fire-app-check-compat",[Yn]:"fire-auth",[Xn]:"fire-auth-compat",[$n]:"fire-rtdb",[ei]:"fire-data-connect",[ti]:"fire-rtdb-compat",[ni]:"fire-fn",[ii]:"fire-fn-compat",[ri]:"fire-iid",[oi]:"fire-iid-compat",[si]:"fire-fcm",[ai]:"fire-fcm-compat",[li]:"fire-perf",[ui]:"fire-perf-compat",[ci]:"fire-rc",[hi]:"fire-rc-compat",[di]:"fire-gcs",[fi]:"fire-gcs-compat",[pi]:"fire-fst",[gi]:"fire-fst-compat",[mi]:"fire-vertex","fire-js":"fire-js",[vi]:"fire-js-all"},bi=new Map,wi=new Map,ki=new Map;function Si(e,t){try{e.container.addComponent(t)}catch(xy){Wn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),xy)}}function Ei(e){const t=e.name;if(ki.has(t))return Wn.debug("There were multiple attempts to register component ".concat(t,".")),!1;ki.set(t,e);for(const n of bi.values())Si(n,e);for(const n of wi.values())Si(n,e);return!0}function xi(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ti(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Ci=new on("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ii{constructor(e,t,n){this._isDeleted=!1,this._options=u({},e),this._config=u({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new mn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}}const Ni="12.9.0";function Pi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=u({name:yi,automaticDataCollectionEnabled:!0},t),r=i.name;if("string"!==typeof r||!r)throw Ci.create("bad-app-name",{appName:String(r)});if(n||(n=Wt()),!n)throw Ci.create("no-options");const o=bi.get(r);if(o){if(an(n,o.options)&&an(i,o.config))return o;throw Ci.create("duplicate-app",{appName:r})}const s=new yn(r);for(const l of ki.values())s.addComponent(l);const a=new Ii(n,i,s);return bi.set(r,a),a}function Ai(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi;const t=bi.get(e);if(!t&&e===yi&&Wt())return Pi();if(!t)throw Ci.create("no-app",{appName:e});return t}function Li(e,t,n){var i;let r=null!==(i=_i[e])&&void 0!==i?i:e;n&&(r+="-".concat(n));const o=r.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Wn.warn(e.join(" "))}Ei(new mn("".concat(r,"-version"),()=>({library:r,version:t}),"VERSION"))}const Ri="firebase-heartbeat-store";let Oi=null;function Mi(){return Oi||(Oi=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=Dn(s);return i&&s.addEventListener("upgradeneeded",e=>{i(Dn(s.result),e.oldVersion,e.newVersion,Dn(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{o&&e.addEventListener("close",()=>o()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ri)}catch(xy){console.warn(xy)}}}).catch(e=>{throw Ci.create("idb-open",{originalErrorMessage:e.message})})),Oi}async function Di(e,t){try{const n=(await Mi()).transaction(Ri,"readwrite"),i=n.objectStore(Ri);await i.put(t,ji(e)),await n.done}catch(xy){if(xy instanceof rn)Wn.warn(xy.message);else{const t=Ci.create("idb-set",{originalErrorMessage:null===xy||void 0===xy?void 0:xy.message});Wn.warn(t.message)}}}function ji(e){return"".concat(e.name,"!").concat(e.options.appId)}class zi{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ui(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Fi();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(e=>e.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(xy){Wn.warn(xy)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Fi(),{heartbeatsToSend:n,unsentEntries:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),Vi(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Vi(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=Ut(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(xy){return Wn.warn(xy),""}}}function Fi(){return(new Date).toISOString().substring(0,10)}class Ui{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!nn()&&new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Mi()).transaction(Ri),n=await t.objectStore(Ri).get(ji(e));return await t.done,n}catch(xy){if(xy instanceof rn)Wn.warn(xy.message);else{const t=Ci.create("idb-get",{originalErrorMessage:null===xy||void 0===xy?void 0:xy.message});Wn.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Di(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Di(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Vi(e){return Ut(JSON.stringify({version:2,heartbeats:e})).length}var Bi;Bi="",Ei(new mn("platform-logger",e=>new Bn(e),"PRIVATE")),Ei(new mn("heartbeat",e=>new zi(e),"PRIVATE")),Li(Hn,qn,Bi),Li(Hn,qn,"esm2020"),Li("fire-js","");const Hi=["providerId"],qi=["uid","auth","stsTokenManager"],Wi=["providerId","signInMethod"];function Ki(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zi=Ki,Gi=new on("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Qi=new xn("@firebase/auth");function Ji(e){if(Qi.logLevel<=bn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Qi.error("Auth (".concat(Ni,"): ").concat(e),...n)}}function Yi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw nr(e,...n)}function Xi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return nr(e,...n)}function $i(e,t,n){const i=u(u({},Zi()),{},{[t]:n});return new on("auth","Firebase",i).create(t,{appName:e.name})}function er(e){return $i(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Yi(e,"argument-error"),$i(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function nr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("string"!==typeof e){const t=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(t,...i)}return Gi.create(e,...n)}function ir(e,t){if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw nr(t,...i)}}function rr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ji(t),new Error(t)}function or(e,t){e||rr(t)}function sr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ar(){return"http:"===lr()||"https:"===lr()}function lr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function ur(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ar()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class cr{constructor(e,t){this.shortDelay=e,this.longDelay=t,or(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return ur()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hr(e,t){or(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class dr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},pr=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mr=new cr(3e4,6e4);function gr(e,t){return e.tenantId&&!t.tenantId?u(u({},t),{},{tenantId:e.tenantId}):t}async function vr(e,t,n,i){return yr(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let r={},o={};i&&("GET"===t?o=i:r={body:JSON.stringify(i)});const s=un(u({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=u({method:t,headers:a},r);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Gt(e.emulatorConfig.host)&&(l.credentials="include"),dr.fetch()(await br(e,e.config.apiHost,n,s),l)})}async function yr(e,t,n){e._canInitEmulator=!1;const i=u(u({},fr),t);try{const t=new kr(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Sr(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const t=r.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Sr(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Sr(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Sr(e,"user-disabled",o);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw $i(e,a,s);Yi(e,a)}}catch(xy){if(xy instanceof rn)throw xy;Yi(e,"network-request-failed",{message:String(xy)})}}async function _r(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await vr(e,t,n,i,r);return"mfaPendingCredential"in o&&Yi(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function br(e,t,n,i){const r="".concat(t).concat(n,"?").concat(i),o=e,s=o.config.emulator?hr(e.config,r):"".concat(e.config.apiScheme,"://").concat(r);if(pr.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(s).toString()}return s}function wr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kr{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Xi(this.auth,"network-request-failed")),mr.get())})}}function Sr(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Xi(e,t,i);return r.customData._tokenResponse=n,r}function Er(e){return void 0!==e&&void 0!==e.enterprise}class xr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return wr(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Tr(e,t){return vr(e,"GET","/v2/recaptchaConfig",gr(e,t))}async function Cr(e,t){return vr(e,"POST","/v1/accounts:lookup",t)}function Ir(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(xy){}}function Nr(e){return 1e3*Number(e)}function Pr(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return Ji("JWT malformed, contained fewer than 3 sections"),null;try{const e=Vt(n);return e?JSON.parse(e):(Ji("Failed to decode base64 JWT payload"),null)}catch(xy){return Ji("Caught error parsing JWT payload as JSON",null===xy||void 0===xy?void 0:xy.toString()),null}}function Ar(e){const t=Pr(e);return ir(t,"internal-error"),ir("undefined"!==typeof t.exp,"internal-error"),ir("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Lr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(xy){throw xy instanceof rn&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(xy)&&e.auth.currentUser===e&&await e.auth.signOut(),xy}}class Rr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(xy){return void((null===xy||void 0===xy?void 0:xy.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Or{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ir(this.lastLoginAt),this.creationTime=Ir(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Mr(e){var t;const n=e.auth,i=await e.getIdToken(),r=await Lr(e,Cr(n,{idToken:i}));ir(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const o=r.users[0];e._notifyReloadListener(o);const s=null!==(t=o.providerUserInfo)&&void 0!==t&&t.length?Dr(o.providerUserInfo):[],a=(l=e.providerData,u=s,[...l.filter(e=>!u.some(t=>t.providerId===e.providerId)),...u]);var l,u;const c=e.isAnonymous,h=!(e.email&&o.passwordHash)&&!(null!==a&&void 0!==a&&a.length),d=!!c&&h,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Or(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function Dr(e){return e.map(e=>{let{providerId:t}=e,n=r(e,Hi);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class jr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ir(e.idToken,"internal-error"),ir("undefined"!==typeof e.idToken,"internal-error"),ir("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Ar(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ir(0!==e.length,"internal-error");const t=Ar(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ir(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await yr(e,{},async()=>{const n=un({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,o=await br(e,i,"/v1/token","key=".concat(r)),s=await e._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:s,body:n};return e.emulatorConfig&&Gt(e.emulatorConfig.host)&&(a.credentials="include"),dr.fetch()(o,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,o=new jr;return n&&(ir("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),i&&(ir("string"===typeof i,"internal-error",{appName:e}),o.accessToken=i),r&&(ir("number"===typeof r,"internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jr,this.toJSON())}_performRefresh(){return rr("not implemented")}}function zr(e,t){ir("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Fr{constructor(e){let{uid:t,auth:n,stsTokenManager:i}=e,o=r(e,qi);this.providerId="firebase",this.proactiveRefresh=new Rr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Or(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Lr(this,this.stsTokenManager.getToken(this.auth,e));return ir(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=pn(e),i=await n.getIdToken(t),r=Pr(i);ir(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o="object"===typeof r.firebase?r.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:Ir(Nr(r.auth_time)),issuedAtTime:Ir(Nr(r.iat)),expirationTime:Ir(Nr(r.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=pn(e);await Mr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ir(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>u({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fr(u(u({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ir(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Mr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ti(this.auth.app))return Promise.reject(er(this.auth));const e=await this.getIdToken();return await Lr(this,async function(e,t){return vr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return u(u({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>u({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,o,s,a,l,c;const h=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(i=t.email)&&void 0!==i?i:void 0,f=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,m=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,v=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:_,emailVerified:b,isAnonymous:w,providerData:k,stsTokenManager:S}=t;ir(_&&S,e,"internal-error");const E=jr.fromJSON(this.name,S);ir("string"===typeof _,e,"internal-error"),zr(h,e.name),zr(d,e.name),ir("boolean"===typeof b,e,"internal-error"),ir("boolean"===typeof w,e,"internal-error"),zr(f,e.name),zr(p,e.name),zr(m,e.name),zr(g,e.name),zr(v,e.name),zr(y,e.name);const x=new Fr({uid:_,auth:e,email:d,emailVerified:b,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:E,createdAt:v,lastLoginAt:y});return k&&Array.isArray(k)&&(x.providerData=k.map(e=>u({},e))),g&&(x._redirectEventId=g),x}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new jr;i.updateFromServerResponse(t);const r=new Fr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Mr(r),r}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];ir(void 0!==i.localId,"internal-error");const r=void 0!==i.providerUserInfo?Dr(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(null!==r&&void 0!==r&&r.length),s=new jr;s.updateFromIdToken(n);const a=new Fr({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new Or(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null!==r&&void 0!==r&&r.length)};return Object.assign(a,l),a}}const Ur=new Map;function Vr(e){or(e instanceof Function,"Expected a class definition");let t=Ur.get(e);return t?(or(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ur.set(e,t),t)}class Br{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Br.type="NONE";const Hr=Br;function qr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Wr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=qr(this.userKey,i.apiKey,r),this.fullPersistenceKey=qr("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Cr(this.auth,{idToken:e}).catch(()=>{});return t?Fr._fromGetAccountInfoResponse(this.auth,t,e):null}return Fr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Wr(Vr(Hr),e,n);const i=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let r=i[0]||Vr(Hr);const o=qr(n,e.config.apiKey,e.name);let s=null;for(const u of t)try{const t=await u._get(o);if(t){let n;if("string"===typeof t){const i=await Cr(e,{idToken:t}).catch(()=>{});if(!i)break;n=await Fr._fromGetAccountInfoResponse(e,i,t)}else n=Fr._fromJSON(e,t);u!==r&&(s=n),r=u;break}}catch(l){}const a=i.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&a.length?(r=a[0],s&&await r._set(o,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(o)}catch(t){}})),new Wr(r,e,n)):new Wr(r,e,n)}}function Kr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Jr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Zr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Xr(t))return"Blackberry";if($r(t))return"Webos";if(Gr(t))return"Safari";if((t.includes("chrome/")||Qr(t))&&!t.includes("edge/"))return"Chrome";if(Yr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Zr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();return/firefox\//i.test(e)}function Gr(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();return/crios\//i.test(e)}function Jr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();return/iemobile/i.test(e)}function Yr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();return/android/i.test(e)}function Xr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();return/blackberry/i.test(e)}function $r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();return/webos/i.test(e)}function eo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function to(){return function(){const e=$t();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function no(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();return eo(e)||Yr(e)||$r(e)||Xr(e)||/windows phone/i.test(e)||Jr(e)}function io(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Kr($t());break;case"Worker":t="".concat(Kr($t()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ni,"/").concat(i)}class ro{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,i)=>{try{n(e(t))}catch(xy){i(xy)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(xy){t.reverse();for(const i of t)try{i()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===xy||void 0===xy?void 0:xy.message})}}}class oo{constructor(e){var t,n,i,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(i=e.allowedNonAlphanumericCharacters)||void 0===i?void 0:i.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class so{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lo(this),this.idTokenSubscription=new lo(this),this.beforeStateQueue=new ro(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gi,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vr(t)),this._initializationPromise=this.queue(async()=>{var n,i,r;if(!this._deleted&&(this.persistenceManager=await Wr.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(i=this._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(xy){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Cr(this,{idToken:e}),n=await Fr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ti(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,i=!1;if(e&&this.config.authDomain){var r,o;await this.getOrInitRedirectPersistenceManager();const t=null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId,s=null===(o=n)||void 0===o?void 0:o._redirectEventId,a=await this.tryRedirectSignIn(e);t&&t!==s||null===a||void 0===a||!a.user||(n=a.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(xy){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(xy))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ir(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(xy){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mr(e)}catch(xy){if((null===xy||void 0===xy?void 0:xy.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ti(this.app))return Promise.reject(er(this));const t=e?pn(e):null;return t&&ir(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ir(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ti(this.app)?Promise.reject(er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ti(this.app)?Promise.reject(er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return vr(e,"GET","/v2/passwordPolicy",gr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new oo(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new on("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return vr(e,"POST","/v2/accounts:revokeToken",gr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vr(e)||this._popupRedirectResolver;ir(t,this,"argument-error"),this.redirectPersistenceManager=await Wr.create(this,[Vr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(ir(s,this,"internal-error"),s.then(()=>{o||r(this.currentUser)}),"function"===typeof t){const r=e.addObserver(t,n,i);return()=>{o=!0,r()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ir(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=io(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Ti(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Qi.logLevel<=bn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Qi.warn("Auth (".concat(Ni,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ao(e){return pn(e)}class lo{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new dn(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return ir(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let uo={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function co(e){return uo.loadJS(e)}function ho(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class fo{constructor(){this.enterprise=new po}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class po{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const mo="NO_RECAPTCHA";class go{constructor(e){this.type="recaptcha-enterprise",this.auth=ao(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,i){const r=window.grecaptcha;Er(r)?r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(mo)})}):i(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new fo).execute("siteKey",{action:"verify"})}return new Promise((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Tr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(void 0!==i.recaptchaKey){const n=new xr(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(r=>{if(!t&&Er(window.grecaptcha))n(r,e,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=uo.recaptchaEnterpriseScript;0!==t.length&&(t+=r),co(t).then(()=>{n(r,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function vo(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new go(e);let s;if(r)s=mo;else try{s=await o.verify(n)}catch(l){s=await o.verify(n,!0)}const a=u({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return i?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function yo(e,t,n,i,r){if("EMAIL_PASSWORD_PROVIDER"===r){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await vo(e,t,n,"getOobCode"===n);return i(e,r)}return i(e,t).catch(async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await vo(e,t,n,"getOobCode"===n);return i(e,r)}return Promise.reject(r)})}if("PHONE_PROVIDER"===r){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("PHONE_PROVIDER")){const r=await vo(e,t,n);return i(e,r).catch(async r=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&(r.code==="auth/".concat("missing-recaptcha-token")||r.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const r=await vo(e,t,n,!1,!0);return i(e,r)}return Promise.reject(r)})}{const r=await vo(e,t,n,!1,!0);return i(e,r)}}return Promise.reject(r+" provider is not supported.")}async function _o(e){const t=ao(e),n=await Tr(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new xr(n);if(null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,i.isAnyProviderEnabled()){new go(t).verify()}}function bo(e,t,n){const i=ao(e);ir(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!(null===n||void 0===n||!n.disableWarnings),o=wo(t),{host:s,port:a}=function(e){const t=wo(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:ko(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:ko(t)}}}(t),l=null===a?"":":".concat(a),u={url:"".concat(o,"//").concat(s).concat(l,"/")},c=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator)return ir(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),void ir(an(u,i.config.emulator)&&an(c,i.emulatorConfig),i,"emulator-config-failed");i.config.emulator=u,i.emulatorConfig=c,i.settings.appVerificationDisabledForTesting=!0,Gt(s)?(Qt("".concat(o,"//").concat(s).concat(l)),Xt("Auth",!0)):r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function wo(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ko(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class So{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,t){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}}async function Eo(e,t){return vr(e,"POST","/v1/accounts:signUp",t)}async function xo(e,t){return _r(e,"POST","/v1/accounts:signInWithPassword",gr(e,t))}class To extends So{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new To(e,t,"password")}static _fromEmailAndCode(e,t){return new To(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return yo(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",xo,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return _r(e,"POST","/v1/accounts:signInWithEmailLink",gr(e,t))}(e,{email:this._email,oobCode:this._password});default:Yi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return yo(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Eo,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return _r(e,"POST","/v1/accounts:signInWithEmailLink",gr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Yi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Co(e,t){return _r(e,"POST","/v1/accounts:signInWithIdp",gr(e,t))}class Io extends So{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Io(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,o=r(t,Wi);if(!n||!i)return null;const s=new Io(n,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){return Co(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Co(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Co(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=un(t)}return e}}async function No(e,t){return vr(e,"POST","/v1/accounts:sendVerificationCode",gr(e,t))}const Po={USER_NOT_FOUND:"user-not-found"};class Ao extends So{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ao({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ao({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return _r(e,"POST","/v1/accounts:signInWithPhoneNumber",gr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await _r(e,"POST","/v1/accounts:signInWithPhoneNumber",gr(e,t));if(n.temporaryProof)throw Sr(e,"account-exists-with-different-credential",n);return n}(e,u({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return _r(e,"POST","/v1/accounts:signInWithPhoneNumber",gr(e,u(u({},t),{},{operation:"REAUTH"})),Po)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new Ao({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Lo{constructor(e){var t,n,i,r,o,s;const a=cn(hn(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);ir(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(o=a.lang)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=cn(hn(e)).link,n=t?cn(hn(t)).deep_link_id:null,i=cn(hn(e)).deep_link_id;return(i?cn(hn(i)).link:null)||i||n||t||e}(e);try{return new Lo(t)}catch(n){return null}}}class Ro{constructor(){this.providerId=Ro.PROVIDER_ID}static credential(e,t){return To._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Lo.parseLink(t);return ir(n,"argument-error"),To._fromEmailAndCode(e,n.code,n.tenantId)}}Ro.PROVIDER_ID="password",Ro.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ro.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Oo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mo extends Oo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Do extends Mo{constructor(){super("facebook.com")}static credential(e){return Io._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Do.credential(t.oauthAccessToken)}catch(n){return null}}}Do.FACEBOOK_SIGN_IN_METHOD="facebook.com",Do.PROVIDER_ID="facebook.com";class jo extends Mo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Io._fromParams({providerId:jo.PROVIDER_ID,signInMethod:jo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return jo.credentialFromTaggedObject(e)}static credentialFromError(e){return jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return jo.credential(n,i)}catch(r){return null}}}jo.GOOGLE_SIGN_IN_METHOD="google.com",jo.PROVIDER_ID="google.com";class zo extends Mo{constructor(){super("github.com")}static credential(e){return Io._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return zo.credential(t.oauthAccessToken)}catch(n){return null}}}zo.GITHUB_SIGN_IN_METHOD="github.com",zo.PROVIDER_ID="github.com";class Fo extends Mo{constructor(){super("twitter.com")}static credential(e,t){return Io._fromParams({providerId:Fo.PROVIDER_ID,signInMethod:Fo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fo.credentialFromTaggedObject(e)}static credentialFromError(e){return Fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Fo.credential(n,i)}catch(r){return null}}}async function Uo(e,t){return _r(e,"POST","/v1/accounts:signUp",gr(e,t))}Fo.TWITTER_SIGN_IN_METHOD="twitter.com",Fo.PROVIDER_ID="twitter.com";class Vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await Fr._fromIdTokenResponse(e,n,i),o=Bo(n);return new Vo({user:r,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Bo(n);return new Vo({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Bo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ho extends rn{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Ho.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Ho(e,t,n,i)}}function qo(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ho._fromErrorAndOperation(e,n,t,i);throw n})}async function Wo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await Lr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Vo._forOperation(e,"link",i)}async function Ko(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if(Ti(i.app))return Promise.reject(er(i));const r="reauthenticate";try{const o=await Lr(e,qo(i,r,t,e),n);ir(o.idToken,i,"internal-error");const s=Pr(o.idToken);ir(s,i,"internal-error");const{sub:a}=s;return ir(e.uid===a,i,"user-mismatch"),Vo._forOperation(e,r,o)}catch(xy){throw(null===xy||void 0===xy?void 0:xy.code)==="auth/".concat("user-not-found")&&Yi(i,"user-mismatch"),xy}}async function Zo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ti(e.app))return Promise.reject(er(e));const i="signIn",r=await qo(e,i,t),o=await Vo._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(o.user),o}async function Go(e,t){return Zo(ao(e),t)}async function Qo(e){const t=ao(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function Jo(e){return pn(e).signOut()}function Yo(e,t){return vr(e,"POST","/v2/accounts/mfaEnrollment:start",gr(e,t))}new WeakMap;const Xo="__sak";class $o{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xo,"1"),this.storage.removeItem(Xo),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class es extends $o{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=no(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);to()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}es.type="LOCAL";const ts=es;function ns(e){var t,n;const i=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),r=RegExp("".concat(i,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(r))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function is(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class rs{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=is(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return ns(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=is(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=is(e);if(window.cookieStore){const e=e=>{const i=e.changed.find(e=>e.name===n);i&&t(i.value);e.deleted.find(e=>e.name===n)&&t(null)},i=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,i),window.cookieStore.addEventListener("change",e)}let i=ns(n);const r=setInterval(()=>{const e=ns(n);e!==i&&(t(e),i=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(r))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}rs.type="COOKIE";class os extends $o{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}os.type="SESSION";const ss=os;class as{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new as(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,o=this.handlersMap[i];if(null===o||void 0===o||!o.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const s=Array.from(o).map(async e=>e(t.origin,r)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}as.receivers=[];class us{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((s,a)=>{const l=ls("",20);i.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),s(t.data.response);break;default:clearTimeout(u),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function cs(){return window}function hs(){return"undefined"!==typeof cs().WorkerGlobalScope&&"function"===typeof cs().importScripts}const ds="firebaseLocalStorageDb",fs="firebaseLocalStorage",ps="fbase_key";class ms{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gs(e,t){return e.transaction([fs],t?"readwrite":"readonly").objectStore(fs)}function vs(){const e=indexedDB.open(ds,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(fs,{keyPath:ps})}catch(xy){n(xy)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(fs)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ds);return new ms(e).toPromise()}(),t(await vs()))})})}async function ys(e,t,n){const i=gs(e,!0).put({[ps]:t,value:n});return new ms(i).toPromise()}function _s(e,t){const n=gs(e,!0).delete(t);return new ms(n).toPromise()}class bs{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await vs()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(xy){if(t++>3)throw xy;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hs()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=as._getInstance(hs()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new us(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vs();return await ys(e,Xo,"1"),await _s(e,Xo),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ys(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=gs(e,!1).get(t),i=await new ms(n).toPromise();return void 0===i?null:i.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_s(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=gs(e,!1).getAll();return new ms(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}bs.type="LOCAL";const ws=bs;function ks(e,t){return vr(e,"POST","/v2/accounts/mfaSignIn:start",gr(e,t))}ho("rcb"),new cr(3e4,6e4);const Ss="recaptcha";async function Es(e,t,n){if(!e._getRecaptchaConfig())try{await _o(e)}catch(r){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"===typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){ir("enroll"===t.type,e,"internal-error");const i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=yo(e,i,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===mo){ir((null===n||void 0===n?void 0:n.type)===Ss,e,"argument-error");return Yo(e,await xs(e,t,n))}return Yo(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var i;ir("signin"===t.type,e,"internal-error");const o=(null===(i=r.multiFactorHint)||void 0===i?void 0:i.uid)||r.multiFactorUid;ir(o,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=yo(e,s,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===mo){ir((null===n||void 0===n?void 0:n.type)===Ss,e,"argument-error");return ks(e,await xs(e,t,n))}return ks(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},i=yo(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===mo){ir((null===n||void 0===n?void 0:n.type)===Ss,e,"argument-error");return No(e,await xs(e,t,n))}return No(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function xs(e,t,n){ir(n.type===Ss,e,"argument-error");const i=await n.verify();ir("string"===typeof i,e,"argument-error");const r=u({},t);if("phoneEnrollmentInfo"in r){const e=r.phoneEnrollmentInfo.phoneNumber,t=r.phoneEnrollmentInfo.captchaResponse,n=r.phoneEnrollmentInfo.clientType,o=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:i,captchaResponse:t,clientType:n,recaptchaVersion:o}}),r}if("phoneSignInInfo"in r){const e=r.phoneSignInInfo.captchaResponse,t=r.phoneSignInInfo.clientType,n=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:e,clientType:t,recaptchaVersion:n}}),r}return Object.assign(r,{recaptchaToken:i}),r}class Ts{constructor(e){this.providerId=Ts.PROVIDER_ID,this.auth=ao(e)}verifyPhoneNumber(e,t){return Es(this.auth,e,pn(t))}static credential(e,t){return Ao._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ts.credentialFromTaggedObject(t)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:i}=t;return n&&i?Ao._fromTokenResponse(n,i):null}}function Cs(e,t){return t?Vr(t):(ir(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ts.PROVIDER_ID="phone",Ts.PHONE_SIGN_IN_METHOD="phone";class Is extends So{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Co(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Co(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Co(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ns(e){return Zo(e.auth,new Is(e),e.bypassAuthState)}function Ps(e){const{auth:t,user:n}=e;return ir(n,t,"internal-error"),Ko(n,new Is(e),e.bypassAuthState)}async function As(e){const{auth:t,user:n}=e;return ir(n,t,"internal-error"),Wo(n,new Is(e),e.bypassAuthState)}class Ls{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(xy){this.reject(xy)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(xy){this.reject(xy)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ns;case"linkViaPopup":case"linkViaRedirect":return As;case"reauthViaPopup":case"reauthViaRedirect":return Ps;default:Yi(this.auth,"internal-error")}}resolve(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Rs=new cr(2e3,1e4);class Os extends Ls{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Os.currentPopupAction&&Os.currentPopupAction.cancel(),Os.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ir(e,this.auth,"internal-error"),e}async onExecution(){or(1===this.filter.length,"Popup operations only handle one event");const e=ls();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Xi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Xi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Os.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xi(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Rs.get())};e()}}Os.currentPopupAction=null;const Ms=new Map;class Ds extends Ls{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ms.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Fs(t),i=zs(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(xy){e=()=>Promise.reject(xy)}Ms.set(this.auth._key(),e)}return this.bypassAuthState||Ms.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function js(e,t){Ms.set(e._key(),t)}function zs(e){return Vr(e._redirectPersistence)}function Fs(e){return qr("pendingRedirect",e.config.apiKey,e.name)}async function Us(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ti(e.app))return Promise.reject(er(e));const i=ao(e),r=Cs(i,t),o=new Ds(i,r,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await i._persistUserIfCurrent(s.user),await i._setRedirectUser(null,t)),s}class Vs{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hs(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Hs(e)){var n;const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Xi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bs(e))}saveEventToCache(e){this.cachedEventUids.add(Bs(e)),this.lastProcessedEventTime=Date.now()}}function Bs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Hs(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const qs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ws=/^https?/;async function Ks(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return vr(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const i of t)try{if(Zs(i))return}catch(n){}Yi(e,"unauthorized-domain")}function Zs(e){const t=sr(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Ws.test(n))return!1;if(qs.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Gs=new cr(3e4,6e4);function Qs(){const e=cs().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Js(e){return new Promise((t,n)=>{var i,r;function o(){Qs(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Qs(),n(Xi(e,"network-request-failed"))},timeout:Gs.get()})}if(null!==(i=cs().gapi)&&void 0!==i&&null!==(i=i.iframes)&&void 0!==i&&i.Iframe)t(gapi.iframes.getContext());else{if(null===(r=cs().gapi)||void 0===r||!r.load){const t=ho("iframefcb");return cs()[t]=()=>{gapi.load?o():n(Xi(e,"network-request-failed"))},co("".concat(uo.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw Ys=null,e})}let Ys=null;const Xs=new cr(5e3,15e3),$s={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ea=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ta(e){const t=e.config;ir(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?hr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),i={apiKey:t.apiKey,appName:e.name,v:Ni},r=ea.get(e.config.apiHost);r&&(i.eid=r);const o=e._getFrameworks();return o.length&&(i.fw=o.join(",")),"".concat(n,"?").concat(un(i).slice(1))}async function na(e){const t=await function(e){return Ys=Ys||Js(e),Ys}(e),n=cs().gapi;return ir(n,e,"internal-error"),t.open({where:document.body,url:ta(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$s,dontclear:!0},t=>new Promise(async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=Xi(e,"network-request-failed"),o=cs().setTimeout(()=>{i(r)},Xs.get());function s(){cs().clearTimeout(o),n(t)}t.ping(s).then(s,()=>{i(r)})}))}const ia={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ra{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(xy){}}}function oa(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=u(u({},ia),{},{width:i.toString(),height:r.toString(),top:o,left:s}),c=$t().toLowerCase();n&&(a=Qr(c)?"_blank":n),Zr(c)&&(t=t||"http://localhost",l.scrollbars="yes");const h=Object.entries(l).reduce((e,t)=>{let[n,i]=t;return"".concat(e).concat(n,"=").concat(i,",")},"");if(function(){var e;return eo(arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new ra(null);const d=window.open(t||"",a,h);ir(d,e,"popup-blocked");try{d.focus()}catch(xy){}return new ra(d)}const sa="__/auth/handler",aa="emulator/auth/handler",la=encodeURIComponent("fac");async function ua(e,t,n,i,r,o){ir(e.config.authDomain,e,"auth-domain-config-required"),ir(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Ni,eventId:r};if(t instanceof Oo){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof Mo){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const l=await e._getAppCheckToken(),u=l?"#".concat(la,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(sa);return hr(t,aa)}(e),"?").concat(un(a).slice(1)).concat(u)}const ca="webStorageSupport";const ha=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ss,this._completeRedirectFn=Us,this._overrideRedirectResult=js}async _openPopup(e,t,n,i){var r;or(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return oa(e,await ua(e,t,n,sr(),i),ls())}async _openRedirect(e,t,n,i){await this._originValidation(e);return function(e){cs().location.href=e}(await ua(e,t,n,sr(),i)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(or(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await na(e),n=new Vs(e);return t.register("authEvent",t=>{ir(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ca,{type:ca},n=>{var i;const r=null===n||void 0===n||null===(i=n[0])||void 0===i?void 0:i[ca];void 0!==r&&t(!!r),Yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ks(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return no()||Gr()||eo()}};var da="@firebase/auth",fa="1.12.0";class pa{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ir(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ma=Kt("authIdTokenMaxAge")||300;let ga=null;var va;uo={loadJS:e=>new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=Xi("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(i)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},va="Browser",Ei(new mn("auth",(e,t)=>{let{options:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=i.options;ir(s&&!s.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:s,authDomain:a,clientPlatform:va,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:io(va)},u=new so(i,r,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Vr);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ei(new mn("auth-internal",e=>(e=>new pa(e))(ao(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Li(da,fa,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(va)),Li(da,fa,"esm2020");Li("firebase","12.9.0","app");var ya,_a,ba="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},wa={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const i=Array(16);if("string"===typeof t)for(var r=0;r<16;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;r<16;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];let o,s=e.g[3];o=t+(s^n&(r^s))+i[0]+3614090360&4294967295,o=s+(r^(t=n+(o<<7&4294967295|o>>>25))&(n^r))+i[1]+3905402710&4294967295,s=t+(o<<12&4294967295|o>>>20),o=r+(n^s&(t^n))+i[2]+606105819&4294967295,o=n+(t^(r=s+(o<<17&4294967295|o>>>15))&(s^t))+i[3]+3250441966&4294967295,o=t+(s^(n=r+(o<<22&4294967295|o>>>10))&(r^s))+i[4]+4118548399&4294967295,o=s+(r^(t=n+(o<<7&4294967295|o>>>25))&(n^r))+i[5]+1200080426&4294967295,s=t+(o<<12&4294967295|o>>>20),o=r+(n^s&(t^n))+i[6]+2821735955&4294967295,o=n+(t^(r=s+(o<<17&4294967295|o>>>15))&(s^t))+i[7]+4249261313&4294967295,o=t+(s^(n=r+(o<<22&4294967295|o>>>10))&(r^s))+i[8]+1770035416&4294967295,o=s+(r^(t=n+(o<<7&4294967295|o>>>25))&(n^r))+i[9]+2336552879&4294967295,s=t+(o<<12&4294967295|o>>>20),o=r+(n^s&(t^n))+i[10]+4294925233&4294967295,o=n+(t^(r=s+(o<<17&4294967295|o>>>15))&(s^t))+i[11]+2304563134&4294967295,o=t+(s^(n=r+(o<<22&4294967295|o>>>10))&(r^s))+i[12]+1804603682&4294967295,o=s+(r^(t=n+(o<<7&4294967295|o>>>25))&(n^r))+i[13]+4254626195&4294967295,s=t+(o<<12&4294967295|o>>>20),o=r+(n^s&(t^n))+i[14]+2792965006&4294967295,o=n+(t^(r=s+(o<<17&4294967295|o>>>15))&(s^t))+i[15]+1236535329&4294967295,o=t+(r^s&((n=r+(o<<22&4294967295|o>>>10))^r))+i[1]+4129170786&4294967295,o=s+(n^r&((t=n+(o<<5&4294967295|o>>>27))^n))+i[6]+3225465664&4294967295,s=t+(o<<9&4294967295|o>>>23),o=r+(t^n&(s^t))+i[11]+643717713&4294967295,o=n+(s^t&((r=s+(o<<14&4294967295|o>>>18))^s))+i[0]+3921069994&4294967295,o=t+(r^s&((n=r+(o<<20&4294967295|o>>>12))^r))+i[5]+3593408605&4294967295,o=s+(n^r&((t=n+(o<<5&4294967295|o>>>27))^n))+i[10]+38016083&4294967295,s=t+(o<<9&4294967295|o>>>23),o=r+(t^n&(s^t))+i[15]+3634488961&4294967295,o=n+(s^t&((r=s+(o<<14&4294967295|o>>>18))^s))+i[4]+3889429448&4294967295,o=t+(r^s&((n=r+(o<<20&4294967295|o>>>12))^r))+i[9]+568446438&4294967295,o=s+(n^r&((t=n+(o<<5&4294967295|o>>>27))^n))+i[14]+3275163606&4294967295,s=t+(o<<9&4294967295|o>>>23),o=r+(t^n&(s^t))+i[3]+4107603335&4294967295,o=n+(s^t&((r=s+(o<<14&4294967295|o>>>18))^s))+i[8]+1163531501&4294967295,o=t+(r^s&((n=r+(o<<20&4294967295|o>>>12))^r))+i[13]+2850285829&4294967295,o=s+(n^r&((t=n+(o<<5&4294967295|o>>>27))^n))+i[2]+4243563512&4294967295,s=t+(o<<9&4294967295|o>>>23),o=r+(t^n&(s^t))+i[7]+1735328473&4294967295,o=n+(s^t&((r=s+(o<<14&4294967295|o>>>18))^s))+i[12]+2368359562&4294967295,o=t+((n=r+(o<<20&4294967295|o>>>12))^r^s)+i[5]+4294588738&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^r)+i[8]+2272392833&4294967295,s=t+(o<<11&4294967295|o>>>21),o=r+(s^t^n)+i[11]+1839030562&4294967295,o=n+((r=s+(o<<16&4294967295|o>>>16))^s^t)+i[14]+4259657740&4294967295,o=t+((n=r+(o<<23&4294967295|o>>>9))^r^s)+i[1]+2763975236&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^r)+i[4]+1272893353&4294967295,s=t+(o<<11&4294967295|o>>>21),o=r+(s^t^n)+i[7]+4139469664&4294967295,o=n+((r=s+(o<<16&4294967295|o>>>16))^s^t)+i[10]+3200236656&4294967295,o=t+((n=r+(o<<23&4294967295|o>>>9))^r^s)+i[13]+681279174&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^r)+i[0]+3936430074&4294967295,s=t+(o<<11&4294967295|o>>>21),o=r+(s^t^n)+i[3]+3572445317&4294967295,o=n+((r=s+(o<<16&4294967295|o>>>16))^s^t)+i[6]+76029189&4294967295,o=t+((n=r+(o<<23&4294967295|o>>>9))^r^s)+i[9]+3654602809&4294967295,o=s+((t=n+(o<<4&4294967295|o>>>28))^n^r)+i[12]+3873151461&4294967295,s=t+(o<<11&4294967295|o>>>21),o=r+(s^t^n)+i[15]+530742520&4294967295,o=n+((r=s+(o<<16&4294967295|o>>>16))^s^t)+i[2]+3299628645&4294967295,o=t+(r^((n=r+(o<<23&4294967295|o>>>9))|~s))+i[0]+4096336452&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~r))+i[7]+1126891415&4294967295,s=t+(o<<10&4294967295|o>>>22),o=r+(t^(s|~n))+i[14]+2878612391&4294967295,o=n+(s^((r=s+(o<<15&4294967295|o>>>17))|~t))+i[5]+4237533241&4294967295,o=t+(r^((n=r+(o<<21&4294967295|o>>>11))|~s))+i[12]+1700485571&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~r))+i[3]+2399980690&4294967295,s=t+(o<<10&4294967295|o>>>22),o=r+(t^(s|~n))+i[10]+4293915773&4294967295,o=n+(s^((r=s+(o<<15&4294967295|o>>>17))|~t))+i[1]+2240044497&4294967295,o=t+(r^((n=r+(o<<21&4294967295|o>>>11))|~s))+i[8]+1873313359&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~r))+i[15]+4264355552&4294967295,s=t+(o<<10&4294967295|o>>>22),o=r+(t^(s|~n))+i[6]+2734768916&4294967295,o=n+(s^((r=s+(o<<15&4294967295|o>>>17))|~t))+i[13]+1309151649&4294967295,o=t+(r^((n=r+(o<<21&4294967295|o>>>11))|~s))+i[4]+4149444226&4294967295,o=s+(n^((t=n+(o<<6&4294967295|o>>>26))|~r))+i[11]+3174756917&4294967295,s=t+(o<<10&4294967295|o>>>22),o=r+(t^(s|~n))+i[2]+718787259&4294967295,o=n+(s^((r=s+(o<<15&4294967295|o>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+s&4294967295}function i(e,t){this.h=t;const n=[];let i=!0;for(let r=e.length-1;r>=0;r--){const o=0|e[r];i&&o==t||(n[r]=o,i=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return t.prototype[n].apply(e,r)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const i=t-this.blockSize,r=this.C;let o=this.h,s=0;for(;s<t;){if(0==o)for(;s<=i;)n(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[o++]=e.charCodeAt(s++),o==this.blockSize){n(this,r),o=0;break}}else for(;s<t;)if(r[o++]=e[s++],o==this.blockSize){n(this,r),o=0;break}}this.h=o,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let i=0;i<32;i+=8)e[t++]=this.g[n]>>>i&255;return e};var r={};function o(e){return-128<=e&&e<128?function(e,t){var n=r;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new i([0|e],e<0?-1:0)}):new i([0|e],e<0?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return a;if(e<0)return d(s(-e));const t=[];let n=1;for(let i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new i(t,0)}var a=o(0),l=o(1),u=o(16777216);function c(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){const t=e.g.length,n=[];for(let i=0;i<t;i++)n[i]=~e.g[i];return new i(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(c(t))throw Error("division by zero");if(c(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,i=t;i.l(e)<=0;)n=v(n),i=v(i);var r=y(n,1),o=y(i,1);for(i=y(i,2),n=y(n,2);!c(i);){var u=o.add(i);u.l(e)<=0&&(r=r.add(n),o=u),i=y(i,1),n=y(n,1)}return t=f(e,r.j(t)),new m(r,t)}for(r=a;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),i=(i=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,i-48),u=(o=s(n)).j(t);h(u)||u.l(e)>0;)u=(o=s(n-=i)).j(t);c(o)&&(o=l),r=r.add(o),e=f(e,u)}return new m(r,e)}function v(e){const t=e.g.length+1,n=[];for(let i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new i(n,e.h)}function y(e,t){const n=t>>5;t%=32;const r=e.g.length-n,o=[];for(let i=0;i<r;i++)o[i]=t>0?e.i(i+n)>>>t|e.i(i+n+1)<<32-t:e.i(i+n);return new i(o,e.h)}(e=i.prototype).m=function(){if(h(this))return-d(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const i=this.i(n);e+=(i>=0?i:4294967296+i)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(h(this))return"-"+d(this).toString(e);const t=s(Math.pow(e,6));var n=this;let i="";for(;;){const r=g(n,t).g;let o=(((n=f(n,r.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(c(n=r))return o+i;for(;o.length<6;)o="0"+o;i=o+i}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let r=0;for(let i=0;i<=t;i++){let t=r+(65535&this.i(i))+(65535&e.i(i)),o=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=o>>>16,t&=65535,o&=65535,n[i]=o<<16|t}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(this.l(u)<0&&e.l(u)<0)return s(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){const i=this.i(r)>>>16,o=65535&this.i(r),s=e.i(t)>>>16,a=65535&e.i(t);n[2*r+2*t]+=o*a,p(n,2*r+2*t),n[2*r+2*t+1]+=i*a,p(n,2*r+2*t+1),n[2*r+2*t+1]+=o*s,p(n,2*r+2*t+1),n[2*r+2*t+2]+=i*s,p(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new i(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new i(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new i(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,_a=wa.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.B,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=s,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const i=s(Math.pow(n,8));let r=a;for(let a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+o),n);o<8?(o=s(Math.pow(n,o)),r=r.j(o).add(s(e))):(r=r.j(i),r=r.add(s(e)))}return r},ya=wa.Integer=i}).apply("undefined"!==typeof ba?ba:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ka,Sa,Ea,xa,Ta,Ca,Ia,Na,Pa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Aa={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Pa&&Pa];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function i(e,i){if(i)e:{var r=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in r))break e;r=r[s]}(i=i(o=r[e=e[e.length-1]]))!=o&&null!=i&&t(r,e,{configurable:!0,writable:!0,value:i})}}i("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var r=r||{},o=this||self;function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=a).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function c(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,i){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return t.prototype[n].apply(e,r)}}var h="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function d(e){const t=e.length;if(t>0){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function f(e,t){for(let i=1;i<arguments.length;i++){const t=arguments[i];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const i=t.length||0;e.length=n+i;for(let r=0;r<i;r++)e[n+r]=t[r]}else e.push(t)}}function p(e){o.setTimeout(()=>{throw e},0)}function m(){var e=b;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new v,e=>e.reset());class v{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let y,_=!1,b=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},w=()=>{const e=Promise.resolve(void 0);y=()=>{e.then(k)}};function k(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}_=!1}function S(){this.u=this.u,this.C=this.C}function E(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},E.prototype.h=function(){this.defaultPrevented=!0};var x=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(n){}return e}();function T(e){return/^[\s\xa0]*$/.test(e)}function C(e,t){E.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}c(C,E),C.prototype.init=function(e,t){const n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&C.Z.h.call(this)},C.prototype.h=function(){C.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var I="closure_listenable_"+(1e6*Math.random()|0),N=0;function P(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ha=r,this.key=++N,this.da=this.fa=!1}function A(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function L(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function R(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(e,t){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)e[n]=i[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function D(e){this.src=e,this.g={},this.h=0}function j(e,t){const n=t.type;if(n in e.g){var i,r=e.g[n],o=Array.prototype.indexOf.call(r,t,void 0);(i=o>=0)&&Array.prototype.splice.call(r,o,1),i&&(A(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function z(e,t,n,i){for(let r=0;r<e.length;++r){const o=e[r];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==i)return r}return-1}D.prototype.add=function(e,t,n,i,r){const o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);const s=z(e,t,i,r);return s>-1?(t=e[s],n||(t.fa=!1)):((t=new P(t,this.src,o,!!i,r)).fa=n,e.push(t)),t};var F="closure_lm_"+(1e6*Math.random()|0),U={};function V(e,t,n,i,r){if(i&&i.once)return H(e,t,n,i,r);if(Array.isArray(t)){for(let o=0;o<t.length;o++)V(e,t[o],n,i,r);return null}return n=J(n),e&&e[I]?e.J(t,n,s(i)?!!i.capture:!!i,r):B(e,t,n,!1,i,r)}function B(e,t,n,i,r,o){if(!t)throw Error("Invalid event type");const a=s(r)?!!r.capture:!!r;let l=G(e);if(l||(e[F]=l=new D(e)),(n=l.add(t,n,i,a,o)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Z;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)x||(r=a),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(K(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function H(e,t,n,i,r){if(Array.isArray(t)){for(let o=0;o<t.length;o++)H(e,t[o],n,i,r);return null}return n=J(n),e&&e[I]?e.K(t,n,s(i)?!!i.capture:!!i,r):B(e,t,n,!0,i,r)}function q(e,t,n,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)q(e,t[o],n,i,r);else i=s(i)?!!i.capture:!!i,n=J(n),e&&e[I]?(e=e.i,(o=String(t).toString())in e.g&&((n=z(t=e.g[o],n,i,r))>-1&&(A(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[o],e.h--)))):e&&(e=G(e))&&(t=e.g[t.toString()],e=-1,t&&(e=z(t,n,i,r)),(n=e>-1?t[e]:null)&&W(n))}function W(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[I])j(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(K(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=G(t))?(j(n,e),0==n.h&&(n.src=null,t[F]=null)):A(e)}}}function K(e){return e in U?U[e]:U[e]="on"+e}function Z(e,t){if(e.da)e=!0;else{t=new C(t,this);const n=e.listener,i=e.ha||e.src;e.fa&&W(e),e=n.call(i,t)}return e}function G(e){return(e=e[F])instanceof D?e:null}var Q="__closure_events_fn_"+(1e9*Math.random()>>>0);function J(e){return"function"===typeof e?e:(e[Q]||(e[Q]=function(t){return e.handleEvent(t)}),e[Q])}function Y(){S.call(this),this.i=new D(this),this.M=this,this.G=null}function X(e,t){var n,i=e.G;if(i)for(n=[];i;i=i.G)n.push(i);if(e=e.M,i=t.type||t,"string"===typeof t)t=new E(t,e);else if(t instanceof E)t.target=t.target||e;else{var r=t;M(t=new E(i,e),r)}let o,s;if(r=!0,n)for(s=n.length-1;s>=0;s--)o=t.g=n[s],r=$(o,i,!0,t)&&r;if(o=t.g=e,r=$(o,i,!0,t)&&r,r=$(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)o=t.g=n[s],r=$(o,i,!1,t)&&r}function $(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let r=!0;for(let o=0;o<t.length;++o){const s=t[o];if(s&&!s.da&&s.capture==n){const t=s.listener,n=s.ha||s.src;s.fa&&j(e.i,s),r=!1!==t.call(n,i)&&r}}return r&&!i.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}c(Y,S),Y.prototype[I]=!0,Y.prototype.removeEventListener=function(e,t,n,i){q(this,e,t,n,i)},Y.prototype.N=function(){if(Y.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)A(n[e]);delete e.g[t],e.h--}}this.G=null},Y.prototype.J=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},Y.prototype.K=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};class te extends S{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){S.call(this),this.h=e,this.g={}}c(ne,S);var ie=[];function re(e){L(e.g,function(e,t){this.g.hasOwnProperty(t)&&W(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),re(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oe=o.JSON.stringify,se=o.JSON.parse,ae=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function le(){}function ue(){}var ce={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function he(){E.call(this,"d")}function de(){E.call(this,"c")}c(he,E),c(de,E);var fe={},pe=null;function me(){return pe=pe||new Y}function ge(e){E.call(this,fe.Ia,e)}function ve(e){const t=me();X(t,new ge(t))}function ye(e,t){E.call(this,fe.STAT_EVENT,e),this.stat=t}function _e(e){const t=me();X(t,new ye(t,e))}function be(e,t){E.call(this,fe.Ja,e),this.size=t}function we(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function ke(){this.g=!0}function Se(e,t,n,i){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const o=JSON.parse(t);if(o)for(e=0;e<o.length;e++)if(Array.isArray(o[e])){var n=o[e];if(!(n.length<2)){var i=n[1];if(Array.isArray(i)&&!(i.length<1)){var r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(let e=1;e<i.length;e++)i[e]=""}}}return oe(o)}catch(o){return t}}(e,n)+(i?" "+i:"")})}fe.Ia="serverreachability",c(ge,E),fe.STAT_EVENT="statevent",c(ye,E),fe.Ja="timingevent",c(be,E),ke.prototype.ua=function(){this.g=!1},ke.prototype.info=function(){};var Ee,xe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Te={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ce(){}function Ie(e){return encodeURIComponent(String(e))}function Ne(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Pe(e,t,n,i){this.j=e,this.i=t,this.l=n,this.S=i||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ae}function Ae(){this.i=null,this.g="",this.h=!1}c(Ce,le),Ce.prototype.g=function(){return new XMLHttpRequest},Ee=new Ce;var Le={},Re={};function Oe(e,t,n){e.M=1,e.A=ot(et(t)),e.u=n,e.R=!0,Me(e,null)}function Me(e,t){e.F=Date.now(),ze(e),e.B=et(e.A);var n=e.B,i=e.S;Array.isArray(i)||(i=[String(i)]),_t(n.i,"t",i),e.C=0,n=e.j.L,e.h=new Ae,e.g=sn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,i=e.ba;var r="readystatechange";Array.isArray(r)||(r&&(ie[0]=r.toString()),r=ie);for(let o=0;o<r.length;o++){const e=V(n,r[o],i||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?R(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ve(),function(e,t,n,i,r,o){e.info(function(){if(e.g)if(o){var s="",a=o.split("&");for(let e=0;e<a.length;e++){var l=a[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");s=t.length>=2&&"type"==t[1]?s+(e+"=")+l+"&":s+(e+"=redacted&")}}}else s=null;else s=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+s})}(e.i,e.v,e.B,e.l,e.S,e.u)}function De(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function je(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?Re:(n=Number(t.substring(n,i)),isNaN(n)?Le:(i+=1)+n>t.length?Re:(t=t.slice(i,i+n),e.C=i+n,t))}function ze(e){e.T=Date.now()+e.H,Fe(e,e.H)}function Fe(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=we(l(e.aa,e),t)}function Ue(e){e.D&&(o.clearTimeout(e.D),e.D=null)}function Ve(e){0==e.j.I||e.K||en(e.j,e)}function Be(e){Ue(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,re(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function He(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Ge(n.h,e)))if(!e.L&&Ge(n.h,e)&&3==n.I){try{var i=n.Ba.g.parse(t)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;$t(n),Ht(n)}Jt(n),_e(18)}}else n.xa=r[1],0<n.xa-n.K&&r[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=we(l(n.Va,n),6e3));Ze(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&$t(n),!T(t))for(r=n.Ba.g.parse(t),t=0;t<r.length;t++){let l=r[t];const c=l[0];if(!(c<=n.K))if(n.K=c,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const r=l[4];null!=r&&(n.za=r,n.j.info("SVER="+n.za));const c=l[5];null!=c&&"number"===typeof c&&c>0&&(i=1.5*c,n.O=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=i.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Qe(o,o.h),o.h=null))}if(i.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.wa=e,rt(i.J,i.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var s=e;if((i=n).na=on(i,i.L?i.ba:null,i.W),s.L){Je(i.h,s);var a=s,u=i.O;u&&(a.H=u),a.D&&(Ue(a),ze(a)),i.g=s}else Qt(i);n.i.length>0&&Wt(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):Bt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ve()}catch(c){}}Pe.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==zt(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const l=zt(this.g),u=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Ft(this.g)))){this.K||4!=l||7==u||ve(),Ue(this);var t=this.g.ca();this.X=t;var n=function(e){if(!De(e))return e.g.la();const t=Ft(e.g);if(""===t)return"";let n="";const i=t.length,r=4==zt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Be(e),Ve(e),"";e.h.i=new o.TextDecoder}for(let o=0;o<i;o++)e.h.h=!0,n+=e.h.i.decode(t[o],{stream:!(r&&o==i-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,i,r,o,s){e.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+o+" "+s})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var i,r=this.g;if((i=r.g?r.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(i)){var s=i;break t}}s=null}if(!(e=s)){this.o=!1,this.m=3,_e(12),Be(this),Ve(this);break e}Se(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,He(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=je(this,n),t==Re){4==l&&(this.m=4,_e(14),e=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}if(t==Le){this.m=4,_e(15),Se(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Se(this.i,this.l,t,null),He(this,t)}if(De(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,_e(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Yt(a),a.P=!0,_e(11))}}else Se(this.i,this.l,n,"[Invalid Chunked Response]"),Be(this),Ve(this)}else Se(this.i,this.l,n,null),He(this,n);4==l&&Be(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,ze(this)))}else(function(e){const t={};e=(e.g&&zt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(T(e[i]))continue;var n=Ne(e[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[r]||[];t[r]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,_e(12)):(this.m=0,_e(13)),Be(this),Ve(this)}}}catch(l){}},Pe.prototype.cancel=function(){this.K=!0,Be(this)},Pe.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ve(),_e(17)),Be(this),this.m=2,Ve(this)):Fe(this,this.T-e)};var qe=class{constructor(e,t){this.g=e,this.map=t}};function We(e){this.l=e||10,o.PerformanceNavigationTiming?e=(e=o.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ke(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ze(e){return e.h?1:e.g?e.g.size:0}function Ge(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Qe(e,t){e.g?e.g.add(t):e.h=t}function Je(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ye(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return d(e.i)}We.prototype.cancel=function(){if(this.i=Ye(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Xe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $e(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof $e?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,it(this,bt(e.i)),this.m=e.m):e&&(t=String(e).match(Xe))?(this.l=!1,tt(this,t[1]||"",!0),this.o=st(t[2]||""),this.g=st(t[3]||"",!0),nt(this,t[4]),this.h=st(t[5]||"",!0),it(this,t[6]||"",!0),this.m=st(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new $e(e)}function tt(e,t,n){e.j=n?st(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function it(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),_t(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=at(t,dt)),e.i=new pt(t,e.l))}function rt(e,t,n){e.i.set(t,n)}function ot(e){return rt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function st(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function at(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}$e.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(at(t,ut,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(at(t,ut,!0),"@"),e.push(Ie(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(at(n,"/"==n.charAt(0)?ht:ct,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",at(n,ft)),e.join("")},$e.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var i=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=i.charAt(0))if(this.g&&!this.h)i="/"+i;else{var r=t.h.lastIndexOf("/");-1!=r&&(i=t.h.slice(0,r+1)+i)}if(".."==(r=i)||"."==r)i="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");const e=[];for(let t=0;t<r.length;){const n=r[t++];"."==n?i&&t==r.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),i&&t==r.length&&e.push("")):(e.push(n),i=!0)}i=e.join("/")}else i=r}return n?t.h=i:n=""!==e.i.toString(),n?it(t,bt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ut=/[#\/\?@]/g,ct=/[#\?:]/g,ht=/[#\?]/g,dt=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const i=e[n].indexOf("=");let r,o=null;i>=0?(r=e[n].substring(0,i),o=e[n].substring(i+1)):r=e[n],t(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=wt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function vt(e,t){return mt(e),t=wt(e,t),e.g.has(t)}function yt(e,t){mt(e);let n=[];if("string"===typeof t)vt(e,t)&&(n=n.concat(e.g.get(wt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function _t(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(wt(e,t),d(n)),e.h+=n.length)}function bt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function wt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(o){}}function St(){this.g=new ae}function Et(e){this.i=e.Sb||null,this.h=e.ab||!1}function xt(e,t){Y.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Tt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Ct(e){e.readyState=4,e.l=null,e.j=null,e.B=null,It(e)}function It(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Nt(e){let t="";return L(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Pt(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Nt(n),"string"===typeof e?null!=n&&Ie(n):rt(e,t,n))}function At(e){Y.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=wt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,i){n.forEach(function(n){e.call(t,n,i,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,vt(this,e=wt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=yt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let i=0;i<t.length;i++){var n=t[i];const r=Ie(n);n=yt(this,n);for(let t=0;t<n.length;t++){let i=r;""!==n[t]&&(i+="="+Ie(n[t])),e.push(i)}}return this.i=e.join("&")},c(Et,le),Et.prototype.g=function(){return new xt(this.i,this.h)},c(xt,Y),(e=xt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,It(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Ct(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,It(this)),this.g&&(this.readyState=3,It(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ct(this):It(this),3==this.readyState&&Tt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Ct(this))},e.Na=function(e){this.g&&(this.response=e,Ct(this))},e.ga=function(){this.g&&Ct(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(xt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),c(At,Y);var Lt=/^https?$/i,Rt=["POST","PUT"];function Ot(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Mt(e),jt(e)}function Mt(e){e.A||(e.A=!0,X(e,"complete"),X(e,"error"))}function Dt(e){if(e.h&&"undefined"!=typeof r)if(e.v&&4==zt(e))setTimeout(e.Ca.bind(e),0);else if(X(e,"readystatechange"),4==zt(e)){e.h=!1;try{const r=e.ca();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){let t=String(e.D).match(Xe)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),i=!Lt.test(t?t.toLowerCase():"")}n=i}if(n)X(e,"complete"),X(e,"success");else{e.o=6;try{var s=zt(e)>2?e.g.statusText:""}catch(a){s=""}e.l=s+" ["+e.ca()+"]",Mt(e)}}finally{jt(e)}}}function jt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const i=e.g;e.g=null,t||X(e,"ready");try{i.onreadystatechange=null}catch(n){}}}function zt(e){return e.g?e.g.readyState:0}function Ft(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ut(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Vt(e){this.za=0,this.i=[],this.j=new ke,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ut("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ut("baseRetryDelayMs",5e3,e),this.Za=Ut("retryDelaySeedMs",1e4,e),this.Ta=Ut("forwardChannelMaxRetries",2,e),this.va=Ut("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new We(e&&e.concurrentRequestLimit),this.Ba=new St,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Bt(e){if(qt(e),3==e.I){var t=e.V++,n=et(e.J);if(rt(n,"SID",e.M),rt(n,"RID",t),rt(n,"TYPE","terminate"),Zt(e,n),(t=new Pe(e,e.j,t)).M=2,t.A=ot(et(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),"")}catch(i){}!n&&o.Image&&((new Image).src=t.A,n=!0),n||(t.g=sn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),ze(t)}rn(e)}function Ht(e){e.g&&(Yt(e),e.g.cancel(),e.g=null)}function qt(e){Ht(e),e.v&&(o.clearTimeout(e.v),e.v=null),$t(e),e.h.cancel(),e.m&&("number"===typeof e.m&&o.clearTimeout(e.m),e.m=null)}function Wt(e){if(!Ke(e.h)&&!e.m){e.m=!0;var t=e.Ea;y||w(),_||(y(),_=!0),b.add(t,e),e.D=0}}function Kt(e,t){var n;n=t?t.l:e.V++;const i=et(e.J);rt(i,"SID",e.M),rt(i,"RID",n),rt(i,"AID",e.K),Zt(e,i),e.u&&e.o&&Pt(i,e.u,e.o),n=new Pe(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Gt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Qe(e.h,n),Oe(n,i,t)}function Zt(e,t){e.H&&L(e.H,function(e,n){rt(t,n,e)}),e.l&&L({},function(e,n){rt(t,n,e)})}function Gt(e,t,n){n=Math.min(e.i.length,n);const i=e.l?l(e.l.Ka,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let u=0;u<n;u++){var o=r[u].g;const n=r[u].map;if((o-=t)<0)t=Math.max(0,r[u].g-100),l=!1;else try{o="req"+o+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let i=n;s(n)&&(i=oe(n)),e.push(o+t+"="+encodeURIComponent(i))}}catch(ul){throw e.push(o+"type="+encodeURIComponent("_badmap")),ul}}catch(ul){i&&i(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function Qt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;y||w(),_||(y(),_=!0),b.add(t,e),e.A=0}}function Jt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=we(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Yt(e){null!=e.B&&(o.clearTimeout(e.B),e.B=null)}function Xt(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);rt(t,"RID","rpc"),rt(t,"SID",e.M),rt(t,"AID",e.K),rt(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&rt(t,"TO",e.ia),rt(t,"TYPE","xmlhttp"),Zt(e,t),e.u&&e.o&&Pt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=ot(et(t)),n.u=null,n.R=!0,Me(n,e)}function $t(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){$t(e),Yt(e),e.g=null;var i=2}else{if(!Ge(e.h,t))return;n=t.G,Je(e.h,t),i=1}if(0!=e.I)if(t.o)if(1==i){n=t.u?t.u.length:0,t=Date.now()-t.F;var r=e.D;X(i=me(),new be(i,n)),Wt(e)}else Qt(e);else if(3==(r=t.m)||0==r&&t.X>0||!(1==i&&function(e,t){return!(Ze(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=we(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==i&&Jt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),r){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),i=e.Ua;const t=!i;i=new $e(i||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||tt(i,"https"),ot(i),t?function(e,t){const n=new ke;if(o.Image){const i=new Image;i.onload=u(kt,n,"TestLoadImage: loaded",!0,t,i),i.onerror=u(kt,n,"TestLoadImage: error",!1,t,i),i.onabort=u(kt,n,"TestLoadImage: abort",!1,t,i),i.ontimeout=u(kt,n,"TestLoadImage: timeout",!1,t,i),o.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=e}else t(!1)}(i.toString(),n):function(e,t){new ke;const n=new AbortController,i=setTimeout(()=>{n.abort(),kt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(i),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)}).catch(()=>{clearTimeout(i),kt(0,0,!1,t)})}(i.toString(),n)}else _e(2);e.I=0,e.l&&e.l.pa(t),rn(e),qt(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Ye(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.oa()}}function on(e,t,n){var i=n instanceof $e?et(n):new $e(n);if(""!=i.g)t&&(i.g=t+"."+i.g),nt(i,i.u);else{var r=o.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;const e=new $e(null);i&&tt(e,i),t&&(e.g=t),r&&nt(e,r),n&&(e.h=n),i=e}return n=e.G,t=e.wa,n&&t&&rt(i,n,t),rt(i,"VER",e.ka),Zt(e,i),i}function sn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new At(new Et({ab:n})):new At(e.ma)).Fa(e.L),t}function an(){}function ln(){}function un(e,t){Y.call(this),this.g=new Vt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!T(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new dn(this)}function cn(e){he.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function hn(){de.call(this),this.status=1}function dn(e){this.g=e}(e=At.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ee.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(s){return void Ot(this,s)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),r=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(Rt,t,void 0)>=0)||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(s){Ot(this,s)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,X(this,"complete"),X(this,"abort"),jt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jt(this,!0)),At.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Dt(this):this.Xa())},e.Xa=function(){Dt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return zt(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),se(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Vt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,i){_e(0),this.W=e,this.H=t||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.J=on(this,null,this.W),Wt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const r=new Pe(this,this.j,e);let o=this.o;if(this.U&&(o?(o=R(o),M(o,this.U)):o=this.U),null!==this.u||this.R||(r.J=o,o=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if((t+=i)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Gt(this,r,t),rt(n=et(this.J),"RID",e),rt(n,"CVER",22),this.G&&rt(n,"X-HTTP-Session-Id",this.G),Zt(this,n),o&&(this.R?t="headers="+Ie(Nt(o))+"&"+t:this.u&&Pt(n,this.u,o)),Qe(this.h,r),this.Ra&&rt(n,"TYPE","init"),this.S?(rt(n,"$req",t),rt(n,"SID","null"),r.U=!0,Oe(r,n,null)):Oe(r,n,t),this.I=2}}else 3==this.I&&(e?Kt(this,e):0==this.i.length||Ke(this.h)||Kt(this))},e.Da=function(){if(this.v=null,Xt(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=we(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_e(10),Ht(this),Xt(this))},e.Va=function(){null!=this.C&&(this.C=null,Ht(this),Jt(this),_e(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=an.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new un(e,t)},c(un,Y),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Bt(this.g)},un.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=oe(e),e=n);t.i.push(new qe(t.Ya++,e)),3==t.I&&Wt(t)},un.prototype.N=function(){this.g.l=null,delete this.j,Bt(this.g),delete this.g,un.Z.N.call(this)},c(cn,he),c(hn,de),c(dn,an),dn.prototype.ra=function(){X(this.g,"a")},dn.prototype.qa=function(e){X(this.g,new cn(e))},dn.prototype.pa=function(e){X(this.g,new hn)},dn.prototype.oa=function(){X(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,Na=Aa.createWebChannelTransport=function(){return new ln},Ia=Aa.getStatEventTarget=function(){return me()},Ca=Aa.Event=fe,Ta=Aa.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xe.NO_ERROR=0,xe.TIMEOUT=8,xe.HTTP_ERROR=6,xa=Aa.ErrorCode=xe,Te.COMPLETE="complete",Ea=Aa.EventType=Te,ue.EventType=ce,ce.OPEN="a",ce.CLOSE="b",ce.ERROR="c",ce.MESSAGE="d",Y.prototype.listen=Y.prototype.J,Sa=Aa.WebChannel=ue,Aa.FetchXmlHttpFactory=Et,At.prototype.listenOnce=At.prototype.K,At.prototype.getLastError=At.prototype.Ha,At.prototype.getLastErrorCode=At.prototype.ya,At.prototype.getStatus=At.prototype.ca,At.prototype.getResponseJson=At.prototype.La,At.prototype.getResponseText=At.prototype.la,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Fa,ka=Aa.XhrIo=At}).apply("undefined"!==typeof Pa?Pa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});class La{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}La.UNAUTHENTICATED=new La(null),La.GOOGLE_CREDENTIALS=new La("google-credentials-uid"),La.FIRST_PARTY=new La("first-party-uid"),La.MOCK_USER=new La("mock-user");let Ra="12.9.0";const Oa=new xn("@firebase/firestore");function Ma(){return Oa.logLevel}function Da(e){if(Oa.logLevel<=bn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Fa);Oa.debug("Firestore (".concat(Ra,"): ").concat(e),...r)}}function ja(e){if(Oa.logLevel<=bn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Fa);Oa.error("Firestore (".concat(Ra,"): ").concat(e),...r)}}function za(e){if(Oa.logLevel<=bn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Fa);Oa.warn("Firestore (".concat(Ra,"): ").concat(e),...r)}}function Fa(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ua(e,t,n){let i="Unexpected state";"string"==typeof t?i=t:n=t,Va(e,i,n)}function Va(e,t,n){let i="FIRESTORE (".concat(Ra,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{i+=" CONTEXT: "+JSON.stringify(n)}catch(e){i+=" CONTEXT: "+n}throw ja(i),new Error(i)}function Ba(e,t,n,i){let r="Unexpected state";"string"==typeof n?r=n:i=n,e||Va(t,r,i)}function Ha(e,t){return e}const qa={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wa extends rn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Ka{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Za{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ga{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(La.UNAUTHENTICATED))}shutdown(){}}class Qa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ja{constructor(e){this.t=e,this.currentUser=La.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ba(void 0===this.o,42304);let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Ka;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ka,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const t=r;e.enqueueRetryable(async()=>{await t.promise,await i(this.currentUser)})},s=e=>{Da("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Da("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ka)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Da("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ba("string"==typeof t.accessToken,31837,{l:t}),new Za(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ba(null===e||"string"==typeof e,2055,{h:e}),new La(e)}}class Ya{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=La.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Xa{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Ya(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(La.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $a{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class el{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ti(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ba(void 0===this.o,3512);const n=e=>{null!=e.error&&Da("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Da("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const i=e=>{Da("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>i(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?i(e):Da("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $a(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ba("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new $a(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function tl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}class nl{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=tl(40);for(let i=0;i<n.length;++i)t.length<20&&n[i]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return t}}function il(e,t){return e<t?-1:e>t?1:0}function rl(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.charAt(i),r=t.charAt(i);if(n!==r)return al(n)===al(r)?il(n,r):al(n)?1:-1}return il(e.length,t.length)}const ol=55296,sl=57343;function al(e){const t=e.charCodeAt(0);return t>=ol&&t<=sl}function ll(e,t,n){return e.length===t.length&&e.every((e,i)=>n(e,t[i]))}const ul="__name__";class cl{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ua(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Ua(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===cl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cl?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=cl.compareSegments(e.get(i),t.get(i));if(0!==n)return n}return il(e.length,t.length)}static compareSegments(e,t){const n=cl.isNumericId(e),i=cl.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?cl.extractNumericId(e).compare(cl.extractNumericId(t)):rl(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ya.fromString(e.substring(4,e.length-2))}}class hl extends cl{construct(e,t,n){return new hl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new Wa(qa.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));e.push(...r.split("/").filter(e=>e.length>0))}return new hl(e)}static emptyPath(){return new hl([])}}const dl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fl extends cl{construct(e,t,n){return new fl(e,t,n)}static isValidIdentifier(e){return dl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fl.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ul}static keyField(){return new fl([ul])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Wa(qa.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new Wa(qa.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Wa(qa.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(o=!o,i++):"."!==t||o?(n+=t,i++):(r(),i++)}if(r(),o)throw new Wa(qa.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fl(t)}static emptyPath(){return new fl([])}}class pl{constructor(e){this.path=e}static fromPath(e){return new pl(hl.fromString(e))}static fromName(e){return new pl(hl.fromString(e).popFirst(5))}static empty(){return new pl(hl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===hl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return hl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pl(new hl(e.slice()))}}function ml(e,t,n){if(!n)throw new Wa(qa.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function gl(e){if(!pl.isDocumentKey(e))throw new Wa(qa.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function vl(e){if(pl.isDocumentKey(e))throw new Wa(qa.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function yl(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function _l(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ua(12329,{type:typeof e})}function bl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wa(qa.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_l(e);throw new Wa(qa.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function wl(e,t){const n={typeString:e};return t&&(n.value=t),n}function kl(e,t){if(!yl(e))throw new Wa(qa.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,o="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n="JSON missing required field: '".concat(i,"'");break}const s=e[i];if(r&&typeof s!==r){n="JSON field '".concat(i,"' must be a ").concat(r,".");break}if(void 0!==o&&s!==o.value){n="Expected '".concat(i,"' field to equal '").concat(o.value,"'");break}}if(n)throw new Wa(qa.INVALID_ARGUMENT,n);return!0}const Sl=-62135596800,El=1e6;class xl{static now(){return xl.fromMillis(Date.now())}static fromDate(e){return xl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*El);return new xl(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Wa(qa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Wa(qa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sl)throw new Wa(qa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Wa(qa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/El}_compareTo(e){return this.seconds===e.seconds?il(this.nanoseconds,e.nanoseconds):il(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xl._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kl(e,xl._jsonSchema))return new xl(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sl;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xl._jsonSchemaVersion="firestore/timestamp/1.0",xl._jsonSchema={type:wl("string",xl._jsonSchemaVersion),seconds:wl("number"),nanoseconds:wl("number")};class Tl{static fromTimestamp(e){return new Tl(e)}static min(){return new Tl(new xl(0,0))}static max(){return new Tl(new xl(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Cl=-1;class Il{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}Il.UNKNOWN_ID=-1;function Nl(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Tl.fromTimestamp(1e9===i?new xl(n+1,0):new xl(n,i));return new Al(r,pl.empty(),t)}function Pl(e){return new Al(e.readTime,e.key,Cl)}class Al{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Al(Tl.min(),pl.empty(),Cl)}static max(){return new Al(Tl.max(),pl.empty(),Cl)}}function Ll(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=pl.comparator(e.documentKey,t.documentKey),0!==n?n:il(e.largestBatchId,t.largestBatchId))}const Rl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ol{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ml(e){if(e.code!==qa.FAILED_PRECONDITION||e.message!==Rl)throw e;Da("LocalStore","Unexpectedly lost primary lease")}class Dl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ua(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Dl((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Dl?t:Dl.resolve(t)}catch(e){return Dl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Dl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Dl.reject(t)}static resolve(e){return new Dl((t,n)=>{t(e)})}static reject(e){return new Dl((t,n)=>{n(e)})}static waitFor(e){return new Dl((t,n)=>{let i=0,r=0,o=!1;e.forEach(e=>{++i,e.next(()=>{++r,o&&r===i&&t()},e=>n(e))}),o=!0,r===i&&t()})}static or(e){let t=Dl.resolve(!1);for(const n of e)t=t.next(e=>e?Dl.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,i)=>{n.push(t.call(this,e,i))}),this.waitFor(n)}static mapArray(e,t){return new Dl((n,i)=>{const r=e.length,o=new Array(r);let s=0;for(let a=0;a<r;a++){const l=a;t(e[l]).next(e=>{o[l]=e,++s,s===r&&n(o)},e=>i(e))}})}static doWhile(e,t){return new Dl((n,i)=>{const r=()=>{!0===e()?t().next(()=>{r()},i):n()};r()})}}function jl(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zl(e){return"IndexedDbTransactionError"===e.name}class Fl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Fl.ce=-1;const Ul=-1;function Vl(e){return null==e}function Bl(e){return 0===e&&1/e==-1/0}function Hl(e){return"number"==typeof e&&Number.isInteger(e)&&!Bl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const ql="\x01";function Wl(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Zl(t)),t=Kl(e.get(n),t);return Zl(t)}function Kl(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const t=e.charAt(r);switch(t){case"\0":n+="\x01\x10";break;case ql:n+="\x01\x11";break;default:n+=t}}return n}function Zl(e){return e+ql+"\x01"}const Gl="remoteDocuments",Ql="owner",Jl="mutationQueues",Yl="mutations";const Xl="documentMutations",$l="remoteDocumentsV14",eu="remoteDocumentGlobal",tu="targets",nu="targetDocuments",iu="targetGlobal",ru="collectionParents",ou="clientMetadata",su="bundles",au="namedQueries",lu="indexConfiguration",uu="indexState",cu="indexEntries",hu="documentOverlays",du="globals",fu=[Jl,Yl,Xl,Gl,tu,Ql,iu,nu,ou,eu,ru,su,au],pu=[Jl,Yl,Xl,$l,tu,Ql,iu,nu,ou,eu,ru,su,au,hu],mu=pu,gu=[...mu,lu,uu,cu];function vu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function yu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function _u(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class bu{constructor(e,t){this.comparator=e,this.root=t||ku.EMPTY}insert(e,t){return new bu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ku.BLACK,null,null))}remove(e){return new bu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ku.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wu(this.root,e,this.comparator,!0)}}class wu{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ku{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:ku.RED,this.left=null!=i?i:ku.EMPTY,this.right=null!=r?r:ku.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new ku(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ku.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ku.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ku.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ku.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ua(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ua(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ua(27949);return e+(this.isRed()?0:1)}}ku.EMPTY=null,ku.RED=!0,ku.BLACK=!1,ku.EMPTY=new class{constructor(){this.size=0}get key(){throw Ua(57766)}get value(){throw Ua(16141)}get color(){throw Ua(16727)}get left(){throw Ua(29726)}get right(){throw Ua(36894)}copy(e,t,n,i,r){return this}insert(e,t,n){return new ku(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Su{constructor(e){this.comparator=e,this.data=new bu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Eu(this.data.getIterator())}getIteratorFrom(e){return new Eu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Su))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Su(this.comparator);return t.data=e,t}}class Eu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class xu{constructor(e){this.fields=e,e.sort(fl.comparator)}static empty(){return new xu([])}unionWith(e){let t=new Su(fl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new xu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ll(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Tu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Cu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Tu("Invalid base64 string: "+e):e}}(e);return new Cu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Cu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return il(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cu.EMPTY_BYTE_STRING=new Cu("");const Iu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nu(e){if(Ba(!!e,39018),"string"==typeof e){let t=0;const n=Iu.exec(e);if(Ba(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Pu(e.seconds),nanos:Pu(e.nanos)}}function Pu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Au(e){return"string"==typeof e?Cu.fromBase64String(e):Cu.fromUint8Array(e)}const Lu="server_timestamp",Ru="__type__",Ou="__previous_value__",Mu="__local_write_time__";function Du(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Ru])||void 0===t?void 0:t.stringValue)===Lu}function ju(e){const t=e.mapValue.fields[Ou];return Du(t)?ju(t):t}function zu(e){const t=Nu(e.mapValue.fields[Mu].timestampValue);return new xl(t.seconds,t.nanos)}class Fu{constructor(e,t,n,i,r,o,s,a,l,u,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=u,this.apiKey=c}}const Uu="(default)";class Vu{constructor(e,t){this.projectId=e,this.database=t||Uu}static empty(){return new Vu("","")}get isDefaultDatabase(){return this.database===Uu}isEqual(e){return e instanceof Vu&&e.projectId===this.projectId&&e.database===this.database}}const Bu="__type__",Hu="__max__",qu={mapValue:{fields:{__type__:{stringValue:Hu}}}},Wu="__vector__",Ku="value";function Zu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Du(e)?4:cc(e)?9007199254740991:lc(e)?10:11:Ua(28295,{value:e})}function Gu(e,t){if(e===t)return!0;const n=Zu(e);if(n!==Zu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return zu(e).isEqual(zu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Nu(e.timestampValue),i=Nu(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Au(e.bytesValue).isEqual(Au(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Pu(e.geoPointValue.latitude)===Pu(t.geoPointValue.latitude)&&Pu(e.geoPointValue.longitude)===Pu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Pu(e.integerValue)===Pu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Pu(e.doubleValue),i=Pu(t.doubleValue);return n===i?Bl(n)===Bl(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return ll(e.arrayValue.values||[],t.arrayValue.values||[],Gu);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(vu(n)!==vu(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Gu(n[r],i[r])))return!1;return!0}(e,t);default:return Ua(52216,{left:e})}}function Qu(e,t){return void 0!==(e.values||[]).find(e=>Gu(e,t))}function Ju(e,t){if(e===t)return 0;const n=Zu(e),i=Zu(t);if(n!==i)return il(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return il(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Pu(e.integerValue||e.doubleValue),i=Pu(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return Yu(e.timestampValue,t.timestampValue);case 4:return Yu(zu(e),zu(t));case 5:return rl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Au(e),i=Au(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let r=0;r<n.length&&r<i.length;r++){const e=il(n[r],i[r]);if(0!==e)return e}return il(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=il(Pu(e.latitude),Pu(t.latitude));return 0!==n?n:il(Pu(e.longitude),Pu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Xu(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,i,r,o;const s=e.fields||{},a=t.fields||{},l=null===(n=s[Ku])||void 0===n?void 0:n.arrayValue,u=null===(i=a[Ku])||void 0===i?void 0:i.arrayValue,c=il((null===l||void 0===l||null===(r=l.values)||void 0===r?void 0:r.length)||0,(null===u||void 0===u||null===(o=u.values)||void 0===o?void 0:o.length)||0);return 0!==c?c:Xu(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===qu.mapValue&&t===qu.mapValue)return 0;if(e===qu.mapValue)return 1;if(t===qu.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},o=Object.keys(r);i.sort(),o.sort();for(let s=0;s<i.length&&s<o.length;++s){const e=rl(i[s],o[s]);if(0!==e)return e;const t=Ju(n[i[s]],r[o[s]]);if(0!==t)return t}return il(i.length,o.length)}(e.mapValue,t.mapValue);default:throw Ua(23264,{he:n})}}function Yu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return il(e,t);const n=Nu(e),i=Nu(t),r=il(n.seconds,i.seconds);return 0!==r?r:il(n.nanos,i.nanos)}function Xu(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const e=Ju(n[r],i[r]);if(e)return e}return il(n.length,i.length)}function $u(e){return ec(e)}function ec(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Nu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Au(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return pl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=ec(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+="".concat(r,":").concat(ec(e.fields[r]));return n+"}"}(e.mapValue):Ua(61005,{value:e})}function tc(e){switch(Zu(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ju(e);return t?16+tc(t):16;case 5:return 2*e.stringValue.length;case 6:return Au(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+tc(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return yu(e.fields,(e,n)=>{t+=e.length+tc(n)}),t}(e.mapValue);default:throw Ua(13486,{value:e})}}function nc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ic(e){return!!e&&"integerValue"in e}function rc(e){return!!e&&"arrayValue"in e}function oc(e){return!!e&&"nullValue"in e}function sc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ac(e){return!!e&&"mapValue"in e}function lc(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Bu])||void 0===t?void 0:t.stringValue)===Wu}function uc(e){if(e.geoPointValue)return{geoPointValue:u({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:u({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return yu(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=uc(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=uc(e.arrayValue.values[n]);return t}return u({},e)}function cc(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Hu}class hc{constructor(e){this.value=e}static empty(){return new hc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ac(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uc(t)}setAll(e){let t=fl.emptyPath(),n={},i=[];e.forEach((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=uc(e):i.push(r.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());ac(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];ac(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){yu(t,(t,n)=>e[t]=n);for(const i of n)delete e[i]}clone(){return new hc(uc(this.value))}}function dc(e){const t=[];return yu(e.fields,(e,n)=>{const i=new fl([e]);if(ac(n)){const e=dc(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)}),new xu(t)}class fc{constructor(e,t,n,i,r,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=o,this.documentState=s}static newInvalidDocument(e){return new fc(e,0,Tl.min(),Tl.min(),Tl.min(),hc.empty(),0)}static newFoundDocument(e,t,n,i){return new fc(e,1,t,Tl.min(),n,i,0)}static newNoDocument(e,t){return new fc(e,2,t,Tl.min(),Tl.min(),hc.empty(),0)}static newUnknownDocument(e,t){return new fc(e,3,t,Tl.min(),Tl.min(),hc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class pc{constructor(e,t){this.position=e,this.inclusive=t}}function mc(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const o=t[r],s=e.position[r];if(i=o.field.isKeyField()?pl.comparator(pl.fromName(s.referenceValue),n.key):Ju(s,n.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function gc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Gu(e.position[n],t.position[n]))return!1;return!0}class vc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function yc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class _c{}class bc extends _c{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ic(e,t,n):"array-contains"===t?new Lc(e,n):"in"===t?new Rc(e,n):"not-in"===t?new Oc(e,n):"array-contains-any"===t?new Mc(e,n):new bc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Nc(e,n):new Pc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Ju(t,this.value)):null!==t&&Zu(this.value)===Zu(t)&&this.matchesComparison(Ju(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ua(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wc extends _c{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new wc(e,t)}matches(e){return kc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kc(e){return"and"===e.op}function Sc(e){return Ec(e)&&kc(e)}function Ec(e){for(const t of e.filters)if(t instanceof wc)return!1;return!0}function xc(e){if(e instanceof bc)return e.field.canonicalString()+e.op.toString()+$u(e.value);if(Sc(e))return e.filters.map(e=>xc(e)).join(",");{const t=e.filters.map(e=>xc(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Tc(e,t){return e instanceof bc?function(e,t){return t instanceof bc&&e.op===t.op&&e.field.isEqual(t.field)&&Gu(e.value,t.value)}(e,t):e instanceof wc?function(e,t){return t instanceof wc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,i)=>e&&Tc(n,t.filters[i]),!0)}(e,t):void Ua(19439)}function Cc(e){return e instanceof bc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat($u(e.value))}(e):e instanceof wc?function(e){return e.op.toString()+" {"+e.getFilters().map(Cc).join(" ,")+"}"}(e):"Filter"}class Ic extends bc{constructor(e,t,n){super(e,t,n),this.key=pl.fromName(n.referenceValue)}matches(e){const t=pl.comparator(e.key,this.key);return this.matchesComparison(t)}}class Nc extends bc{constructor(e,t){super(e,"in",t),this.keys=Ac("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Pc extends bc{constructor(e,t){super(e,"not-in",t),this.keys=Ac("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ac(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>pl.fromName(e.referenceValue))}class Lc extends bc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rc(t)&&Qu(t.arrayValue,this.value)}}class Rc extends bc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Qu(this.value.arrayValue,t)}}class Oc extends bc{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Qu(this.value.arrayValue,t)}}class Mc extends bc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Qu(this.value.arrayValue,e))}}class Dc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=o,this.endAt=s,this.Te=null}}function jc(e){return new Dc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function zc(e){const t=Ha(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>xc(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Vl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>$u(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>$u(e)).join(",")),t.Te=e}return t.Te}function Fc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!yc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Tc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!gc(e.startAt,t.startAt)&&gc(e.endAt,t.endAt)}function Uc(e){return pl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Vc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=o,this.startAt=s,this.endAt=a,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Bc(e,t,n,i,r,o,s,a){return new Vc(e,t,n,i,r,o,s,a)}function Hc(e){return new Vc(e)}function qc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Wc(e){return null!==e.collectionGroup}function Kc(e){const t=Ha(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const r of t.explicitOrderBy)t.Ie.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",i=function(e){let t=new Su(fl.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);i.forEach(i=>{e.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new vc(i,n))}),e.has(fl.keyField().canonicalString())||t.Ie.push(new vc(fl.keyField(),n))}return t.Ie}function Zc(e){const t=Ha(e);return t.Ee||(t.Ee=Gc(t,Kc(e))),t.Ee}function Gc(e,t){if("F"===e.limitType)return jc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new vc(e.field,t)});const n=e.endAt?new pc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new pc(e.startAt.position,e.startAt.inclusive):null;return jc(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Qc(e,t){const n=e.filters.concat([t]);return new Vc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Jc(e,t,n){return new Vc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Yc(e,t){return Fc(Zc(e),Zc(t))&&e.limitType===t.limitType}function Xc(e){return"".concat(zc(Zc(e)),"|lt:").concat(e.limitType)}function $c(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Cc(e)).join(", "),"]")),Vl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>$u(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>$u(e)).join(",")),"Target(".concat(t,")")}(Zc(e)),"; limitType=").concat(e.limitType,")")}function eh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):pl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Kc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=mc(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,Kc(e),t))&&!(e.endAt&&!function(e,t,n){const i=mc(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,Kc(e),t))}(e,t)}function th(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function nh(e){return(t,n)=>{let i=!1;for(const r of Kc(e)){const e=ih(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function ih(e,t,n){const i=e.field.isKeyField()?pl.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?Ju(i,r):Ua(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Ua(19790,{direction:e.dir})}}class rh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yu(this.inner,(t,n)=>{for(const[i,r]of n)e(i,r)})}isEmpty(){return _u(this.inner)}size(){return this.innerSize}}const oh=new bu(pl.comparator);function sh(){return oh}const ah=new bu(pl.comparator);function lh(){let e=ah;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.insert(r.key,r);return e}function uh(e){let t=ah;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ch(){return dh()}function hh(){return dh()}function dh(){return new rh(e=>e.toString(),(e,t)=>e.isEqual(t))}const fh=new bu(pl.comparator),ph=new Su(pl.comparator);function mh(){let e=ph;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.add(r);return e}const gh=new Su(il);function vh(){return gh}function yh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bl(t)?"-0":t}}function _h(e){return{integerValue:""+e}}function bh(e,t){return Hl(t)?_h(t):yh(e,t)}class wh{constructor(){this._=void 0}}function kh(e,t,n){return e instanceof xh?function(e,t){const n={fields:{[Ru]:{stringValue:Lu},[Mu]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Du(t)&&(t=ju(t)),t&&(n.fields[Ou]=t),{mapValue:n}}(n,t):e instanceof Th?Ch(e,t):e instanceof Ih?Nh(e,t):function(e,t){const n=Eh(e,t),i=Ah(n)+Ah(e.Ae);return ic(n)&&ic(e.Ae)?_h(i):yh(e.serializer,i)}(e,t)}function Sh(e,t,n){return e instanceof Th?Ch(e,t):e instanceof Ih?Nh(e,t):n}function Eh(e,t){return e instanceof Ph?function(e){return ic(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class xh extends wh{}class Th extends wh{constructor(e){super(),this.elements=e}}function Ch(e,t){const n=Lh(t);for(const i of e.elements)n.some(e=>Gu(e,i))||n.push(i);return{arrayValue:{values:n}}}class Ih extends wh{constructor(e){super(),this.elements=e}}function Nh(e,t){let n=Lh(t);for(const i of e.elements)n=n.filter(e=>!Gu(e,i));return{arrayValue:{values:n}}}class Ph extends wh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ah(e){return Pu(e.integerValue||e.doubleValue)}function Lh(e){return rc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Rh{constructor(e,t){this.field=e,this.transform=t}}class Oh{constructor(e,t){this.version=e,this.transformResults=t}}class Mh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mh}static exists(e){return new Mh(void 0,e)}static updateTime(e){return new Mh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class jh{}function zh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Gh(e.key,Mh.none()):new Hh(e.key,e.data,Mh.none());{const n=e.data,i=hc.empty();let r=new Su(fl.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new qh(e.key,i,new xu(r.toArray()),Mh.none())}}function Fh(e,t,n){e instanceof Hh?function(e,t,n){const i=e.value.clone(),r=Kh(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof qh?function(e,t,n){if(!Dh(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=Kh(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(Wh(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Uh(e,t,n,i){return e instanceof Hh?function(e,t,n,i){if(!Dh(e.precondition,t))return n;const r=e.value.clone(),o=Zh(e.fieldTransforms,i,t);return r.setAll(o),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof qh?function(e,t,n,i){if(!Dh(e.precondition,t))return n;const r=Zh(e.fieldTransforms,i,t),o=t.data;return o.setAll(Wh(e)),o.setAll(r),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,i):function(e,t,n){return Dh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Vh(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),r=Eh(i.transform,e||null);null!=r&&(null===n&&(n=hc.empty()),n.set(i.field,r))}return n||null}function Bh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ll(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Th&&t instanceof Th||e instanceof Ih&&t instanceof Ih?ll(e.elements,t.elements,Gu):e instanceof Ph&&t instanceof Ph?Gu(e.Ae,t.Ae):e instanceof xh&&t instanceof xh}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Hh extends jh{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qh extends jh{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Wh(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function Kh(e,t,n){const i=new Map;Ba(e.length===n.length,32656,{Ve:n.length,de:e.length});for(let r=0;r<n.length;r++){const o=e[r],s=o.transform,a=t.data.field(o.field);i.set(o.field,Sh(s,a,n[r]))}return i}function Zh(e,t,n){const i=new Map;for(const r of e){const e=r.transform,o=n.data.field(r.field);i.set(r.field,kh(e,o,t))}return i}class Gh extends jh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qh extends jh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Jh{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const t=this.mutations[i];t.key.isEqual(e.key)&&Fh(t,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Uh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Uh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=hh();return this.mutations.forEach(i=>{const r=e.get(i.key),o=r.overlayedDocument;let s=this.applyToLocalView(o,r.mutatedFields);s=t.has(i.key)?null:s;const a=zh(o,s);null!==a&&n.set(i.key,a),o.isValidDocument()||o.convertToNoDocument(Tl.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mh())}isEqual(e){return this.batchId===e.batchId&&ll(this.mutations,e.mutations,(e,t)=>Bh(e,t))&&ll(this.baseMutations,e.baseMutations,(e,t)=>Bh(e,t))}}class Yh{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Ba(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=fh;const r=e.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,n[o].version);return new Yh(e,t,n,i)}}class Xh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class $h{constructor(e,t){this.count=e,this.unchangedNames=t}}var ed,td;function nd(e){switch(e){case qa.OK:return Ua(64938);case qa.CANCELLED:case qa.UNKNOWN:case qa.DEADLINE_EXCEEDED:case qa.RESOURCE_EXHAUSTED:case qa.INTERNAL:case qa.UNAVAILABLE:case qa.UNAUTHENTICATED:return!1;case qa.INVALID_ARGUMENT:case qa.NOT_FOUND:case qa.ALREADY_EXISTS:case qa.PERMISSION_DENIED:case qa.FAILED_PRECONDITION:case qa.ABORTED:case qa.OUT_OF_RANGE:case qa.UNIMPLEMENTED:case qa.DATA_LOSS:return!0;default:return Ua(15467,{code:e})}}function id(e){if(void 0===e)return ja("GRPC error has no .code"),qa.UNKNOWN;switch(e){case ed.OK:return qa.OK;case ed.CANCELLED:return qa.CANCELLED;case ed.UNKNOWN:return qa.UNKNOWN;case ed.DEADLINE_EXCEEDED:return qa.DEADLINE_EXCEEDED;case ed.RESOURCE_EXHAUSTED:return qa.RESOURCE_EXHAUSTED;case ed.INTERNAL:return qa.INTERNAL;case ed.UNAVAILABLE:return qa.UNAVAILABLE;case ed.UNAUTHENTICATED:return qa.UNAUTHENTICATED;case ed.INVALID_ARGUMENT:return qa.INVALID_ARGUMENT;case ed.NOT_FOUND:return qa.NOT_FOUND;case ed.ALREADY_EXISTS:return qa.ALREADY_EXISTS;case ed.PERMISSION_DENIED:return qa.PERMISSION_DENIED;case ed.FAILED_PRECONDITION:return qa.FAILED_PRECONDITION;case ed.ABORTED:return qa.ABORTED;case ed.OUT_OF_RANGE:return qa.OUT_OF_RANGE;case ed.UNIMPLEMENTED:return qa.UNIMPLEMENTED;case ed.DATA_LOSS:return qa.DATA_LOSS;default:return Ua(39323,{code:e})}}(td=ed||(ed={}))[td.OK=0]="OK",td[td.CANCELLED=1]="CANCELLED",td[td.UNKNOWN=2]="UNKNOWN",td[td.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",td[td.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",td[td.NOT_FOUND=5]="NOT_FOUND",td[td.ALREADY_EXISTS=6]="ALREADY_EXISTS",td[td.PERMISSION_DENIED=7]="PERMISSION_DENIED",td[td.UNAUTHENTICATED=16]="UNAUTHENTICATED",td[td.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",td[td.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",td[td.ABORTED=10]="ABORTED",td[td.OUT_OF_RANGE=11]="OUT_OF_RANGE",td[td.UNIMPLEMENTED=12]="UNIMPLEMENTED",td[td.INTERNAL=13]="INTERNAL",td[td.UNAVAILABLE=14]="UNAVAILABLE",td[td.DATA_LOSS=15]="DATA_LOSS";let rd=null;function od(){return new TextEncoder}const sd=new ya([4294967295,4294967295],0);function ad(e){const t=od().encode(e),n=new _a;return n.update(t),new Uint8Array(n.digest())}function ld(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new ya([n,i],0),new ya([r,o],0)]}class ud{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new cd("Invalid padding: ".concat(t));if(n<0)throw new cd("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new cd("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new cd("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=ya.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(ya.fromNumber(n)));return 1===i.compare(sd)&&(i=new ya([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=ad(e),[n,i]=ld(t);for(let r=0;r<this.hashCount;r++){const e=this.ye(n,i,r);if(!this.we(e))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new ud(r,i,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.ge)return;const t=ad(e),[n,i]=ld(t);for(let r=0;r<this.hashCount;r++){const e=this.ye(n,i,r);this.be(e)}}be(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class cd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hd{constructor(e,t,n,i,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,dd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new hd(Tl.min(),i,new bu(il),sh(),mh())}}class dd{constructor(e,t,n,i,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new dd(n,t,mh(),mh(),mh())}}class fd{constructor(e,t,n,i){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=i}}class pd{constructor(e,t){this.targetId=e,this.Ce=t}}class md{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Cu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class gd{constructor(){this.ve=0,this.Fe=_d(),this.Me=Cu.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=mh(),t=mh(),n=mh();return this.Fe.forEach((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Ua(38017,{changeType:r})}}),new dd(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=_d()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ba(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class vd{constructor(e){this.Ge=e,this.ze=new Map,this.je=sh(),this.He=yd(),this.Je=yd(),this.Ze=new bu(il)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Ua(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(Uc(o))if(0===n){const e=new pl(o.path);this.et(t,e,fc.newNoDocument(e,Tl.min()))}else Ba(1===n,20013,{expectedCount:n});else{const i=this._t(t);if(i!==n){var r;const n=this.ut(e),o=n?this.ct(n,e,i):1;if(0!==o){this.it(t);const e=2===o?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null===(r=rd)||void 0===r||r.lt(function(e,t,n,i,r){var o,s,a,l,u;const c={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(c.bloomFilter={applied:0===r,hashCount:null!==(o=null===h||void 0===h?void 0:h.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(s=null===h||void 0===h||null===(a=h.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==s?s:0,padding:null!==(l=null===h||void 0===h||null===(u=h.bits)||void 0===u?void 0:u.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===i||void 0===i?void 0:i.mightContain(e))&&void 0!==t&&t}}),c}(i,e.Ce,this.Ge.ht(),n,o))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=t;let o,s;try{o=Au(n).toUint8Array()}catch(e){if(e instanceof Tu)return za("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new ud(o,i,r)}catch(e){return za(e instanceof cd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.ge?null:s}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let i=0;return n.forEach(n=>{const r=this.Ge.ht(),o="projects/".concat(r.projectId,"/databases/").concat(r.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.et(t,n,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((n,i)=>{const r=this.ot(i);if(r){if(n.current&&Uc(r.target)){const t=new pl(r.target.path);this.It(t).has(i)||this.Et(i,t)||this.et(i,t,fc.newNoDocument(t,e))}n.Be&&(t.set(i,n.ke()),n.Ke())}});let n=mh();this.Je.forEach((e,t)=>{let i=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(i=!1,!1)}),i&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const i=new hd(e,t,this.Ze,this.je,n);return this.je=sh(),this.He=yd(),this.Je=yd(),this.Ze=new bu(il),i}Ye(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new gd,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Su(il),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Su(il),this.He=this.He.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Da("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gd),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function yd(){return new bu(pl.comparator)}function _d(){return new bu(pl.comparator)}const bd={asc:"ASCENDING",desc:"DESCENDING"},wd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kd={and:"AND",or:"OR"};class Sd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ed(e,t){return e.useProto3Json||Vl(t)?t:{value:t}}function xd(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Td(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Cd(e,t){return xd(e,t.toTimestamp())}function Id(e){return Ba(!!e,49232),Tl.fromTimestamp(function(e){const t=Nu(e);return new xl(t.seconds,t.nanos)}(e))}function Nd(e,t){return Pd(e,t).canonicalString()}function Pd(e,t){const n=function(e){return new hl(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ad(e){const t=hl.fromString(e);return Ba(Yd(t),10190,{key:t.toString()}),t}function Ld(e,t){return Nd(e.databaseId,t.path)}function Rd(e,t){const n=Ad(t);if(n.get(1)!==e.databaseId.projectId)throw new Wa(qa.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Wa(qa.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new pl(jd(n))}function Od(e,t){return Nd(e.databaseId,t)}function Md(e){const t=Ad(e);return 4===t.length?hl.emptyPath():jd(t)}function Dd(e){return new hl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jd(e){return Ba(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function zd(e,t,n){return{name:Ld(e,t),fields:n.value.mapValue.fields}}function Fd(e,t){let n;if(t instanceof Hh)n={update:zd(e,t.key,t.value)};else if(t instanceof Gh)n={delete:Ld(e,t.key)};else if(t instanceof qh)n={update:zd(e,t.key,t.data),updateMask:Jd(t.fieldMask)};else{if(!(t instanceof Qh))return Ua(16599,{dt:t.type});n={verify:Ld(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof xh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Th)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ih)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ph)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Ua(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Cd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ua(27497)}(e,t.precondition)),n}function Ud(e,t){return{documents:[Od(e,t.path)]}}function Vd(e,t){const n={structuredQuery:{}},i=t.path;let r;null!==t.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Od(e,r);const o=function(e){if(0!==e.length)return Qd(wc.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Zd(e.field),direction:qd(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Ed(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:r}}function Bd(e){let t=Md(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ba(1===i,65062);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Hd(e);return t instanceof wc&&Sc(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map(e=>function(e){return new vc(Gd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Vl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new pc(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new pc(n,t)}(n.endAt)),Bc(t,r,s,o,a,"F",l,u)}function Hd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Gd(e.unaryFilter.field);return bc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Gd(e.unaryFilter.field);return bc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Gd(e.unaryFilter.field);return bc.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Gd(e.unaryFilter.field);return bc.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ua(61313);default:return Ua(60726)}}(e):void 0!==e.fieldFilter?function(e){return bc.create(Gd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ua(58110);default:return Ua(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return wc.create(e.compositeFilter.filters.map(e=>Hd(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ua(1026)}}(e.compositeFilter.op))}(e):Ua(30097,{filter:e})}function qd(e){return bd[e]}function Wd(e){return wd[e]}function Kd(e){return kd[e]}function Zd(e){return{fieldPath:e.canonicalString()}}function Gd(e){return fl.fromServerFormat(e.fieldPath)}function Qd(e){return e instanceof bc?function(e){if("=="===e.op){if(sc(e.value))return{unaryFilter:{field:Zd(e.field),op:"IS_NAN"}};if(oc(e.value))return{unaryFilter:{field:Zd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(sc(e.value))return{unaryFilter:{field:Zd(e.field),op:"IS_NOT_NAN"}};if(oc(e.value))return{unaryFilter:{field:Zd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zd(e.field),op:Wd(e.op),value:e.value}}}(e):e instanceof wc?function(e){const t=e.getFilters().map(e=>Qd(e));return 1===t.length?t[0]:{compositeFilter:{op:Kd(e.op),filters:t}}}(e):Ua(54877,{filter:e})}function Jd(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Yd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Xd(e){return!!e&&"function"==typeof e._toProto&&"ProtoValue"===e._protoValueType}class $d{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Tl.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Tl.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Cu.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new $d(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ef{constructor(e){this.yt=e}}function tf(e){const t=Bd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Jc(t,t.limit,"L"):t}class nf{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Pu(e.integerValue));else if("doubleValue"in e){const n=Pu(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Bl(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Nu(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Au(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?cc(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):lc(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):Ua(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const n=e.fields||{};this.Ft(t,55);for(const i of Object.keys(n))this.Ot(i,t),this.Ct(n[i],t)}kt(e,t){var n;const i=e.fields||{};this.Ft(t,53);const r=Ku,o=(null===(n=i[r].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Pu(o)),this.Ot(r,t),this.Ct(i[r],t)}qt(e,t){const n=e.values||[];this.Ft(t,50);for(const i of n)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),pl.fromName(e).path.forEach(e=>{this.Ft(t,60),this.$t(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}nf.Wt=new nf;class rf{constructor(){this.Sn=new of}addToCollectionParentIndex(e,t){return this.Sn.add(t),Dl.resolve()}getCollectionParents(e,t){return Dl.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Dl.resolve()}deleteFieldIndex(e,t){return Dl.resolve()}deleteAllFieldIndexes(e){return Dl.resolve()}createTargetIndexes(e,t){return Dl.resolve()}getDocumentsMatchingTarget(e,t){return Dl.resolve(null)}getIndexType(e,t){return Dl.resolve(0)}getFieldIndexes(e,t){return Dl.resolve([])}getNextCollectionGroupToUpdate(e){return Dl.resolve(null)}getMinOffset(e,t){return Dl.resolve(Al.min())}getMinOffsetFromCollectionGroup(e,t){return Dl.resolve(Al.min())}updateCollectionGroup(e,t,n){return Dl.resolve()}updateIndexEntries(e,t){return Dl.resolve()}}class of{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Su(hl.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Su(hl.comparator)).toArray()}}new Uint8Array(0);const sf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},af=41943040;class lf{static withCacheSize(e){return new lf(e,lf.DEFAULT_COLLECTION_PERCENTILE,lf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}lf.DEFAULT_COLLECTION_PERCENTILE=10,lf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lf.DEFAULT=new lf(af,lf.DEFAULT_COLLECTION_PERCENTILE,lf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lf.DISABLED=new lf(-1,0,0);class uf{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new uf(0)}static ar(){return new uf(-1)}}const cf="LruGarbageCollector",hf=1048576;function df(e,t){let[n,i]=e,[r,o]=t;const s=il(n,r);return 0===s?il(i,o):s}class ff{constructor(e){this.Pr=e,this.buffer=new Su(df),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();df(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Ar(e){Da(cf,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){zl(e)?Da(cf,"Ignoring IndexedDB error during garbage collection: ",e):await Ml(e)}await this.Ar(3e5)})}}class mf{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Dl.resolve(Fl.ce);const n=new ff(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.mr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Da("LruGarbageCollector","Garbage collection skipped; disabled"),Dl.resolve(sf)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Da("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),sf):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,i,r,o,s,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Da("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),i=this.params.maximumSequenceNumbersToCollect):i=t,o=Date.now(),this.nthSequenceNumber(e,i))).next(i=>(n=i,s=Date.now(),this.removeTargets(e,n,t))).next(t=>(r=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Ma()<=bn.DEBUG&&Da("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-u,"ms\n\tDetermined least recently used ").concat(i," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(r," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-u,"ms")),Dl.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:e})))}}function gf(e,t){return new mf(e,t)}class vf{constructor(){this.changes=new rh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Dl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _f{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Uh(n.mutation,e,xu.empty(),xl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,mh()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mh();const i=ch();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(e=>{let t=lh();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ch();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,mh()))}populateOverlays(e,t,n){const i=[];return n.forEach(e=>{t.has(e)||i.push(e)}),this.documentOverlayCache.getOverlays(e,i).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,i){let r=sh();const o=dh(),s=dh();return t.forEach((e,t)=>{const s=n.get(t.key);i.has(t.key)&&(void 0===s||s.mutation instanceof qh)?r=r.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),Uh(s.mutation,t,s.mutation.getFieldMask(),xl.now())):o.set(t.key,xu.empty())}),this.recalculateAndSaveOverlays(e,r).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return s.set(e,new yf(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),s))}recalculateAndSaveOverlays(e,t){const n=dh();let i=new bu((e,t)=>e-t),r=mh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const r of e)r.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||xu.empty();s=r.applyToLocalView(o,s),n.set(e,s);const a=(i.get(r.batchId)||mh()).add(e);i=i.insert(r.batchId,a)})}).next(()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const i=s.getNext(),a=i.key,l=i.value,u=hh();l.forEach(e=>{if(!r.has(e)){const i=zh(t.get(e),n.get(e));null!==i&&u.set(e,i),r=r.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,a,u))}return Dl.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,i){return function(e){return pl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):Dl.resolve(ch());let s=Cl,a=r;return o.next(t=>Dl.forEach(t,(t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),r.get(t)?Dl.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,r)).next(()=>this.computeViews(e,a,t,mh())).next(e=>({batchId:s,changes:uh(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pl(t)).next(e=>{let t=lh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const r=t.collectionGroup;let o=lh();return this.indexManager.getCollectionParents(e,r).next(s=>Dl.forEach(s,s=>{const a=function(e,t){return new Vc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,a,n,i).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,i))).next(e=>{r.forEach((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,fc.newInvalidDocument(i)))});let n=lh();return e.forEach((e,i)=>{const o=r.get(e);void 0!==o&&Uh(o.mutation,i,xu.empty(),xl.now()),eh(t,i)&&(n=n.insert(e,i))}),n})}}class bf{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Dl.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Id(e.createTime)}}(t)),Dl.resolve()}getNamedQuery(e,t){return Dl.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(e){return{name:e.name,query:tf(e.bundledQuery),readTime:Id(e.readTime)}}(t)),Dl.resolve()}}class wf{constructor(){this.overlays=new bu(pl.comparator),this.Lr=new Map}getOverlay(e,t){return Dl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ch();return Dl.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,i)=>{this.bt(e,t,i)}),Dl.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Lr.get(n);return void 0!==i&&(i.forEach(e=>this.overlays=this.overlays.remove(e)),this.Lr.delete(n)),Dl.resolve()}getOverlaysForCollection(e,t,n){const i=ch(),r=t.length+1,o=new pl(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return Dl.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new bu((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=ch(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=ch(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=i)););return Dl.resolve(s)}bt(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.Lr.get(i.largestBatchId).delete(n.key);this.Lr.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Xh(t,n));let r=this.Lr.get(t);void 0===r&&(r=mh(),this.Lr.set(t,r)),this.Lr.set(t,r.add(n.key))}}class kf{constructor(){this.sessionToken=Cu.EMPTY_BYTE_STRING}getSessionToken(e){return Dl.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Dl.resolve()}}class Sf{constructor(){this.kr=new Su(Ef.Kr),this.qr=new Su(Ef.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const n=new Ef(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new Ef(e,t))}Qr(e,t){e.forEach(e=>this.removeReference(e,t))}Gr(e){const t=new pl(new hl([])),n=new Ef(t,e),i=new Ef(t,e+1),r=[];return this.qr.forEachInRange([n,i],e=>{this.Wr(e),r.push(e.key)}),r}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new pl(new hl([])),n=new Ef(t,e),i=new Ef(t,e+1);let r=mh();return this.qr.forEachInRange([n,i],e=>{r=r.add(e.key)}),r}containsKey(e){const t=new Ef(e,0),n=this.kr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ef{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return pl.comparator(e.key,t.key)||il(e.Hr,t.Hr)}static Ur(e,t){return il(e.Hr,t.Hr)||pl.comparator(e.key,t.key)}}class xf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Su(Ef.Kr)}checkEmpty(e){return Dl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Jh(r,t,n,i);this.mutationQueue.push(o);for(const s of i)this.Jr=this.Jr.add(new Ef(s.key,r)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Dl.resolve(o)}lookupMutationBatch(e,t){return Dl.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Xr(n),r=i<0?0:i;return Dl.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Dl.resolve(0===this.mutationQueue.length?Ul:this.Yn-1)}getAllMutationBatches(e){return Dl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ef(t,0),i=new Ef(t,Number.POSITIVE_INFINITY),r=[];return this.Jr.forEachInRange([n,i],e=>{const t=this.Zr(e.Hr);r.push(t)}),Dl.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Su(il);return t.forEach(e=>{const t=new Ef(e,0),i=new Ef(e,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([t,i],e=>{n=n.add(e.Hr)})}),Dl.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;pl.isDocumentKey(r)||(r=r.child(""));const o=new Ef(new pl(r),0);let s=new Su(il);return this.Jr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(s=s.add(e.Hr)),!0)},o),Dl.resolve(this.Yr(s))}Yr(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ba(0===this.ei(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Jr;return Dl.forEach(t.mutations,i=>{const r=new Ef(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=n})}nr(e){}containsKey(e,t){const n=new Ef(t,0),i=this.Jr.firstAfterOrEqual(n);return Dl.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Dl.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Tf{constructor(e){this.ti=e,this.docs=new bu(pl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,o=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Dl.resolve(n?n.document.mutableCopy():fc.newInvalidDocument(t))}getEntries(e,t){let n=sh();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():fc.newInvalidDocument(e))}),Dl.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=sh();const o=t.path,s=new pl(o.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Ll(Pl(s),n)<=0||(i.has(s.key)||eh(t,s))&&(r=r.insert(s.key,s.mutableCopy()))}return Dl.resolve(r)}getAllFromCollectionGroup(e,t,n,i){Ua(9500)}ni(e,t){return Dl.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Cf(this)}getSize(e){return Dl.resolve(this.size)}}class Cf extends vf{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(n)}),Dl.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class If{constructor(e){this.persistence=e,this.ri=new rh(e=>zc(e),Fc),this.lastRemoteSnapshotVersion=Tl.min(),this.highestTargetId=0,this.ii=0,this.si=new Sf,this.targetCount=0,this.oi=uf._r()}forEachTarget(e,t){return this.ri.forEach((e,n)=>t(n)),Dl.resolve()}getLastRemoteSnapshotVersion(e){return Dl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Dl.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Dl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),Dl.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new uf(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Dl.resolve()}updateTargetData(e,t){return this.lr(t),Dl.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Dl.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.ri.forEach((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.ri.delete(o),r.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),Dl.waitFor(r).next(()=>i)}getTargetCount(e){return Dl.resolve(this.targetCount)}getTargetData(e,t){const n=this.ri.get(t)||null;return Dl.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),Dl.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach(t=>{r.push(i.markPotentiallyOrphaned(e,t))}),Dl.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Dl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.si.jr(t);return Dl.resolve(n)}containsKey(e,t){return Dl.resolve(this.si.containsKey(t))}}class Nf{constructor(e,t){this._i={},this.overlays={},this.ai=new Fl(0),this.ui=!1,this.ui=!0,this.ci=new kf,this.referenceDelegate=e(this),this.li=new If(this),this.indexManager=new rf,this.remoteDocumentCache=function(e){return new Tf(e)}(e=>this.referenceDelegate.hi(e)),this.serializer=new ef(t),this.Pi=new bf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new xf(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){Da("MemoryPersistence","Starting transaction:",e);const i=new Pf(this.ai.next());return this.referenceDelegate.Ti(),n(i).next(e=>this.referenceDelegate.Ii(i).next(()=>e)).toPromise().then(e=>(i.raiseOnCommittedEvent(),e))}Ei(e,t){return Dl.or(Object.values(this._i).map(n=>()=>n.containsKey(e,t)))}}class Pf extends Ol{constructor(e){super(),this.currentSequenceNumber=e}}class Af{constructor(e){this.persistence=e,this.Ri=new Sf,this.Ai=null}static Vi(e){return new Af(e)}get di(){if(this.Ai)return this.Ai;throw Ua(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),Dl.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),Dl.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Dl.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(e=>this.di.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.di.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dl.forEach(this.di,n=>{const i=pl.fromPath(n);return this.mi(e,i).next(e=>{e||t.removeEntry(i,Tl.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return Dl.or([()=>Dl.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Lf{constructor(e,t){this.persistence=e,this.fi=new rh(e=>Wl(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=gf(this,t)}static Vi(e,t){return new Lf(e,t)}Ti(){}Ii(e){return Dl.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}pr(e){let t=0;return this.mr(e,e=>{t++}).next(()=>t)}mr(e,t){return Dl.forEach(this.fi,(n,i)=>this.wr(e,n,i).next(e=>e?Dl.resolve():t(i)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ni(e,i=>this.wr(e,i,t).next(e=>{e||(n++,r.removeEntry(i,Tl.min()))})).next(()=>r.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Dl.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),Dl.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),Dl.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Dl.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=tc(e.data.value)),t}wr(e,t,n){return Dl.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.fi.get(t);return Dl.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Rf{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=i}static Es(e,t){let n=mh(),i=mh();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Rf(e,t.fromCache,n,i)}}class Of{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Mf{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=tn()?8:jl($t())>0?6:4}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,i){const r={result:null};return this.gs(e,t).next(e=>{r.result=e}).next(()=>{if(!r.result)return this.ps(e,t,i,n).next(e=>{r.result=e})}).next(()=>{if(r.result)return;const n=new Of;return this.ys(e,t,n).next(i=>{if(r.result=i,this.As)return this.ws(e,t,n,i.size)})}).next(()=>r.result)}ws(e,t,n,i){return n.documentReadCount<this.Vs?(Ma()<=bn.DEBUG&&Da("QueryEngine","SDK will not create cache indexes for query:",$c(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Dl.resolve()):(Ma()<=bn.DEBUG&&Da("QueryEngine","Query:",$c(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ds*i?(Ma()<=bn.DEBUG&&Da("QueryEngine","The SDK decides to create cache indexes for query:",$c(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zc(t))):Dl.resolve())}gs(e,t){if(qc(t))return Dl.resolve(null);let n=Zc(t);return this.indexManager.getIndexType(e,n).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Jc(t,null,"F"),n=Zc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const r=mh(...i);return this.fs.getDocuments(e,r).next(i=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.bs(t,i);return this.Ss(t,o,r,n.readTime)?this.gs(e,Jc(t,null,"F")):this.Ds(e,o,t,n)}))})))}ps(e,t,n,i){return qc(t)||i.isEqual(Tl.min())?Dl.resolve(null):this.fs.getDocuments(e,n).next(r=>{const o=this.bs(t,r);return this.Ss(t,o,n,i)?Dl.resolve(null):(Ma()<=bn.DEBUG&&Da("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$c(t)),this.Ds(e,o,t,Nl(i,Cl)).next(e=>e))})}bs(e,t){let n=new Su(nh(e));return t.forEach((t,i)=>{eh(e,i)&&(n=n.add(i))}),n}Ss(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}ys(e,t,n){return Ma()<=bn.DEBUG&&Da("QueryEngine","Using full collection scan to execute query:",$c(t)),this.fs.getDocumentsMatchingQuery(e,t,Al.min(),n)}Ds(e,t,n,i){return this.fs.getDocumentsMatchingQuery(e,n,i).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Df="LocalStore";class jf{constructor(e,t,n,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new bu(il),this.Fs=new rh(e=>zc(e),Fc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _f(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}}function zf(e,t,n,i){return new jf(e,t,n,i)}async function Ff(e,t){const n=Ha(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next(r=>(i=r,n.Os(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const r=[],o=[];let s=mh();for(const e of i){r.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next(e=>({Ns:e,removedBatchIds:r,addedBatchIds:o}))})})}function Uf(e){const t=Ha(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.li.getLastRemoteSnapshotVersion(e))}function Vf(e,t,n){let i=mh(),r=mh();return n.forEach(e=>i=i.add(e)),t.getEntries(e,i).next(e=>{let i=sh();return n.forEach((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(r=r.add(n)),o.isNoDocument()&&o.version.isEqual(Tl.min())?(t.removeEntry(n,o.readTime),i=i.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),i=i.insert(n,o)):Da(Df,"Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),{Bs:i,Ls:r}})}function Bf(e,t){const n=Ha(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Ul),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Hf(e,t){const n=Ha(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let i;return n.li.getTargetData(e,t).next(r=>r?(i=r,Dl.resolve(i)):n.li.allocateTargetId(e).next(r=>(i=new $d(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.li.addTargetData(e,i).next(()=>i))))}).then(e=>{const i=n.vs.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(e.targetId,e),n.Fs.set(t,e.targetId)),e})}async function qf(e,t,n){const i=Ha(e),r=i.vs.get(t),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,e=>i.persistence.referenceDelegate.removeTarget(e,r))}catch(e){if(!zl(e))throw e;Da(Df,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}i.vs=i.vs.remove(t),i.Fs.delete(r.target)}function Wf(e,t,n){const i=Ha(e);let r=Tl.min(),o=mh();return i.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const i=Ha(e),r=i.Fs.get(n);return void 0!==r?Dl.resolve(i.vs.get(r)):i.li.getTargetData(t,n)}(i,e,Zc(t)).next(t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>i.Cs.getDocumentsMatchingQuery(e,t,n?r:Tl.min(),n?o:mh())).next(e=>(Kf(i,th(t),e),{documents:e,ks:o})))}function Kf(e,t,n){let i=e.Ms.get(t)||Tl.min();n.forEach((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)}),e.Ms.set(t,i)}class Zf{constructor(){this.activeTargetIds=vh()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gf{constructor(){this.vo=new Zf,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Zf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Qf{Mo(e){}shutdown(){}}const Jf="ConnectivityMonitor";class Yf{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Da(Jf,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Da(Jf,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Xf=null;function $f(){return null===Xf?Xf=268435456+Math.round(2147483648*Math.random()):Xf++,"0x"+Xf.toString(16)}const ep="RestConnection",tp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class np{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo="projects/".concat(n,"/databases/").concat(i),this.$o=this.databaseId.database===Uu?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}Wo(e,t,n,i,r){const o=$f(),s=this.Qo(e,t.toUriEncodedString());Da(ep,"Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(a,i,r);const{host:l}=new URL(s),u=Gt(l);return this.zo(e,s,a,n,u).then(t=>(Da(ep,"Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw za(ep,"RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t})}jo(e,t,n,i,r,o){return this.Wo(e,t,n,i,r)}Go(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ra,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Qo(e,t){const n=tp[e];let i="".concat(this.qo,"/v1/").concat(t,":").concat(n);return this.databaseInfo.apiKey&&(i="".concat(i,"?key=").concat(encodeURIComponent(this.databaseInfo.apiKey))),i}terminate(){}}class ip{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const rp="WebChannelConnection",op=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};class sp extends np{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!sp.c_){const e=Ia();op(e,Ca.STAT_EVENT,e=>{e.stat===Ta.PROXY?Da(rp,"STAT_EVENT: detected buffering proxy"):e.stat===Ta.NOPROXY&&Da(rp,"STAT_EVENT: detected no buffering proxy")}),sp.c_=!0}}zo(e,t,n,i,r){const o=$f();return new Promise((r,s)=>{const a=new ka;a.setWithCredentials(!0),a.listenOnce(Ea.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case xa.NO_ERROR:const n=a.getResponseJson();Da(rp,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(n)),r(n);break;case xa.TIMEOUT:Da(rp,"RPC '".concat(e,"' ").concat(o," timed out")),s(new Wa(qa.DEADLINE_EXCEEDED,"Request time out"));break;case xa.HTTP_ERROR:const i=a.getStatus();if(Da(rp,"RPC '".concat(e,"' ").concat(o," failed with status:"),i,"response text:",a.getResponseText()),i>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(qa).indexOf(t)>=0?t:qa.UNKNOWN}(n.status);s(new Wa(e,n.message))}else s(new Wa(qa.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new Wa(qa.UNAVAILABLE,"Connection failed."));break;default:Ua(9055,{l_:e,streamId:o,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{Da(rp,"RPC '".concat(e,"' ").concat(o," completed."))}});const l=JSON.stringify(i);Da(rp,"RPC '".concat(e,"' ").concat(o," sending request:"),i),a.send(t,"POST",l,n,15)})}T_(e,t,n){const i=$f(),r=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},a=this.longPollingOptions.timeoutSeconds;void 0!==a&&(s.longPollingTimeout=Math.round(1e3*a)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Go(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const l=r.join("");Da(rp,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(l),s);const u=o.createWebChannel(l,s);this.I_(u);let c=!1,h=!1;const d=new ip({Ho:t=>{h?Da(rp,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),t):(c||(Da(rp,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),u.open(),c=!0),Da(rp,"RPC '".concat(e,"' stream ").concat(i," sending:"),t),u.send(t))},Jo:()=>u.close()});return op(u,Sa.EventType.OPEN,()=>{h||(Da(rp,"RPC '".concat(e,"' stream ").concat(i," transport opened.")),d.i_())}),op(u,Sa.EventType.CLOSE,()=>{h||(h=!0,Da(rp,"RPC '".concat(e,"' stream ").concat(i," transport closed")),d.o_(),this.E_(u))}),op(u,Sa.EventType.ERROR,t=>{h||(h=!0,za(rp,"RPC '".concat(e,"' stream ").concat(i," transport errored. Name:"),t.name,"Message:",t.message),d.o_(new Wa(qa.UNAVAILABLE,"The operation could not be completed")))}),op(u,Sa.EventType.MESSAGE,t=>{if(!h){var n;const r=t.data[0];Ba(!!r,16349);const o=r,s=(null===o||void 0===o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){Da(rp,"RPC '".concat(e,"' stream ").concat(i," received error:"),s);const t=s.status;let n=function(e){const t=ed[e];if(void 0!==t)return id(t)}(t),r=s.message;"NOT_FOUND"===t&&r.includes("database")&&r.includes("does not exist")&&r.includes(this.databaseId.database)&&za("Database '".concat(this.databaseId.database,"' not found. Please check your project configuration.")),void 0===n&&(n=qa.INTERNAL,r="Unknown error status: "+t+" with message "+s.message),h=!0,d.o_(new Wa(n,r)),u.close()}else Da(rp,"RPC '".concat(e,"' stream ").concat(i," received:"),r),d.__(r)}}),sp.u_(),setTimeout(()=>{d.s_()},0),d}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Na()}}function ap(e){return new sp(e)}function lp(){return"undefined"!=typeof document?document:null}function up(e){return new Sd(e,!0)}sp.c_=!1;class cp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ci=e,this.timerId=t,this.R_=n,this.A_=i,this.V_=r,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-n);i>0&&Da("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.d_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const hp="PersistentStream";class dp{constructor(e,t,n,i,r,o,s,a){this.Ci=e,this.b_=n,this.S_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cp(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===qa.RESOURCE_EXHAUSTED?(ja(t.toString()),ja("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===qa.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,i]=e;this.D_===t&&this.G_(n,i)},t=>{e(()=>{const e=new Wa(qa.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.Yo(()=>{n(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.H_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Da(hp,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(Da(hp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fp extends dp{constructor(e,t,n,i,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,o),this.serializer=r}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ua(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Ba(void 0===t||"string"==typeof t,58123),Cu.fromBase64String(t||"")):(Ba(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Cu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?qa.UNKNOWN:id(e.code);return new Wa(t,e.message||"")}(s);n=new md(i,r,o,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Rd(e,i.document.name),o=Id(i.document.updateTime),s=i.document.createTime?Id(i.document.createTime):Tl.min(),a=new hc({mapValue:{fields:i.document.fields}}),l=fc.newFoundDocument(r,o,s,a),u=i.targetIds||[],c=i.removedTargetIds||[];n=new fd(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Rd(e,i.document),o=i.readTime?Id(i.readTime):Tl.min(),s=fc.newNoDocument(r,o),a=i.removedTargetIds||[];n=new fd([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Rd(e,i.document),o=i.removedTargetIds||[];n=new fd([],o,r,null)}else{if(!("filter"in t))return Ua(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:i=0,unchangedNames:r}=e,o=new $h(i,r),s=e.targetId;n=new pd(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Tl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Tl.min():t.readTime?Id(t.readTime):Tl.min()}(e);return this.listener.J_(t,n)}Z_(e){const t={};t.database=Dd(this.serializer),t.addTarget=function(e,t){let n;const i=t.target;if(n=Uc(i)?{documents:Ud(e,i)}:{query:Vd(e,i).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Td(e,t.resumeToken);const i=Ed(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Tl.min())>0){n.readTime=xd(e,t.snapshotVersion.toTimestamp());const i=Ed(e,t.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ua(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){const t={};t.database=Dd(this.serializer),t.removeTarget=e,this.K_(t)}}class pp extends dp{constructor(e,t,n,i,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,o),this.serializer=r}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ba(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ba(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Ba(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Ba(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Id(e.updateTime):Id(t);return n.isEqual(Tl.min())&&(n=Id(t)),new Oh(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Id(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Dd(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Fd(this.serializer,e))};this.K_(t)}}class mp{}class gp extends mp{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Wa(qa.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[o,s]=r;return this.connection.Wo(e,Pd(t,n),i,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===qa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Wa(qa.UNKNOWN,e.toString())})}jo(e,t,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[s,a]=o;return this.connection.jo(e,Pd(t,n),i,s,a,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===qa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Wa(qa.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function vp(e,t,n,i){return new gp(e,t,n,i)}class yp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(ja(t),this.aa=!1):Da("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const _p="RemoteStore";class bp{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=r,this.Aa.Mo(e=>{n.enqueueAndForget(async()=>{Np(this)&&(Da(_p,"Restarting streams for network reachability change."),await async function(e){const t=Ha(e);t.Ea.add(4),await kp(t),t.Va.set("Unknown"),t.Ea.delete(4),await wp(t)}(this))})}),this.Va=new yp(n,i)}}async function wp(e){if(Np(e))for(const t of e.Ra)await t(!0)}async function kp(e){for(const t of e.Ra)await t(!1)}function Sp(e,t){const n=Ha(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Ip(n)?Cp(n):Gp(n).O_()&&xp(n,t))}function Ep(e,t){const n=Ha(e),i=Gp(n);n.Ia.delete(t),i.O_()&&Tp(n,t),0===n.Ia.size&&(i.O_()?i.L_():Np(n)&&n.Va.set("Unknown"))}function xp(e,t){if(e.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Tl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Gp(e).Z_(t)}function Tp(e,t){e.da.$e(t),Gp(e).X_(t)}function Cp(e){e.da=new vd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Gp(e).start(),e.Va.ua()}function Ip(e){return Np(e)&&!Gp(e).x_()&&e.Ia.size>0}function Np(e){return 0===Ha(e).Ea.size}function Pp(e){e.da=void 0}async function Ap(e){e.Va.set("Online")}async function Lp(e){e.Ia.forEach((t,n)=>{xp(e,t)})}async function Rp(e,t){Pp(e),Ip(e)?(e.Va.ha(t),Cp(e)):e.Va.set("Unknown")}async function Op(e,t,n){if(e.Va.set("Online"),t instanceof md&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.Ia.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.Ia.delete(i),e.da.removeTarget(i))}(e,t)}catch(n){Da(_p,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Mp(e,n)}else if(t instanceof fd?e.da.Xe(t):t instanceof pd?e.da.st(t):e.da.tt(t),!n.isEqual(Tl.min()))try{const t=await Uf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.da.Tt(t);return n.targetChanges.forEach((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.Ia.get(i);r&&e.Ia.set(i,r.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const i=e.Ia.get(t);if(!i)return;e.Ia.set(t,i.withResumeToken(Cu.EMPTY_BYTE_STRING,i.snapshotVersion)),Tp(e,t);const r=new $d(i.target,t,n,i.sequenceNumber);xp(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Da(_p,"Failed to raise snapshot:",t),await Mp(e,t)}}async function Mp(e,t,n){if(!zl(t))throw t;e.Ea.add(1),await kp(e),e.Va.set("Offline"),n||(n=()=>Uf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Da(_p,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await wp(e)})}function Dp(e,t){return t().catch(n=>Mp(e,n,t))}async function jp(e){const t=Ha(e),n=Qp(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ul;for(;zp(t);)try{const e=await Bf(t.localStore,i);if(null===e){0===t.Ta.length&&n.L_();break}i=e.batchId,Fp(t,e)}catch(e){await Mp(t,e)}Up(t)&&Vp(t)}function zp(e){return Np(e)&&e.Ta.length<10}function Fp(e,t){e.Ta.push(t);const n=Qp(e);n.O_()&&n.Y_&&n.ea(t.mutations)}function Up(e){return Np(e)&&!Qp(e).x_()&&e.Ta.length>0}function Vp(e){Qp(e).start()}async function Bp(e){Qp(e).ra()}async function Hp(e){const t=Qp(e);for(const n of e.Ta)t.ea(n.mutations)}async function qp(e,t,n){const i=e.Ta.shift(),r=Yh.from(i,t,n);await Dp(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await jp(e)}async function Wp(e,t){t&&Qp(e).Y_&&await async function(e,t){if(function(e){return nd(e)&&e!==qa.ABORTED}(t.code)){const n=e.Ta.shift();Qp(e).B_(),await Dp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await jp(e)}}(e,t),Up(e)&&Vp(e)}async function Kp(e,t){const n=Ha(e);n.asyncQueue.verifyOperationInProgress(),Da(_p,"RemoteStore received new credentials");const i=Np(n);n.Ea.add(3),await kp(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await wp(n)}async function Zp(e,t){const n=Ha(e);t?(n.Ea.delete(2),await wp(n)):t||(n.Ea.add(2),await kp(n),n.Va.set("Unknown"))}function Gp(e){return e.ma||(e.ma=function(e,t,n){const i=Ha(e);return i.sa(),new fp(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Zo:Ap.bind(null,e),Yo:Lp.bind(null,e),t_:Rp.bind(null,e),J_:Op.bind(null,e)}),e.Ra.push(async t=>{t?(e.ma.B_(),Ip(e)?Cp(e):e.Va.set("Unknown")):(await e.ma.stop(),Pp(e))})),e.ma}function Qp(e){return e.fa||(e.fa=function(e,t,n){const i=Ha(e);return i.sa(),new pp(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Bp.bind(null,e),t_:Wp.bind(null,e),ta:Hp.bind(null,e),na:qp.bind(null,e)}),e.Ra.push(async t=>{t?(e.fa.B_(),await jp(e)):(await e.fa.stop(),e.Ta.length>0&&(Da(_p,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Jp{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Ka,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,r){const o=Date.now()+n,s=new Jp(e,t,o,i,r);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wa(qa.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yp(e,t){if(ja("AsyncQueue","".concat(t,": ").concat(e)),zl(e))return new Wa(qa.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Xp{static emptySet(e){return new Xp(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||pl.comparator(t.key,n.key):(e,t)=>pl.comparator(e.key,t.key),this.keyedMap=lh(),this.sortedSet=new bu(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Xp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class $p{constructor(){this.ga=new bu(pl.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ua(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class em{constructor(e,t,n,i,r,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,i,r){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new em(e,t,Xp.emptySet(t),o,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}class tm{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class nm{constructor(){this.queries=im(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Ha(e),i=n.queries;n.queries=im(),i.forEach((e,n)=>{for(const i of n.ba)i.onError(t)})}(this,new Wa(qa.ABORTED,"Firestore shutting down"))}}function im(){return new rh(e=>Xc(e),Yc)}async function rm(e,t){const n=Ha(e);let i=3;const r=t.query;let o=n.queries.get(r);o?!o.Sa()&&t.Da()&&(i=2):(o=new tm,i=t.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(e){const n=Yp(e,"Initialization of query '".concat($c(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.ba.push(t),t.va(n.onlineState),o.wa&&t.Fa(o.wa)&&lm(n)}async function om(e,t){const n=Ha(e),i=t.query;let r=3;const o=n.queries.get(i);if(o){const e=o.ba.indexOf(t);e>=0&&(o.ba.splice(e,1),0===o.ba.length?r=t.Da()?0:1:!o.Sa()&&t.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function sm(e,t){const n=Ha(e);let i=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.ba)e.Fa(r)&&(i=!0);t.wa=r}}i&&lm(n)}function am(e,t,n){const i=Ha(e),r=i.queries.get(t);if(r)for(const o of r.ba)o.onError(n);i.queries.delete(t)}function lm(e){e.Ca.forEach(e=>{e.next()})}var um,cm;(cm=um||(um={})).Ma="default",cm.Cache="cache";class hm{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new em(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=em.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==um.Cache}}class dm{constructor(e){this.key=e}}class fm{constructor(e){this.key=e}}class pm{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=mh(),this.mutatedKeys=mh(),this.eu=nh(e),this.tu=new Xp(this.eu)}get nu(){return this.Za}ru(e,t){const n=t?t.iu:new $p,i=t?t.tu:this.tu;let r=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((e,t)=>{const u=i.get(e),c=eh(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.su(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.eu(c,a)>0||l&&this.eu(c,l)<0)&&(s=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(s=!0)),f&&(c?(o=o.add(c),r=d?r.add(e):r.delete(e)):(o=o.delete(e),r=r.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{tu:o,iu:n,Ss:s,mutatedKeys:r}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ua(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),i=null!==i&&void 0!==i&&i;const s=t&&!i?this._u():[],a=0===this.Ya.size&&this.current&&!i?1:0,l=a!==this.Xa;return this.Xa=a,0!==o.length||l?{snapshot:new em(this.query,e.tu,r,o,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:s}:{au:s}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $p,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Za=this.Za.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Za=this.Za.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=mh(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Ya=this.Ya.add(e.key))});const t=[];return e.forEach(e=>{this.Ya.has(e)||t.push(new fm(e))}),this.Ya.forEach(n=>{e.has(n)||t.push(new dm(n))}),t}cu(e){this.Za=e.ks,this.Ya=mh();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return em.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Xa,this.hasCachedResults)}}const mm="SyncEngine";class gm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class vm{constructor(e){this.key=e,this.hu=!1}}class ym{constructor(e,t,n,i,r,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new rh(e=>Xc(e),Yc),this.Iu=new Map,this.Eu=new Set,this.Ru=new bu(pl.comparator),this.Au=new Map,this.Vu=new Sf,this.du={},this.mu=new Map,this.fu=uf.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function _m(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=Um(e);let r;const o=i.Tu.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await wm(i,t,n,!0),r}async function bm(e,t){const n=Um(e);await wm(n,t,!0,!1)}async function wm(e,t,n,i){const r=await Hf(e.localStore,Zc(t)),o=r.targetId,s=e.sharedClientState.addLocalQueryTarget(o,n);let a;return i&&(a=await km(e,t,o,"current"===s,r.resumeToken)),e.isPrimaryClient&&n&&Sp(e.remoteStore,r),a}async function km(e,t,n,i,r){e.pu=(t,n,i)=>async function(e,t,n,i){let r=t.view.ru(n);r.Ss&&(r=await Wf(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,r)}));const o=i&&i.targetChanges.get(t.targetId),s=i&&null!=i.targetMismatches.get(t.targetId),a=t.view.applyChanges(r,e.isPrimaryClient,o,s);return Om(e,t.targetId,a.au),a.snapshot}(e,t,n,i);const o=await Wf(e.localStore,t,!0),s=new pm(t,o.ks),a=s.ru(o.documents),l=dd.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState,r),u=s.applyChanges(a,e.isPrimaryClient,l);Om(e,n,u.au);const c=new gm(t,n,s);return e.Tu.set(t,c),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),u.snapshot}async function Sm(e,t,n){const i=Ha(e),r=i.Tu.get(t),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(e=>!Yc(e,t))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await qf(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Ep(i.remoteStore,r.targetId),Lm(i,r.targetId)}).catch(Ml)):(Lm(i,r.targetId),await qf(i.localStore,r.targetId,!0))}async function Em(e,t){const n=Ha(e),i=n.Tu.get(t),r=n.Iu.get(i.targetId);n.isPrimaryClient&&1===r.length&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ep(n.remoteStore,i.targetId))}async function xm(e,t){const n=Ha(e);try{const e=await function(e,t){const n=Ha(e),i=t.snapshotVersion;let r=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});r=n.vs;const s=[];t.targetChanges.forEach((o,a)=>{const l=r.get(a);if(!l)return;s.push(n.li.removeMatchingKeys(e,o.removedDocuments,a).next(()=>n.li.addMatchingKeys(e,o.addedDocuments,a)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Cu.EMPTY_BYTE_STRING,Tl.min()).withLastLimboFreeSnapshotVersion(Tl.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,i)),r=r.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,u,o)&&s.push(n.li.updateTargetData(e,u))});let a=sh(),l=mh();if(t.documentUpdates.forEach(i=>{t.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))}),s.push(Vf(e,o,t.documentUpdates).next(e=>{a=e.Bs,l=e.Ls})),!i.isEqual(Tl.min())){const t=n.li.getLastRemoteSnapshotVersion(e).next(t=>n.li.setTargetsMetadata(e,e.currentSequenceNumber,i));s.push(t)}return Dl.waitFor(s).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.vs=r,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const i=n.Au.get(t);i&&(Ba(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?i.hu=!0:e.modifiedDocuments.size>0?Ba(i.hu,14607):e.removedDocuments.size>0&&(Ba(i.hu,42227),i.hu=!1))}),await jm(n,e,t)}catch(e){await Ml(e)}}function Tm(e,t,n){const i=Ha(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.Tu.forEach((n,i)=>{const r=i.view.va(t);r.snapshot&&e.push(r.snapshot)}),function(e,t){const n=Ha(e);n.onlineState=t;let i=!1;n.queries.forEach((e,n)=>{for(const r of n.ba)r.va(t)&&(i=!0)}),i&&lm(n)}(i.eventManager,t),e.length&&i.Pu.J_(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Cm(e,t,n){const i=Ha(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Au.get(t),o=r&&r.key;if(o){let e=new bu(pl.comparator);e=e.insert(o,fc.newNoDocument(o,Tl.min()));const n=mh().add(o),r=new hd(Tl.min(),new Map,new bu(il),e,n);await xm(i,r),i.Ru=i.Ru.remove(o),i.Au.delete(t),Dm(i)}else await qf(i.localStore,t,!1).then(()=>Lm(i,t,n)).catch(Ml)}async function Im(e,t){const n=Ha(e),i=t.batch.batchId;try{const e=await function(e,t){const n=Ha(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const i=t.batch.keys(),r=n.xs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const r=n.batch,o=r.keys();let s=Dl.resolve();return o.forEach(e=>{s=s.next(()=>i.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);Ba(null!==o,48541),t.version.compareTo(o)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,r))}(n,e,t,r).next(()=>r.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=mh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,i))})}(n.localStore,t);Am(n,i,null),Pm(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await jm(n,e)}catch(e){await Ml(e)}}async function Nm(e,t,n){const i=Ha(e);try{const e=await function(e,t){const n=Ha(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ba(null!==t,37113),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i)).next(()=>n.localDocuments.getDocuments(e,i))})}(i.localStore,t);Am(i,t,n),Pm(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await jm(i,e)}catch(n){await Ml(n)}}function Pm(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Am(e,t,n){const i=Ha(e);let r=i.du[i.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),i.du[i.currentUser.toKey()]=r}}function Lm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Iu.get(t))e.Tu.delete(i),n&&e.Pu.yu(i,n);e.Iu.delete(t),e.isPrimaryClient&&e.Vu.Gr(t).forEach(t=>{e.Vu.containsKey(t)||Rm(e,t)})}function Rm(e,t){e.Eu.delete(t.path.canonicalString());const n=e.Ru.get(t);null!==n&&(Ep(e.remoteStore,n),e.Ru=e.Ru.remove(t),e.Au.delete(n),Dm(e))}function Om(e,t,n){for(const i of n)i instanceof dm?(e.Vu.addReference(i.key,t),Mm(e,i)):i instanceof fm?(Da(mm,"Document no longer in limbo: "+i.key),e.Vu.removeReference(i.key,t),e.Vu.containsKey(i.key)||Rm(e,i.key)):Ua(19791,{wu:i})}function Mm(e,t){const n=t.key,i=n.path.canonicalString();e.Ru.get(n)||e.Eu.has(i)||(Da(mm,"New document in limbo: "+n),e.Eu.add(i),Dm(e))}function Dm(e){for(;e.Eu.size>0&&e.Ru.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new pl(hl.fromString(t)),i=e.fu.next();e.Au.set(i,new vm(n)),e.Ru=e.Ru.insert(n,i),Sp(e.remoteStore,new $d(Zc(Hc(n.path)),i,"TargetPurposeLimboResolution",Fl.ce))}}async function jm(e,t,n){const i=Ha(e),r=[],o=[],s=[];i.Tu.isEmpty()||(i.Tu.forEach((e,a)=>{s.push(i.pu(a,t,n).then(e=>{if((e||n)&&i.isPrimaryClient){var t;const r=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;i.sharedClientState.updateQueryState(a.targetId,r?"current":"not-current")}if(e){r.push(e);const t=Rf.Es(a.targetId,e);o.push(t)}}))}),await Promise.all(s),i.Pu.J_(r),await async function(e,t){const n=Ha(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Dl.forEach(t,t=>Dl.forEach(t.Ts,i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i)).next(()=>Dl.forEach(t.Is,i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))}catch(e){if(!zl(e))throw e;Da(Df,"Failed to update sequence numbers: "+e)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.vs.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.vs=n.vs.insert(e,r)}}}(i.localStore,o))}async function zm(e,t){const n=Ha(e);if(!n.currentUser.isEqual(t)){Da(mm,"User change. New user:",t.toKey());const e=await Ff(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Wa(qa.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await jm(n,e.Ns)}}function Fm(e,t){const n=Ha(e),i=n.Au.get(t);if(i&&i.hu)return mh().add(i.key);{let e=mh();const i=n.Iu.get(t);if(!i)return e;for(const t of i){const i=n.Tu.get(t);e=e.unionWith(i.view.nu)}return e}}function Um(e){const t=Ha(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=xm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Cm.bind(null,t),t.Pu.J_=sm.bind(null,t.eventManager),t.Pu.yu=am.bind(null,t.eventManager),t}function Vm(e){const t=Ha(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Im.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Nm.bind(null,t),t}class Bm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=up(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return zf(this.persistence,new Mf,e.initialUser,this.serializer)}Cu(e){return new Nf(Af.Vi,this.serializer)}Du(e){return new Gf}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bm.provider={build:()=>new Bm};class Hm extends Bm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ba(this.persistence.referenceDelegate instanceof Lf,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new pf(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?lf.withCacheSize(this.cacheSizeBytes):lf.DEFAULT;return new Nf(e=>Lf.Vi(e,t),this.serializer)}}class qm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Tm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=zm.bind(null,this.syncEngine),await Zp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new nm}createDatastore(e){const t=up(e.databaseInfo.databaseId),n=ap(e.databaseInfo);return vp(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,i,r){return new bp(e,t,n,i,r)}(this.localStore,this.datastore,e.asyncQueue,e=>Tm(this.syncEngine,e,0),Yf.v()?new Yf:new Qf)}createSyncEngine(e,t){return function(e,t,n,i,r,o,s){const a=new ym(e,t,n,i,r,o);return s&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Ha(e);Da(_p,"RemoteStore shutting down."),t.Ea.add(5),await kp(t),t.Aa.shutdown(),t.Va.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}qm.provider={build:()=>new qm};class Wm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ja("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Km{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Wa(qa.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Ha(e),i={documents:t.map(e=>Ld(n.serializer,e))},r=await n.jo("BatchGetDocuments",n.serializer.databaseId,hl.emptyPath(),i,t.length),o=new Map;r.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){Ba(!!t.found,43571),t.found.name,t.found.updateTime;const n=Rd(e,t.found.name),i=Id(t.found.updateTime),r=t.found.createTime?Id(t.found.createTime):Tl.min(),o=new hc({mapValue:{fields:t.found.fields}});return fc.newFoundDocument(n,i,r,o)}(e,t):"missing"in t?function(e,t){Ba(!!t.missing,3894),Ba(!!t.readTime,22933);const n=Rd(e,t.missing),i=Id(t.readTime);return fc.newNoDocument(n,i)}(e,t):Ua(7234,{result:t})}(n.serializer,e);o.set(t.key.toString(),t)});const s=[];return t.forEach(e=>{const t=o.get(e.toString());Ba(!!t,55234,{key:e}),s.push(t)}),s}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=pl.fromPath(t);this.mutations.push(new Qh(n,this.precondition(n)))}),await async function(e,t){const n=Ha(e),i={writes:t.map(e=>Fd(n.serializer,e))};await n.Wo("Commit",n.serializer.databaseId,hl.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ua(50498,{Gu:e.constructor.name});t=Tl.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Wa(qa.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Tl.min())?Mh.exists(!1):Mh.updateTime(t):Mh.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tl.min()))throw new Wa(qa.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mh.updateTime(t)}return Mh.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Zm{constructor(e,t,n,i,r){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=i,this.deferred=r,this.zu=n.maxAttempts,this.M_=new cp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_(async()=>{const e=new Km(this.datastore),t=this.Ju(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Zu(e)}))}).catch(e=>{this.Zu(e)})})}Ju(e){try{const t=this.updateFunction(e);return!Vl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Hu(),Promise.resolve()))):this.deferred.reject(e)}Xu(e){if("FirebaseError"===(null===e||void 0===e?void 0:e.name)){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!nd(t)}return!1}}const Gm="FirestoreClient";class Qm{constructor(e,t,n,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=i,this.user=La.UNAUTHENTICATED,this.clientId=nl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,async e=>{Da(Gm,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Da(Gm,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ka;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Yp(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Jm(e,t){e.asyncQueue.verifyOperationInProgress(),Da(Gm,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async e=>{i.isEqual(e)||(await Ff(t.localStore,e),i=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Ym(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Xm(e);Da(Gm,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Kp(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Kp(t.remoteStore,n)),e._onlineComponents=t}async function Xm(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Da(Gm,"Using user provided OfflineComponentProvider");try{await Jm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===qa.FAILED_PRECONDITION||e.code===qa.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;za("Error using user provided cache. Falling back to memory cache: "+n),await Jm(e,new Bm)}}else Da(Gm,"Using default OfflineComponentProvider"),await Jm(e,new Hm(void 0));return e._offlineComponents}async function $m(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Da(Gm,"Using user provided OnlineComponentProvider"),await Ym(e,e._uninitializedComponentsProvider._online)):(Da(Gm,"Using default OnlineComponentProvider"),await Ym(e,new qm))),e._onlineComponents}function eg(e){return $m(e).then(e=>e.syncEngine)}function tg(e){return $m(e).then(e=>e.datastore)}async function ng(e){const t=await $m(e),n=t.eventManager;return n.onListen=_m.bind(null,t.syncEngine),n.onUnlisten=Sm.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=bm.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Em.bind(null,t.syncEngine),n}function ig(e,t){const n=new Ka;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const i=Vm(e);try{const e=await function(e,t){const n=Ha(e),i=xl.now(),r=t.reduce((e,t)=>e.add(t.key),mh());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=sh(),l=mh();return n.xs.getEntries(e,r).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(r=>{o=r;const s=[];for(const e of t){const t=Vh(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new qh(e.key,t,dc(t.value.mapValue),Mh.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,s,t)}).next(t=>{s=t;const i=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)})}).then(()=>({batchId:s.batchId,changes:uh(o)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.du[e.currentUser.toKey()];i||(i=new bu(il)),i=i.insert(t,n),e.du[e.currentUser.toKey()]=i}(i,e.batchId,n),await jm(i,e.changes),await jp(i.remoteStore)}catch(e){const t=Yp(e,"Failed to persist write");n.reject(t)}}(await eg(e),t,n)),n.promise}function rg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const og="ComponentProvider",sg=new Map;function ag(e,t,n,i,r){return new Fu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,rg(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,i)}const lg="firestore.googleapis.com",ug=!0;class cg{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Wa(qa.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lg,this.ssl=ug}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:ug;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=af;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<hf)throw new Wa(qa.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,i){if(!0===t&&!0===i)throw new Wa(qa.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Wa(qa.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Wa(qa.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Wa(qa.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hg{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Wa(qa.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Wa(qa.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cg(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ga;switch(e.type){case"firstParty":return new Xa(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Wa(qa.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=sg.get(e);t&&(Da(og,"Removing Datastore"),sg.delete(e),t.terminate())}(this),Promise.resolve()}}function dg(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=bl(e,hg);const r=Gt(t),o=e._getSettings(),s=u(u({},o),{},{emulatorOptions:e._getEmulatorOptions()}),a="".concat(t,":").concat(n);r&&(Qt("https://".concat(a)),Xt("Firestore",!0)),o.host!==lg&&o.host!==a&&za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=u(u({},o),{},{host:a,ssl:r,emulatorOptions:i});if(!an(l,s)&&(e._setSettings(l),i.mockUserToken)){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=La.MOCK_USER;else{var c;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=u({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ut(JSON.stringify({alg:"none",type:"JWT"})),Ut(JSON.stringify(o)),""].join(".")}(i.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const r=i.mockUserToken.sub||i.mockUserToken.user_id;if(!r)throw new Wa(qa.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new La(r)}e._authCredentials=new Qa(new Za(t,n))}}class fg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new fg(this.firestore,e,this._query)}}class pg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pg(this.firestore,e,this._key)}toJSON(){return{type:pg._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(kl(t,pg._jsonSchema))return new pg(e,n||null,new pl(hl.fromString(t.referencePath)))}}pg._jsonSchemaVersion="firestore/documentReference/1.0",pg._jsonSchema={type:wl("string",pg._jsonSchemaVersion),referencePath:wl("string")};class mg extends fg{constructor(e,t,n){super(e,t,Hc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pg(this.firestore,null,new pl(e))}withConverter(e){return new mg(this.firestore,e,this._path)}}function gg(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=pn(e),ml("collection","path",t),e instanceof hg){const n=hl.fromString(t,...i);return vl(n),new mg(e,null,n)}{if(!(e instanceof pg||e instanceof mg))throw new Wa(qa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(hl.fromString(t,...i));return vl(n),new mg(e.firestore,null,n)}}function vg(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=pn(e),1===arguments.length&&(t=nl.newId()),ml("doc","path",t),e instanceof hg){const n=hl.fromString(t,...i);return gl(n),new pg(e,null,new pl(n))}{if(!(e instanceof pg||e instanceof mg))throw new Wa(qa.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(hl.fromString(t,...i));return gl(n),new pg(e.firestore,e instanceof mg?e.converter:null,new pl(n))}}const yg="AsyncQueue";class _g{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cp(this,"async_queue_retry"),this._c=()=>{const e=lp();e&&Da(yg,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=lp();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=lp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Ka;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(0!==this.Yu.length){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(xy){if(!zl(xy))throw xy;Da(yg,"Operation failed with retryable error: "+xy)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,ja("INTERNAL UNHANDLED ERROR: ",bg(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Jp.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(i),i}uc(){this.nc&&Ua(47125,{Pc:bg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function bg(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class wg extends hg{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new _g,this._persistenceKey=(null===i||void 0===i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _g(e),this._firestoreClient=void 0,await e}}}function kg(e){if(e._terminated)throw new Wa(qa.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Sg(e),e._firestoreClient}function Sg(e){var t,n,i,r;const o=e._freezeSettings(),s=ag(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,null===(n=e._app)||void 0===n?void 0:n.options.apiKey,o);e._componentsProvider||null!==(i=o.localCache)&&void 0!==i&&i._offlineComponentProvider&&null!==(r=o.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),e._firestoreClient=new Qm(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Eg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Eg(Cu.fromBase64String(e))}catch(e){throw new Wa(qa.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Eg(Cu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Eg._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kl(e,Eg._jsonSchema))return Eg.fromBase64String(e.bytes)}}Eg._jsonSchemaVersion="firestore/bytes/1.0",Eg._jsonSchema={type:wl("string",Eg._jsonSchemaVersion),bytes:wl("string")};class xg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let i=0;i<t.length;++i)if(0===t[i].length)throw new Wa(qa.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fl(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Tg{constructor(e){this._methodName=e}}class Cg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Wa(qa.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Wa(qa.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return il(this._lat,e._lat)||il(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cg._jsonSchemaVersion}}static fromJSON(e){if(kl(e,Cg._jsonSchema))return new Cg(e.latitude,e.longitude)}}Cg._jsonSchemaVersion="firestore/geoPoint/1.0",Cg._jsonSchema={type:wl("string",Cg._jsonSchemaVersion),latitude:wl("number"),longitude:wl("number")};class Ig{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ig._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kl(e,Ig._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Ig(e.vectorValues);throw new Wa(qa.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ig._jsonSchemaVersion="firestore/vectorValue/1.0",Ig._jsonSchema={type:wl("string",Ig._jsonSchemaVersion),vectorValues:wl("object")};const Ng=/^__.*__$/;class Pg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new qh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hh(e,this.data,t,this.fieldTransforms)}}class Ag{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new qh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Lg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ua(40011,{dataSource:e})}}class Rg{constructor(e,t,n,i,r,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.validatePath(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Rg(u(u({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Qg(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(Lg(this.dataSource)&&Ng.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Og{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||up(e)}createContext(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Rg({dataSource:e,methodName:t,targetDoc:n,path:fl.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mg(e){const t=e._freezeSettings(),n=up(e._databaseId);return new Og(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Dg(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.createContext(o.merge||o.mergeFields?2:0,t,n,r);Wg("Data must be an object, but it was:",s,i);const a=Hg(i,s);let l,u;if(o.merge)l=new xu(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const i of o.mergeFields){const r=Kg(t,i,n);if(!s.contains(r))throw new Wa(qa.INVALID_ARGUMENT,"Field '".concat(r,"' is specified in your field mask but missing from your input data."));Jg(e,r)||e.push(r)}l=new xu(e),u=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=s.fieldTransforms;return new Pg(new hc(a),l,u)}class jg extends Tg{_toFieldTransform(e){if(2!==e.dataSource)throw 1===e.dataSource?e.createError("".concat(this._methodName,"() can only appear at the top level of your update data")):e.createError("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jg}}class zg extends Tg{_toFieldTransform(e){return new Rh(e.path,new xh)}isEqual(e){return e instanceof zg}}function Fg(e,t,n,i){const r=e.createContext(1,t,n);Wg("Data must be an object, but it was:",r,i);const o=[],s=hc.empty();yu(i,(e,i)=>{const a=Gg(t,e,n);i=pn(i);const l=r.childContextForFieldPath(a);if(i instanceof jg)o.push(a);else{const e=Bg(i,l);null!=e&&(o.push(a),s.set(a,e))}});const a=new xu(o);return new Ag(s,a,r.fieldTransforms)}function Ug(e,t,n,i,r,o){const s=e.createContext(1,t,n),a=[Kg(t,i,n)],l=[r];if(o.length%2!=0)throw new Wa(qa.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)a.push(Kg(t,o[d])),l.push(o[d+1]);const u=[],c=hc.empty();for(let d=a.length-1;d>=0;--d)if(!Jg(u,a[d])){const e=a[d];let t=l[d];t=pn(t);const n=s.childContextForFieldPath(e);if(t instanceof jg)u.push(e);else{const i=Bg(t,n);null!=i&&(u.push(e),c.set(e,i))}}const h=new xu(u);return new Ag(c,h,s.fieldTransforms)}function Vg(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Bg(n,e.createContext(i?4:3,t))}function Bg(e,t){if(qg(e=pn(e)))return Wg("Unsupported field value:",t,e),Hg(e,t);if(e instanceof Tg)return function(e,t){if(!Lg(t.dataSource))throw t.createError("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.createError("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.arrayElement&&4!==t.dataSource)throw t.createError("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const r of e){let e=Bg(r,t.childContextForArray(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=pn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return bh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=xl.fromDate(e);return{timestampValue:xd(t.serializer,n)}}if(e instanceof xl){const n=new xl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:xd(t.serializer,n)}}if(e instanceof Cg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Eg)return{bytesValue:Td(t.serializer,e._byteString)};if(e instanceof pg){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.createError("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Nd(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Ig)return function(e,t){const n=e instanceof Ig?e.toArray():e,i={fields:{[Bu]:{stringValue:Wu},[Ku]:{arrayValue:{values:n.map(e=>{if("number"!=typeof e)throw t.createError("VectorValues must only contain numeric values.");return yh(t.serializer,e)})}}}};return{mapValue:i}}(e,t);if(Xd(e))return e._toProto(t.serializer);throw t.createError("Unsupported field value: ".concat(_l(e)))}(e,t)}function Hg(e,t){const n={};return _u(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):yu(e,(e,i)=>{const r=Bg(i,t.childContextForField(e));null!=r&&(n[e]=r)}),{mapValue:{fields:n}}}function qg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof xl||e instanceof Cg||e instanceof Eg||e instanceof pg||e instanceof Tg||e instanceof Ig||Xd(e))}function Wg(e,t,n){if(!qg(n)||!yl(n)){const i=_l(n);throw"an object"===i?t.createError(e+" a custom object"):t.createError(e+" "+i)}}function Kg(e,t,n){if((t=pn(t))instanceof xg)return t._internalPath;if("string"==typeof t)return Gg(e,t);throw Qg("Field path arguments must be of type string or ",e,!1,void 0,n)}const Zg=new RegExp("[~\\*/\\[\\]]");function Gg(e,t,n){if(t.search(Zg)>=0)throw Qg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new xg(...t.split("."))._internalPath}catch(i){throw Qg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Qg(e,t,n,i,r){const o=i&&!i.isEmpty(),s=void 0!==r;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(i)),s&&(l+=" in document ".concat(r)),l+=")"),new Wa(qa.INVALID_ARGUMENT,a+e+l)}function Jg(e,t){return e.some(e=>e.isEqual(t))}class Yg{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Zu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Au(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ua(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return yu(e,(e,i)=>{n[e]=this.convertValue(i,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Ku].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Pu(e.doubleValue));return new Ig(n)}convertGeoPoint(e){return new Cg(Pu(e.latitude),Pu(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ju(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(zu(e));default:return null}}convertTimestamp(e){const t=Nu(e);return new xl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=hl.fromString(e);Ba(Yd(n),9688,{name:e});const i=new Vu(n.get(1),n.get(3)),r=new pl(n.popFirst(5));return i.isEqual(t)||ja("Document ".concat(r," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),r}}class Xg extends Yg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pg(this.firestore,null,t)}}function $g(){return new zg("serverTimestamp")}const ev="@firebase/firestore",tv="4.11.0";function nv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const i of t)if(i in n&&"function"==typeof n[i])return!0;return!1}(e,["next","error","complete"])}class iv{constructor(e,t,n,i,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new pg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new rv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e,t;return null!==(e=null===(t=this._document)||void 0===t?void 0:t.data.clone().value.mapValue.fields)&&void 0!==e?e:void 0}get(e){if(this._document){const t=this._document.data.field(Kg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class rv extends iv{data(){return super.data()}}function ov(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Wa(qa.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sv{}class av extends sv{}function lv(e,t){let n=[];for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];t instanceof sv&&n.push(t),n=n.concat(r),function(e){const t=e.filter(e=>e instanceof hv).length,n=e.filter(e=>e instanceof uv).length;if(t>1||t>0&&n>0)throw new Wa(qa.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class uv extends av{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new uv(e,t,n)}_apply(e){const t=this._parse(e);return yv(e._query,t),new fg(e.firestore,e.converter,Qc(e._query,t))}_parse(e){const t=Mg(e.firestore),n=function(e,t,n,i,r,o,s){let a;if(r.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Wa(qa.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){vv(s,o);const t=[];for(const n of s)t.push(gv(i,e,n));a={arrayValue:{values:t}}}else a=gv(i,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||vv(s,o),a=Vg(n,t,s,"in"===o||"not-in"===o);return bc.create(r,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function cv(e,t,n){const i=t,r=Kg("where",e);return uv._create(r,i,n)}class hv extends sv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hv(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:wc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const i=t.getFlattenedFilters();for(const r of i)yv(n,r),n=Qc(n,r)}(e._query,t),new fg(e.firestore,e.converter,Qc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class dv extends av{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Wa(qa.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Wa(qa.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vc(t,n)}(e._query,this._field,this._direction);return new fg(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Vc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function fv(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Kg("orderBy",e);return dv._create(n,t)}class pv extends av{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new pv(e,t,n)}_apply(e){return new fg(e.firestore,e.converter,Jc(e._query,this._limit,this._limitType))}}function mv(e){return function(e,t){if(t<=0)throw new Wa(qa.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}("limit",e),pv._create("limit",e,"F")}function gv(e,t,n){if("string"==typeof(n=pn(n))){if(""===n)throw new Wa(qa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wc(t)&&-1!==n.indexOf("/"))throw new Wa(qa.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const i=t.path.child(hl.fromString(n));if(!pl.isDocumentKey(i))throw new Wa(qa.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(i,"' is not because it has an odd number of segments (").concat(i.length,")."));return nc(e,new pl(i))}if(n instanceof pg)return nc(e,n._key);throw new Wa(qa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(_l(n),"."))}function vv(e,t){if(!Array.isArray(e)||0===e.length)throw new Wa(qa.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function yv(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Wa(qa.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Wa(qa.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function _v(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class bv extends Yg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pg(this.firestore,null,t)}}class wv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kv extends iv{constructor(e,t,n,i,r,o){super(e,t,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Sv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Kg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Wa(qa.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=kv._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}kv._jsonSchemaVersion="firestore/documentSnapshot/1.0",kv._jsonSchema={type:wl("string",kv._jsonSchemaVersion),bundleSource:wl("string","DocumentSnapshot"),bundleName:wl("string"),bundle:wl("string")};class Sv extends kv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Ev{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new wv(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Sv(this._firestore,this._userDataWriter,n.key,n,new wv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Wa(qa.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const i=new Sv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new wv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const i=new Sv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new wv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,o=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:xv(t.type),doc:i,oldIndex:r,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Wa(qa.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ev._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],i=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),i.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ua(61501,{type:e})}}Ev._jsonSchemaVersion="firestore/querySnapshot/1.0",Ev._jsonSchema={type:wl("string",Ev._jsonSchemaVersion),bundleSource:wl("string","QuerySnapshot"),bundleName:wl("string"),bundle:wl("string")};const Tv={maxAttempts:5};class Cv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mg(e)}set(e,t,n){this._verifyNotCommitted();const i=Iv(e,this._firestore),r=_v(i.converter,t,n),o=Dg(this._dataReader,"WriteBatch.set",i._key,r,null!==i.converter,n);return this._mutations.push(o.toMutation(i._key,Mh.none())),this}update(e,t,n){this._verifyNotCommitted();const i=Iv(e,this._firestore);let r;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return r="string"==typeof(t=pn(t))||t instanceof xg?Ug(this._dataReader,"WriteBatch.update",i._key,t,n,s):Fg(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Mh.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Iv(e,this._firestore);return this._mutations=this._mutations.concat(new Gh(t._key,Mh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Wa(qa.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Iv(e,t){if((e=pn(e)).firestore!==t)throw new Wa(qa.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Nv{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mg(e)}get(e){const t=Iv(e,this._firestore),n=new bv(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Ua(24041);const i=e[0];if(i.isFoundDocument())return new iv(this._firestore,n,i.key,i,t.converter);if(i.isNoDocument())return new iv(this._firestore,n,t._key,null,t.converter);throw Ua(18433,{doc:i})})}set(e,t,n){const i=Iv(e,this._firestore),r=_v(i.converter,t,n),o=Dg(this._dataReader,"Transaction.set",i._key,r,null!==i.converter,n);return this._transaction.set(i._key,o),this}update(e,t,n){const i=Iv(e,this._firestore);let r;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return r="string"==typeof(t=pn(t))||t instanceof xg?Ug(this._dataReader,"Transaction.update",i._key,t,n,s):Fg(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}delete(e){const t=Iv(e,this._firestore);return this._transaction.delete(t._key),this}}class Pv extends Nv{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Iv(e,this._firestore),n=new Xg(this._firestore);return super.get(e).then(e=>new kv(this._firestore,n,t._key,e._document,new wv(!1,!1),t.converter))}}function Av(e,t,n){e=bl(e,wg);const i=u(u({},Tv),n);!function(e){if(e.maxAttempts<1)throw new Wa(qa.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i);return function(e,t,n){const i=new Ka;return e.asyncQueue.enqueueAndForget(async()=>{const r=await tg(e);new Zm(e.asyncQueue,r,n,t,i).ju()}),i.promise}(kg(e),n=>t(new Pv(e,n)),i)}function Lv(e){e=bl(e,pg);const t=bl(e.firestore,wg);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new Ka;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,i,r){const o=new Wm({next:a=>{o.Nu(),t.enqueueAndForget(()=>om(e,s));const l=a.docs.has(n);!l&&a.fromCache?r.reject(new Wa(qa.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&i&&"server"===i.source?r.reject(new Wa(qa.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(a)},error:e=>r.reject(e)}),s=new hm(Hc(n.path),o,{includeMetadataChanges:!0,Ka:!0});return rm(e,s)}(await ng(e),e.asyncQueue,t,n,i)),i.promise}(kg(t),e._key).then(n=>Fv(t,e,n))}function Rv(e){e=bl(e,fg);const t=bl(e.firestore,wg),n=kg(t),i=new Xg(t);return ov(e._query),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new Ka;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,i,r){const o=new Wm({next:n=>{o.Nu(),t.enqueueAndForget(()=>om(e,s)),n.fromCache&&"server"===i.source?r.reject(new Wa(qa.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),s=new hm(n,o,{includeMetadataChanges:!0,Ka:!0});return rm(e,s)}(await ng(e),e.asyncQueue,t,n,i)),i.promise}(n,e._query).then(n=>new Ev(t,i,e,n))}function Ov(e,t,n){e=bl(e,pg);const i=bl(e.firestore,wg),r=Mg(i);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=pn(t))||t instanceof xg?Ug(r,"updateDoc",e._key,t,n,a):Fg(r,"updateDoc",e._key,t),zv(i,[o.toMutation(e._key,Mh.exists(!0))])}function Mv(e){return zv(bl(e.firestore,wg),[new Gh(e._key,Mh.none())])}function Dv(e,t){const n=bl(e.firestore,wg),i=vg(e),r=_v(e.converter,t);return zv(n,[Dg(Mg(e.firestore),"addDoc",i._key,r,null!==e.converter,{}).toMutation(i._key,Mh.exists(!1))]).then(()=>i)}function jv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e=pn(e);let r={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof n[o]||nv(n[o])||(r=n[o++]);const s={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(nv(n[o])){var a,l,u;const e=n[o];n[o]=null===(a=e.next)||void 0===a?void 0:a.bind(e),n[o+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[o+2]=null===(u=e.complete)||void 0===u?void 0:u.bind(e)}let c,h,d;if(e instanceof pg)h=bl(e.firestore,wg),d=Hc(e._key.path),c={next:t=>{n[o]&&n[o](Fv(h,e,t))},error:n[o+1],complete:n[o+2]};else{const t=bl(e,fg);h=bl(t.firestore,wg),d=t._query;const i=new Xg(h);c={next:e=>{n[o]&&n[o](new Ev(h,i,t,e))},error:n[o+1],complete:n[o+2]},ov(e._query)}return function(e,t,n,i){const r=new Wm(i),o=new hm(t,r,n);return e.asyncQueue.enqueueAndForget(async()=>rm(await ng(e),o)),()=>{r.Nu(),e.asyncQueue.enqueueAndForget(async()=>om(await ng(e),o))}}(kg(h),d,s,c)}function zv(e,t){return ig(kg(e),t)}function Fv(e,t,n){const i=n.docs.get(t._key),r=new Xg(e);return new kv(e,r,t._key,i,new wv(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Ra=Ni,Ei(new mn("firestore",(e,n)=>{let{instanceIdentifier:i,options:r}=n;const o=e.getProvider("app").getImmediate(),s=new wg(new Ja(e.getProvider("auth-internal")),new el(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Wa(qa.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vu(e.options.projectId,t)}(o,i),o);return r=u({useFetchStreams:t},r),s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),Li(ev,tv,e),Li(ev,tv,"esm2020")}();const Uv=Pi({apiKey:"AIzaSyBl26SC7qSuHRqhKA4WoK6CsN5Paj4mi58",authDomain:"lile-ry.firebaseapp.com",projectId:"lile-ry",storageBucket:"lile-ry.firebasestorage.app",messagingSenderId:"465367382667",appId:"1:465367382667:web:72649de9dbf85f03d5b28e"}),Vv=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ai();const t=xi(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=xi(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(an(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Yi(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ha,persistence:[ws,ts,ss]}),i=Kt("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=(r=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ma)return;const i=null===t||void 0===t?void 0:t.token;ga!==i&&(ga=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))});!function(e,t,n){pn(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,i){pn(e).onIdTokenChanged(t,n,i)}(n,e=>t(e))}}var r;const o=qt("auth");return o&&bo(n,"http://".concat(o)),n}(Uv),Bv=function(e,t){const n="object"==typeof e?e:Ai(),i="string"==typeof e?e:t||Uu,r=xi(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const e=(e=>{const t=qt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]})("firestore");e&&dg(r,...e)}return r}(Uv),Hv=new jo;function qv(){const[t,n]=(0,e.useState)(null),[i,r]=(0,e.useState)(!0);return(0,e.useEffect)(()=>{const e=function(e,t,n,i){return pn(e).onAuthStateChanged(t,n,i)}(Vv,e=>{if(n(e),r(!1),null!==e&&void 0!==e&&e.uid){const t=vg(Bv,"users",e.uid);(async()=>{try{if(!(await Lv(t)).exists())return void await function(e,t,n){e=bl(e,pg);const i=bl(e.firestore,wg),r=_v(e.converter,t,n);return zv(i,[Dg(Mg(i),"setDoc",e._key,r,null!==e.converter,n).toMutation(e._key,Mh.none())])}(t,{uid:e.uid,email:e.email||"",displayName:e.displayName||"",status:"active",createdAt:$g(),lastSeenAt:$g()});await Ov(t,{email:e.email||"",displayName:e.displayName||"",lastSeenAt:$g()})}catch(n){}})()}});return()=>e()},[]),{user:t,initializing:i}}const Wv=n.p+"static/media/lilelogo.9f4a4fb92dd0372e2ebe.jpeg";var Kv=n(579);function Zv(){const{user:t,initializing:n}=qv(),i=be(),[r,o]=(0,e.useState)(!1),s=(null===t||void 0===t?void 0:t.email)&&"toni@kauppinen.info"===t.email.toLowerCase();return!n&&t&&"/kirjaudu"===i.pathname?(0,Kv.jsx)(qe,{to:"/",replace:!0}):n||t||"/kirjaudu"===i.pathname?((0,e.useEffect)(()=>{o(!1)},[i.pathname]),(0,Kv.jsx)("div",{className:t?"App":"App App--locked",children:t?(0,Kv.jsxs)(Kv.Fragment,{children:[(0,Kv.jsxs)("header",{className:"appbar",children:[(0,Kv.jsxs)("div",{className:"appbar__row",children:[(0,Kv.jsxs)(Nt,{to:"/",className:"appbar__brand","aria-label":"Etusivu",children:[(0,Kv.jsx)("img",{className:"appbar__logo",src:Wv,alt:"Lile Lahti"}),(0,Kv.jsx)("span",{className:"appbar__title",children:"Lile Lahti"})]}),(0,Kv.jsxs)("div",{className:"appbar__right",children:[n?(0,Kv.jsx)("span",{className:"nav-muted",children:"Tarkistetaan..."}):null,(0,Kv.jsx)("div",{className:"appbar__desktop",children:n?null:(0,Kv.jsxs)(Kv.Fragment,{children:[(0,Kv.jsx)("span",{className:"chip chip--muted",title:t.email||t.displayName,children:t.email||t.displayName}),s?(0,Kv.jsx)(Pt,{className:"chip chip--primary",to:"/admin",children:"Admin"}):null,(0,Kv.jsx)("button",{className:"icon-btn",type:"button","aria-label":"Kirjaudu ulos",onClick:()=>Jo(Vv),children:(0,Kv.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Kv.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Kv.jsx)("path",{d:"M16 17l5-5-5-5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Kv.jsx)("path",{d:"M21 12H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})}),(0,Kv.jsx)("div",{className:"appbar__mobile",children:(0,Kv.jsxs)("button",{className:"icon-btn appbar__menuBtn",type:"button","aria-label":r?"Sulje valikko":"Avaa valikko","aria-expanded":r,onClick:()=>o(e=>!e),children:[(0,Kv.jsx)("span",{className:"appbar__menuLabel","aria-hidden":"true",children:"Valikko"}),r?(0,Kv.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Kv.jsx)("path",{d:"M18 6L6 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Kv.jsx)("path",{d:"M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}):(0,Kv.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Kv.jsx)("path",{d:"M3 12h18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Kv.jsx)("path",{d:"M3 6h18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Kv.jsx)("path",{d:"M3 18h18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]})})]})]}),(0,Kv.jsx)("div",{className:"appbar__tagline",children:"T\xe4m\xe4 on ty\xf6kalu ruokapaikkojen ja reseptien jakamiseen."}),(0,Kv.jsxs)("nav",{className:"appbar__nav","aria-label":"P\xe4\xe4valikko",children:[(0,Kv.jsx)(Pt,{className:"nav-pill",to:"/",end:!0,children:"Etusivu"}),(0,Kv.jsx)(Pt,{className:"nav-pill",to:"/ruokapaikat",children:"Ruokapaikat"}),(0,Kv.jsx)(Pt,{className:"nav-pill",to:"/reseptit",children:"Reseptit"}),(0,Kv.jsx)(Pt,{className:"nav-pill",to:"/ohjekirja",children:"Ohjekirja"}),(0,Kv.jsx)(Pt,{className:"nav-pill",to:"/versiohistoria",children:"Versiohistoria"})]}),r?(0,Kv.jsx)("div",{className:"appbar__menu",role:"dialog","aria-label":"Valikko",children:(0,Kv.jsxs)("div",{className:"appbar__menuGrid",children:[(0,Kv.jsx)(Pt,{className:"menu-link",to:"/",end:!0,children:"Etusivu"}),(0,Kv.jsx)(Pt,{className:"menu-link",to:"/ruokapaikat",children:"Ruokapaikat"}),(0,Kv.jsx)(Pt,{className:"menu-link",to:"/reseptit",children:"Reseptit"}),(0,Kv.jsx)(Pt,{className:"menu-link",to:"/ohjekirja",children:"Ohjekirja"}),(0,Kv.jsx)(Pt,{className:"menu-link",to:"/versiohistoria",children:"Versiohistoria"}),(0,Kv.jsx)("div",{className:"menu-sep"}),(0,Kv.jsxs)("div",{className:"menu-meta",children:[(0,Kv.jsx)("span",{className:"nav-muted",children:t.email||t.displayName}),s?(0,Kv.jsx)(Pt,{className:"chip chip--primary",to:"/admin",children:"Admin"}):null,(0,Kv.jsx)("button",{className:"linkish",onClick:()=>Jo(Vv),children:"Kirjaudu ulos"})]})]})}):null]}),(0,Kv.jsx)("main",{className:"content",children:(0,Kv.jsx)(We,{})}),(0,Kv.jsx)("footer",{className:"footer",children:(0,Kv.jsx)("span",{className:"nav-muted",children:"Lile Lahti"})})]}):(0,Kv.jsx)("main",{className:"locked",children:(0,Kv.jsx)(We,{})})})):(0,Kv.jsx)(qe,{to:"/kirjaudu",replace:!0})}function Gv(t){let{children:n}=t;const{user:i,initializing:r}=qv(),o=be(),[s,a]=e.useState(""),[l,u]=e.useState(!1);return e.useEffect(()=>{if(null===i||void 0===i||!i.uid)return a(""),void u(!1);u(!0);const e=jv(vg(Bv,"users",i.uid),e=>{var t;const n=e.exists()?String((null===(t=e.data())||void 0===t?void 0:t.status)||""):"";a(n),u(!1)},()=>{a(""),u(!1)});return()=>e()},[null===i||void 0===i?void 0:i.uid]),e.useEffect(()=>{i&&("blocked"!==s&&"deleted"!==s||Jo(Vv).catch(()=>{}))},[s,i]),r?(0,Kv.jsx)("div",{children:"Ladataan..."}):i?l?(0,Kv.jsx)("div",{children:"Ladataan..."}):"blocked"===s||"deleted"===s?(0,Kv.jsx)(qe,{to:"/kirjaudu",replace:!0,state:{from:o,blocked:!0}}):n:(0,Kv.jsx)(qe,{to:"/kirjaudu",replace:!0,state:{from:o}})}function Qv(e){let{children:t}=e;const{user:n,initializing:i}=qv(),r=be();if(i)return(0,Kv.jsx)("div",{children:"Ladataan..."});if(!n)return(0,Kv.jsx)(qe,{to:"/kirjaudu",replace:!0,state:{from:r}});return(null===n||void 0===n?void 0:n.email)&&"toni@kauppinen.info"===n.email.toLowerCase()?t:(0,Kv.jsx)(qe,{to:"/",replace:!0})}function Jv(){return(0,Kv.jsxs)("div",{children:[(0,Kv.jsx)("h2",{children:"Tervetuloa"}),(0,Kv.jsx)("p",{children:"T\xe4m\xe4 sovellus on lihavuusleikattujen tukiryhm\xe4n yhteinen paikka, jossa voi jakaa hyv\xe4ksi koettuja vinkkej\xe4."}),(0,Kv.jsxs)("div",{className:"grid-2",children:[(0,Kv.jsxs)("div",{className:"card",children:[(0,Kv.jsx)("h3",{children:"Ruokapaikat"}),(0,Kv.jsx)("p",{children:"Lis\xe4\xe4 ja selaa ruokapaikkoja, joista l\xf6ytyy sopivia annoksia tai muita hy\xf6dyllisi\xe4 vinkkej\xe4."}),(0,Kv.jsx)(Nt,{className:"btn btn--primary",to:"/ruokapaikat",children:"Avaa ruokapaikat"})]}),(0,Kv.jsxs)("div",{className:"card",children:[(0,Kv.jsx)("h3",{children:"Reseptit"}),(0,Kv.jsx)("p",{children:"Tallenna ja l\xf6yd\xe4 reseptej\xe4, jotka sopivat arkeen ja toimivat omien tarpeiden mukaan."}),(0,Kv.jsx)(Nt,{className:"btn btn--primary",to:"/reseptit",children:"Avaa reseptit"})]})]}),(0,Kv.jsxs)("div",{className:"card",style:{marginTop:16},children:[(0,Kv.jsx)("h3",{children:"Versiohistoria"}),(0,Kv.jsx)("p",{children:"Sivulta n\xe4et k\xe4ytt\xe4j\xe4lle n\xe4kyv\xe4t muutokset ja uudet ominaisuudet."}),(0,Kv.jsx)(Nt,{className:"btn btn--secondary",to:"/versiohistoria",children:"Avaa versiohistoria"})]})]})}function Yv(t){let{value:n,onPick:i,placeholder:r}=t;const[o,s]=(0,e.useState)(n||""),[a,l]=(0,e.useState)([]),[u,c]=(0,e.useState)(!1),[h,d]=(0,e.useState)(""),f=(0,e.useMemo)(()=>r||"Hae osoitetta tai paikkaa (esim. ravintola, katuosoite)",[r]);return(0,e.useEffect)(()=>{s(n||"")},[n]),(0,e.useEffect)(()=>{const e=(o||"").trim();if(e.length<3)return l([]),void d("");const t=setTimeout(async()=>{c(!0),d("");try{const t=new URL("https://nominatim.openstreetmap.org/search");t.searchParams.set("format","json"),t.searchParams.set("addressdetails","1"),t.searchParams.set("limit","6"),t.searchParams.set("q",e);const n=await fetch(t.toString(),{headers:{Accept:"application/json"}});if(!n.ok)throw new Error("Osoitehaku ep\xe4onnistui.");const i=await n.json();l(Array.isArray(i)?i:[])}catch(xy){l([]),d((null===xy||void 0===xy?void 0:xy.message)||"Osoitehaku ep\xe4onnistui.")}finally{c(!1)}},450);return()=>clearTimeout(t)},[o]),(0,Kv.jsxs)("div",{className:"addr",children:[(0,Kv.jsx)("input",{className:"field__input",value:o,onChange:e=>s(e.target.value),placeholder:f}),u?(0,Kv.jsx)("div",{className:"addr__hint",children:"Haetaan..."}):null,h?(0,Kv.jsx)("div",{className:"addr__error",children:h}):null,a.length?(0,Kv.jsx)("div",{className:"addr__results",children:a.map(e=>(0,Kv.jsx)("button",{type:"button",className:"addr__result",onClick:()=>function(e){const t=Number(e.lat),n=Number(e.lon),r=e.address||{},o=r.city||r.town||r.village||r.municipality||r.hamlet||r.county||"";i({label:e.display_name,address:e.display_name,lat:t,lng:n,city:o,raw:e}),s(e.display_name),l([])}(e),children:e.display_name},"".concat(e.place_id)))}):null]})}const Xv=(0,e.createContext)(null);function $v(){const t=(0,e.use)(Xv);if(null==t)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}var ey=n(228),ty=n.n(ey);const ny=["bounds","boundsOptions","center","children","className","id","placeholder","style","whenReady","zoom"];function iy(t,n){let{bounds:i,boundsOptions:o,center:s,children:a,className:l,id:c,placeholder:h,style:d,whenReady:f,zoom:p}=t,m=r(t,ny);const[g]=(0,e.useState)({className:l,id:c,style:d}),[v,y]=(0,e.useState)(null),_=(0,e.useRef)(void 0);(0,e.useImperativeHandle)(n,()=>{var e;return null!==(e=null===v||void 0===v?void 0:v.map)&&void 0!==e?e:null},[v]);const b=(0,e.useCallback)(e=>{if(null!==e&&!_.current){const t=new ey.Map(e,m);_.current=t,null!=s&&null!=p?t.setView(s,p):null!=i&&t.fitBounds(i,o),null!=f&&t.whenReady(f),y(function(e){return Object.freeze({__version:1,map:e})}(t))}},[]);(0,e.useEffect)(()=>()=>{null===v||void 0===v||v.map.remove()},[v]);const w=v?e.createElement(Xv,{value:v},a):null!==h&&void 0!==h?h:null;return e.createElement("div",u(u({},g),{},{ref:b}),w)}const ry=(0,e.forwardRef)(iy);var oy=n(950);function sy(t,n){const i=(0,e.useRef)(n);(0,e.useEffect)(function(){n!==i.current&&null!=t.attributionControl&&(null!=i.current&&t.attributionControl.removeAttribution(i.current),null!=n&&t.attributionControl.addAttribution(n)),i.current=n},[t,n])}function ay(t,n){const i=(0,e.useRef)(void 0);(0,e.useEffect)(function(){return null!=n&&t.instance.on(n),i.current=n,function(){null!=i.current&&t.instance.off(i.current),i.current=null}},[t,n])}function ly(e,t){var n;const i=null!==(n=e.pane)&&void 0!==n?n:t.pane;return i?u(u({},e),{},{pane:i}):e}function uy(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function cy(t,n){return null==n?function(n,i){const r=(0,e.useRef)(void 0);return r.current||(r.current=t(n,i)),r}:function(i,r){const o=(0,e.useRef)(void 0);o.current||(o.current=t(i,r));const s=(0,e.useRef)(i),{instance:a}=o.current;return(0,e.useEffect)(function(){s.current!==i&&(n(a,i,s.current),s.current=i)},[a,i,n]),o}}function hy(t){return function(n){const i=$v(),r=t(ly(n,i),i);return sy(i.map,n.attribution),ay(r.current,n.eventHandlers),function(t,n){(0,e.useEffect)(function(){var e;return(null!==(e=n.layerContainer)&&void 0!==e?e:n.map).addLayer(t.instance),function(){var e;null===(e=n.layerContainer)||void 0===e||e.removeLayer(t.instance),n.map.removeLayer(t.instance)}},[n,t])}(r.current,i),r}}const dy=["url"],fy=function(t){function n(n,i){const{instance:r}=t(n).current;return(0,e.useImperativeHandle)(i,()=>r),null}return(0,e.forwardRef)(n)}(hy(cy(function(e,t){let{url:n}=e,i=r(e,dy);return uy(new ey.TileLayer(n,ly(i,t)),t)},function(e,t,n){!function(e,t,n){const{opacity:i,zIndex:r}=t;null!=i&&i!==n.opacity&&e.setOpacity(i),null!=r&&r!==n.zIndex&&e.setZIndex(r)}(e,t,n);const{url:i}=t;null!=i&&i!==n.url&&e.setUrl(i)})));const py=["position"],my=function(t,n){return function(t){function n(n,i){const{instance:r,context:o}=t(n).current;(0,e.useImperativeHandle)(i,()=>r);const{children:s}=n;return null==s?null:e.createElement(Xv,{value:o},s)}return(0,e.forwardRef)(n)}(hy(cy(t,n)))}(function(e,t){let{position:n}=e,i=r(e,py);const o=new ey.Marker(n,i);return uy(o,(s=t,a={overlayContainer:o},Object.freeze(u(u({},s),a))));var s,a},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}),gy=function(t,n){const i=function(e,t){return function(n,i){const r=$v(),o=e(ly(n,r),r);return sy(r.map,n.attribution),ay(o.current,n.eventHandlers),t(o.current,r,n,i),o}}(cy(t),n);return function(t){function n(n,i){const[r,o]=(0,e.useState)(!1),{instance:s}=t(n,o).current;(0,e.useImperativeHandle)(i,()=>s),(0,e.useEffect)(function(){r&&s.update()},[s,r,n.children]);const a=s._contentNode;return a?(0,oy.createPortal)(n.children,a):null}return(0,e.forwardRef)(n)}(i)}(function(e,t){return uy(new ey.Popup(e,t.overlayContainer),t)},function(t,n,i,r){let{position:o}=i;(0,e.useEffect)(function(){const{instance:e}=t;function i(t){t.popup===e&&(e.update(),r(!0))}function s(t){t.popup===e&&r(!1)}return n.map.on({popupopen:i,popupclose:s}),null==n.overlayContainer?(null!=o&&e.setLatLng(o),e.openOn(n.map)):n.overlayContainer.bindPopup(e),function(){var t;n.map.off({popupopen:i,popupclose:s}),null===(t=n.overlayContainer)||void 0===t||t.unbindPopup(),n.map.removeLayer(e)}},[t,n,r,o])});function vy(t){let{places:n,onSelectPlace:i,onSelectClusterPlaces:r}=t;const o=(0,e.useMemo)(()=>[60.9827,25.6615],[]),[s,a]=(0,e.useState)(null),[l,u]=(0,e.useState)(null),[c,h]=(0,e.useState)(!1),[d,f]=(0,e.useState)("");const p=(0,e.useMemo)(()=>{const e=new Map;for(const t of n||[]){if(!Number.isFinite(t.lat)||!Number.isFinite(t.lng))continue;const n="".concat(Number(t.lat).toFixed(5),",").concat(Number(t.lng).toFixed(5)),i=e.get(n)||[];i.push(t),e.set(n,i)}return Array.from(e.entries()).map(e=>{let[t,n]=e;const[i,r]=t.split(",");return{key:t,lat:Number(i),lng:Number(r),list:n}})},[n]);function m(e){return ty().divIcon({className:"multi-marker",html:'<div class="multi-marker__bubble">'.concat(e,"</div>"),iconSize:[36,36],iconAnchor:[18,36],popupAnchor:[0,-34]})}return(0,Kv.jsxs)("div",{className:"map",children:[(0,Kv.jsxs)("div",{className:"map__controls",children:[(0,Kv.jsx)("button",{className:"btn btn--secondary map__btn",type:"button",onClick:function(){f(""),"geolocation"in navigator?s&&(h(!0),navigator.geolocation.getCurrentPosition(e=>{const t=e.coords.latitude,n=e.coords.longitude;u({lat:t,lng:n}),s.setView([t,n],Math.max(s.getZoom(),14),{animate:!0}),h(!1)},()=>{f("Paikannus ep\xe4onnistui tai lupa ev\xe4ttiin."),h(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})):f("Paikannus ei ole k\xe4ytett\xe4viss\xe4 t\xe4ss\xe4 laitteessa.")},disabled:c||!s,children:c?"Paikannetaan...":"Paikanna minut"}),d?(0,Kv.jsx)("div",{className:"map__error",children:d}):null]}),(0,Kv.jsxs)(ry,{center:o,zoom:12,scrollWheelZoom:!0,style:{height:420,width:"100%"},whenReady:e=>a(e.target),children:[(0,Kv.jsx)(fy,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),l?(0,Kv.jsx)(my,{position:[l.lat,l.lng],children:(0,Kv.jsx)(gy,{children:(0,Kv.jsx)("strong",{children:"Sin\xe4 olet t\xe4ss\xe4"})})}):null,p.map(e=>1===e.list.length?(0,Kv.jsx)(my,{position:[e.lat,e.lng],placeId:e.list[0].id,eventHandlers:{click:()=>i(e.list[0])},children:(0,Kv.jsx)(gy,{children:(0,Kv.jsxs)("div",{style:{display:"grid",gap:6},children:[(0,Kv.jsx)("strong",{children:e.list[0].name}),(0,Kv.jsx)("div",{style:{opacity:.85},children:e.list[0].address}),(0,Kv.jsx)("button",{className:"btn btn--secondary",onClick:()=>i(e.list[0]),children:"Avaa"})]})})},e.list[0].id):(0,Kv.jsx)(my,{position:[e.lat,e.lng],icon:m(e.list.length),eventHandlers:{click:()=>r(e.list)},children:(0,Kv.jsx)(gy,{children:(0,Kv.jsxs)("div",{style:{display:"grid",gap:6},children:[(0,Kv.jsxs)("strong",{children:[e.list.length," paikkaa samalla kohdalla"]}),(0,Kv.jsx)("button",{className:"btn btn--secondary",onClick:()=>r(e.list),children:"Avaa lista"})]})})},e.key))]})]})}ty().Icon.Default.mergeOptions({iconRetinaUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",shadowUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"});function yy(){const{user:t}=qv(),n=(null===t||void 0===t?void 0:t.email)&&"toni@kauppinen.info"===t.email.toLowerCase();function i(e){return e?function(e,t){const n=(e||"").trim(),i=(t||"").trim();if(!n&&!i)return"";if(n.includes(",")){const e=n.split(",").map(e=>e.trim()).filter(Boolean),t=e=>!e||!!/suomi/i.test(e)||!!/manner-suomi/i.test(e)||!!/maakunta/i.test(e)||!!/seutukunta/i.test(e)||!!/\b(finland)\b/i.test(e)||!!/\b(paijat-hame|p\xe4ij\xe4t-h\xe4me)\b/i.test(e),r=e=>/^\d+[a-zA-Z]?$/.test(String(e||"").trim()),o=e=>/(katu|tie|polku|kuja|v\xe4yl\xe4|valtatie|raitti|bulevardi|tori|ranta|rinne|kaari)\b/i.test(e)||/[A-Za-z\xc5\xc4\xd6\xe5\xe4\xf6]/.test(e)&&/\d/.test(e);let s="";for(let n=0;n<e.length;n+=1){const i=e[n];if(!t(i)){if(o(i)){s=r(i)&&n+1<e.length&&o(e[n+1])?"".concat(e[n+1]," ").concat(i):!r(i)&&n+1<e.length&&r(e[n+1])?"".concat(i," ").concat(e[n+1]):i;break}if(r(i)&&n+1<e.length&&o(e[n+1])){s="".concat(e[n+1]," ").concat(i);break}}}const a=i||"";return[s||e.find(e=>!t(e))||n,a].filter(Boolean).join(", ")}return i?"".concat(n,", ").concat(i):n}(e.address,be(e)):""}function r(e){M(e),fe(null),me([])}const[o,s]=(0,e.useState)([]),[a,l]=(0,e.useState)(!0),[c,h]=(0,e.useState)(""),[d,f]=(0,e.useState)(""),[p,m]=(0,e.useState)(""),[g,v]=(0,e.useState)(""),[y,_]=(0,e.useState)(""),[b,w]=(0,e.useState)(""),[k,S]=(0,e.useState)(""),[E,x]=(0,e.useState)(null),[T,C]=(0,e.useState)(!1),[I,N]=(0,e.useState)(""),[P,A]=(0,e.useState)(""),[L,R]=(0,e.useState)(""),[O,M]=(0,e.useState)("list"),[D,j]=(0,e.useState)(null),[z,F]=(0,e.useState)(""),[U,V]=(0,e.useState)(""),[B,H]=(0,e.useState)(""),[q,W]=(0,e.useState)(""),[K,Z]=(0,e.useState)(""),[G,Q]=(0,e.useState)(""),[J,Y]=(0,e.useState)(null),[X,$]=(0,e.useState)(!1),[ee,te]=(0,e.useState)(""),[ne,ie]=(0,e.useState)(!1),[re,oe]=(0,e.useState)(""),[se,ae]=(0,e.useState)(""),[le,ue]=(0,e.useState)(null),[ce,he]=(0,e.useState)(""),[de,fe]=(0,e.useState)(null),[pe,me]=(0,e.useState)([]),[ge,ve]=(0,e.useState)(""),[ye,_e]=(0,e.useState)("");function be(e){return(e.city||"").trim()||function(e){const t=String(e||"");if(!t.includes(","))return"";const n=t.split(",").map(e=>e.trim()).filter(Boolean),i=e=>!e||!!/\d/.test(e)||e.length<2||e.length>40||!!/suomi/i.test(e)||!!/manner-suomi/i.test(e)||!!/maakunta/i.test(e)||!!/seutukunta/i.test(e)||!!/\b(finland)\b/i.test(e)||!!/\b(paijat-hame|p\xe4ij\xe4t-h\xe4me)\b/i.test(e);for(let r=n.length-1;r>=0;r-=1){const e=n[r];if(!i(e))return e}return""}(e.address)}function we(e){if(!e)return"";try{if("function"===typeof(null===e||void 0===e?void 0:e.toDate))return e.toDate().toLocaleString("fi-FI");if(e instanceof Date)return e.toLocaleString("fi-FI")}catch(t){return""}return""}(0,e.useEffect)(()=>{const e=jv(lv(gg(Bv,"places"),fv("createdAt","desc")),e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));s(t),l(!1)},e=>{h((null===e||void 0===e?void 0:e.message)||"Ruokapaikkojen lataus ep\xe4onnistui."),l(!1)});return()=>e()},[]);const ke=Boolean(d.trim())&&Boolean(null===E||void 0===E?void 0:E.lat)&&Boolean(null===E||void 0===E?void 0:E.lng),Se=(0,e.useMemo)(()=>{const e=new Set;for(const t of o){const n=be(t);n&&e.add(n)}return Array.from(e).sort((e,t)=>e.localeCompare(t,"fi"))},[o]),Ee=(0,e.useMemo)(()=>{const e=(P||"").trim().toLowerCase(),t=(L||"").trim().toLowerCase();return o.filter(n=>{if(t){if(String(be(n)||"").toLowerCase()!==t)return!1}if(!e)return!0;return"".concat(n.name||""," ").concat(n.address||""," ").concat(n.notes||""," ").concat(n.benefit||""," ").concat(n.website||""," ").concat(n.hours||"").toLowerCase().includes(e)})},[o,P,L]);function xe(e){j(e),F((null===e||void 0===e?void 0:e.name)||""),V((null===e||void 0===e?void 0:e.notes)||""),H((null===e||void 0===e?void 0:e.benefit)||""),W((null===e||void 0===e?void 0:e.website)||""),Z((null===e||void 0===e?void 0:e.hours)||""),Q((null===e||void 0===e?void 0:e.address)||""),Y(null),te(""),oe(""),ae("")}function Te(e){return e?"number"===typeof e.likeCount?e.likeCount:Array.isArray(e.likedBy)?e.likedBy.length:0:0}function Ce(e){return!(!e||null===t||void 0===t||!t.uid)&&(Array.isArray(e.likedBy)&&e.likedBy.includes(t.uid))}async function Ie(e){if(null!==t&&void 0!==t&&t.uid&&e){ve(e),_e("");try{const n=vg(Bv,"places",e);await Av(Bv,async e=>{const i=await e.get(n);if(!i.exists())return;const r=i.data()||{},o=Array.isArray(r.likedBy)?r.likedBy:[],s="number"===typeof r.likeCount?r.likeCount:o.length,a=o.includes(t.uid),l=a?o.filter(e=>e!==t.uid):[...o,t.uid],u=a?Math.max(0,s-1):s+1;e.update(n,{likedBy:l,likeCount:u})})}catch(xy){_e((null===xy||void 0===xy?void 0:xy.message)||"Tykk\xe4yksen tallennus ep\xe4onnistui.")}finally{ve("")}}}return(0,e.useEffect)(()=>{if(null===D||void 0===D||!D.id)return ue(null),void he("");const e=jv(lv(gg(Bv,"placeRemovalRequests"),cv("placeId","==",D.id),cv("status","==","pending"),mv(1)),e=>{const t=[];e.forEach(e=>t.push(u({id:e.id},e.data()))),ue(t[0]||null),he("")},e=>{ue(null),he((null===e||void 0===e?void 0:e.message)||"Poistopyynn\xf6n tilan tarkistus ep\xe4onnistui.")});return()=>e()},[null===D||void 0===D?void 0:D.id]),(0,Kv.jsxs)("div",{children:[(0,Kv.jsx)("h2",{children:"Ruokapaikat"}),(0,Kv.jsx)("p",{children:"Lis\xe4\xe4 ja selaa ruokapaikkoja. Kartasta voit avata paikan klikkaamalla markeria."}),(0,Kv.jsxs)("div",{className:"tabs",style:{marginBottom:16},children:[(0,Kv.jsx)("button",{type:"button",className:"list"===O?"tab tab--active":"tab",onClick:()=>r("list"),children:"Lista"}),(0,Kv.jsx)("button",{type:"button",className:"map"===O?"tab tab--active":"tab",onClick:()=>r("map"),children:"Kartta"}),(0,Kv.jsx)("button",{type:"button",className:"add"===O?"tab tab--active":"tab",onClick:()=>r("add"),children:"Lis\xe4\xe4"})]}),"list"===O||"map"===O?(0,Kv.jsxs)("details",{className:"card disclosure",style:{marginBottom:16},children:[(0,Kv.jsx)("summary",{className:"disclosure__summary",children:"Haku"}),(0,Kv.jsxs)("div",{className:"disclosure__body",children:[(0,Kv.jsxs)("div",{className:"filters",children:[(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Hae (nimi, osoite, lis\xe4tiedot)"}),(0,Kv.jsx)("input",{className:"field__input",value:P,onChange:e=>A(e.target.value),placeholder:"Esim. lahti, pizza, ABC..."})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Paikkakunta"}),(0,Kv.jsxs)("select",{className:"field__input",value:L,onChange:e=>R(e.target.value),children:[(0,Kv.jsx)("option",{value:"",children:"Kaikki"}),Se.map(e=>(0,Kv.jsx)("option",{value:e,children:e},e))]})]})]}),(0,Kv.jsxs)("div",{className:"hint",children:["N\xe4ytet\xe4\xe4n ",Ee.length," / ",o.length]})]})]}):null,"add"===O?(0,Kv.jsxs)("div",{className:"card",children:[(0,Kv.jsx)("h3",{children:"Lis\xe4\xe4 uusi paikka"}),(0,Kv.jsxs)("form",{onSubmit:async function(e){if(e.preventDefault(),t&&ke){C(!0),N("");try{await Dv(gg(Bv,"places"),{name:d.trim(),notes:p.trim(),benefit:g.trim(),website:y.trim(),hours:b.trim(),address:E.address,city:(E.city||"").trim(),lat:E.lat,lng:E.lng,createdAt:$g(),createdByUid:t.uid,createdByEmail:t.email||null}),f(""),m(""),v(""),_(""),w(""),S(""),x(null)}catch(n){N((null===n||void 0===n?void 0:n.message)||"Tallennus ep\xe4onnistui.")}finally{C(!1)}}},className:"form",children:[(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Nimi"}),(0,Kv.jsx)("input",{className:"field__input",value:d,onChange:e=>f(e.target.value),placeholder:"Esim. Ravintola X",required:!0})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Osoite (haku)"}),(0,Kv.jsx)(Yv,{value:k,onPick:e=>{x(e),S(e.label)}}),E?(0,Kv.jsxs)("div",{className:"hint",children:["Valittu: ",E.address]}):null]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Lis\xe4tiedot (valinnainen)"}),(0,Kv.jsx)("textarea",{className:"field__input",value:p,onChange:e=>m(e.target.value),rows:3,placeholder:"Esim. annoskoko, vinkit, aukioloajat..."})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Etu/Alennus (valinnainen)"}),(0,Kv.jsx)("input",{className:"field__input",value:g,onChange:e=>v(e.target.value),placeholder:"Esim. -10% opiskelijalle, lounasetu..."})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Nettisivu (valinnainen)"}),(0,Kv.jsx)("input",{className:"field__input",value:y,onChange:e=>_(e.target.value),placeholder:"https://..."})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Aukioloajat (valinnainen)"}),(0,Kv.jsx)("input",{className:"field__input",value:b,onChange:e=>w(e.target.value),placeholder:"Esim. ma\u2013pe 10\u201320"})]}),(0,Kv.jsx)("button",{className:"btn btn--primary",type:"submit",disabled:!ke||T,children:T?"Tallennetaan...":"Tallenna paikka"}),I?(0,Kv.jsx)("div",{className:"error",children:I}):null]})]}):null,"map"===O?(0,Kv.jsxs)("div",{className:"card",children:[(0,Kv.jsx)("h3",{children:"Kartta"}),(0,Kv.jsx)(vy,{places:Ee.map(e=>u(u({},e),{},{lat:"number"===typeof e.lat?e.lat:Number(e.lat),lng:"number"===typeof e.lng?e.lng:Number(e.lng)})),onSelectPlace:e=>{fe(e),me([])},onSelectClusterPlaces:e=>{me(e),fe(null)}}),pe.length?(0,Kv.jsxs)("div",{className:"cluster",children:[(0,Kv.jsxs)("div",{className:"cluster__header",children:[(0,Kv.jsxs)("strong",{children:[pe.length," paikkaa samalla alueella"]}),(0,Kv.jsx)("button",{className:"btn btn--ghost",type:"button",onClick:()=>me([]),children:"Sulje"})]}),(0,Kv.jsx)("div",{className:"cluster__list",children:pe.map(e=>(0,Kv.jsxs)("button",{type:"button",className:"cluster__item",onClick:()=>{fe(e),me([])},children:[(0,Kv.jsx)("div",{className:"cluster__name",children:e.name}),(0,Kv.jsx)("div",{className:"cluster__addr",children:i(e)||e.address})]},e.id))})]}):null]}):null,"list"===O?(0,Kv.jsxs)("div",{className:"card",style:{marginTop:16},children:[(0,Kv.jsx)("h3",{children:"Lista"}),a?(0,Kv.jsx)("div",{children:"Haetaan ruokapaikkoja..."}):null,c?(0,Kv.jsx)("div",{className:"error",children:c}):null,a||o.length?null:(0,Kv.jsx)("div",{children:"Ei viel\xe4 ruokapaikkoja. Lis\xe4\xe4 ensimm\xe4inen!"}),a||!o.length||Ee.length?null:(0,Kv.jsx)("div",{children:"Ei hakuehtoja vastaavia paikkoja."}),Ee.length?(0,Kv.jsx)("div",{className:"list",children:Ee.map(e=>(0,Kv.jsxs)("div",{className:"list__row",children:[(0,Kv.jsxs)("button",{type:"button",className:"list__item",onClick:()=>{fe(e),me([])},children:[(0,Kv.jsx)("div",{className:"list__name",children:e.name}),(0,Kv.jsx)("div",{className:"list__addr",children:i(e)||e.address}),e.benefit?(0,Kv.jsxs)("div",{className:"list__notes",children:[(0,Kv.jsx)("strong",{children:"Etu:"})," ",String(e.benefit).slice(0,90),String(e.benefit).length>90?"\u2026":""]}):null,e.website?(0,Kv.jsxs)("div",{className:"list__notes",children:[(0,Kv.jsx)("strong",{children:"Nettisivu:"})," ",String(e.website).slice(0,60),String(e.website).length>60?"\u2026":""]}):null,e.hours?(0,Kv.jsxs)("div",{className:"list__notes",children:[(0,Kv.jsx)("strong",{children:"Aukiolo:"})," ",String(e.hours).slice(0,90),String(e.hours).length>90?"\u2026":""]}):null,e.notes?(0,Kv.jsxs)("div",{className:"list__notes",children:[(0,Kv.jsx)("strong",{children:"Lis\xe4tiedot:"})," ",String(e.notes).slice(0,90),String(e.notes).length>90?"\u2026":""]}):null]}),(0,Kv.jsxs)("div",{className:"list__actions",children:[(0,Kv.jsx)("button",{type:"button",className:Ce(e)?"icon-btn icon-btn--active":"icon-btn","aria-label":"Tykk\xe4\xe4",disabled:ge===e.id,onClick:()=>Ie(e.id),children:(0,Kv.jsxs)("div",{className:"like-btn",children:[(0,Kv.jsx)("span",{className:"like-btn__icon",children:"\ud83d\udc4d"}),(0,Kv.jsx)("span",{className:"like-btn__count",children:Te(e)})]})}),n||e.createdByUid===(null===t||void 0===t?void 0:t.uid)?(0,Kv.jsx)("button",{type:"button",className:"icon-btn","aria-label":"Muokkaa",onClick:()=>xe(e),children:(0,Kv.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Kv.jsx)("path",{d:"M12 20H21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Kv.jsx)("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}):null]})]},e.id))}):null]}):null,de?(0,Kv.jsxs)("div",{className:"modal",role:"dialog","aria-modal":"true",children:[(0,Kv.jsx)("div",{className:"modal__backdrop",onClick:()=>fe(null)}),(0,Kv.jsxs)("div",{className:"modal__panel modal__panel--sheet",children:[(0,Kv.jsxs)("div",{className:"modal__header",children:[(0,Kv.jsx)("strong",{children:de.name}),(0,Kv.jsx)("button",{className:"btn btn--ghost",type:"button",onClick:()=>fe(null),children:"Sulje"})]}),(0,Kv.jsxs)("div",{className:"detail__body",children:[(0,Kv.jsx)("div",{style:{opacity:.9},children:i(de)||de.address}),(0,Kv.jsx)("div",{style:{marginTop:10,display:"flex",gap:10,alignItems:"center"},children:(0,Kv.jsxs)("button",{type:"button",className:Ce(de)?"btn btn--secondary like-pill like-pill--active":"btn btn--secondary like-pill",onClick:()=>Ie(de.id),disabled:ge===de.id,children:["\ud83d\udc4d ",Te(de)]})}),de.website?(0,Kv.jsxs)("div",{className:"detail__section",children:[(0,Kv.jsx)("div",{className:"detail__sectionTitle",children:"Nettisivu"}),(0,Kv.jsx)("div",{className:"detail__sectionBody",children:(0,Kv.jsx)("a",{href:function(e){const t=String(e||"").trim();return t?/^https?:\/\//i.test(t)?t:"https://".concat(t):""}(de.website),target:"_blank",rel:"noreferrer",children:String(de.website).trim()})})]}):null,de.hours?(0,Kv.jsxs)("div",{className:"detail__section",children:[(0,Kv.jsx)("div",{className:"detail__sectionTitle",children:"Aukioloajat"}),(0,Kv.jsx)("div",{className:"detail__sectionBody",children:de.hours})]}):null,de.benefit?(0,Kv.jsxs)("div",{className:"detail__section",children:[(0,Kv.jsx)("div",{className:"detail__sectionTitle",children:"Etu/Alennus"}),(0,Kv.jsx)("div",{className:"detail__sectionBody",children:de.benefit})]}):null,de.notes?(0,Kv.jsxs)("div",{className:"detail__section",children:[(0,Kv.jsx)("div",{className:"detail__sectionTitle",children:"Lis\xe4tiedot"}),(0,Kv.jsx)("div",{className:"detail__sectionBody",children:de.notes})]}):null]}),ye?(0,Kv.jsx)("div",{className:"error",children:ye}):null,!n&&de.createdByUid!==(null===t||void 0===t?void 0:t.uid)||"list"!==O?null:(0,Kv.jsx)("div",{style:{marginTop:12},children:(0,Kv.jsx)("button",{className:"btn",type:"button",onClick:()=>xe(de),children:"Muokkaa"})})]})]}):null,D?(0,Kv.jsxs)("div",{className:"modal",role:"dialog","aria-modal":"true",children:[(0,Kv.jsx)("div",{className:"modal__backdrop",onClick:()=>j(null)}),(0,Kv.jsxs)("div",{className:"modal__panel",children:[(0,Kv.jsxs)("div",{className:"modal__header",children:[(0,Kv.jsx)("strong",{children:"Muokkaa paikkaa"}),(0,Kv.jsx)("button",{className:"btn btn--ghost",type:"button",onClick:()=>j(null),children:"Sulje"})]}),(0,Kv.jsxs)("div",{className:"modal__meta",children:[(0,Kv.jsxs)("div",{children:["Luotu: ",we(D.createdAt)||"-"]}),(0,Kv.jsxs)("div",{children:["Muokattu: ",we(D.updatedAt)||"-"]})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Nimi"}),(0,Kv.jsx)("input",{className:"field__input",value:z,onChange:e=>F(e.target.value)})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Lis\xe4tiedot"}),(0,Kv.jsx)("textarea",{className:"field__input",rows:3,value:U,onChange:e=>V(e.target.value)})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Etu/Alennus"}),(0,Kv.jsx)("input",{className:"field__input",value:B,onChange:e=>H(e.target.value),placeholder:"Esim. -10% opiskelijalle, lounasetu..."})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Nettisivu"}),(0,Kv.jsx)("input",{className:"field__input",value:q,onChange:e=>W(e.target.value),placeholder:"https://..."})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Aukioloajat"}),(0,Kv.jsx)("input",{className:"field__input",value:K,onChange:e=>Z(e.target.value),placeholder:"Esim. ma\u2013pe 10\u201320"})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Osoite (haku)"}),(0,Kv.jsx)(Yv,{value:G,onPick:e=>{Y(e),Q(e.label)}}),J?(0,Kv.jsxs)("div",{className:"hint",children:["Valittu: ",J.address]}):null]}),(0,Kv.jsxs)("div",{className:"modal__actions",children:[(0,Kv.jsx)("button",{className:"btn btn--primary",type:"button",onClick:async function(){if(t&&D){$(!0),te("");try{const e={name:(z||"").trim(),notes:(U||"").trim(),benefit:(B||"").trim(),website:(q||"").trim(),hours:(K||"").trim(),updatedAt:$g(),updatedByUid:t.uid,updatedByEmail:t.email||null};null!==J&&void 0!==J&&J.address&&Number.isFinite(null===J||void 0===J?void 0:J.lat)&&Number.isFinite(null===J||void 0===J?void 0:J.lng)&&(e.address=J.address,e.lat=J.lat,e.lng=J.lng,e.city=(J.city||"").trim()),await Ov(vg(Bv,"places",D.id),e),j(null)}catch(xy){te((null===xy||void 0===xy?void 0:xy.message)||"Tallennus ep\xe4onnistui.")}finally{$(!1)}}},disabled:X,children:X?"Tallennetaan...":"Tallenna"}),n?(0,Kv.jsx)("button",{className:"btn btn--secondary",type:"button",onClick:async function(){if(!t||!D)return;if(!n)return;const e=D.name?"\u201c".concat(D.name,"\u201d"):"t\xe4m\xe4 paikka";if(window.confirm("Poistetaanko ".concat(e,"?\n\nT\xe4t\xe4 ei voi perua."))){ie(!0),oe(""),ae("");try{await Mv(vg(Bv,"places",D.id)),j(null)}catch(xy){oe((null===xy||void 0===xy?void 0:xy.message)||"Poisto ep\xe4onnistui.")}finally{ie(!1)}}},disabled:ne,children:ne?"Poistetaan...":"Poista paikka"}):(0,Kv.jsx)("button",{className:"btn btn--secondary",type:"button",onClick:async function(){if(t&&D&&!le){ie(!0),oe(""),ae("");try{await Dv(gg(Bv,"placeRemovalRequests"),{placeId:D.id,placeName:D.name||"",requestedAt:$g(),requestedByUid:t.uid,requestedByEmail:t.email||null,status:"pending"}),ae("Poistopyynt\xf6 l\xe4hetetty. Se odottaa yll\xe4pidon k\xe4sittely\xe4.")}catch(xy){oe((null===xy||void 0===xy?void 0:xy.message)||"Poistopyynn\xf6n l\xe4hetys ep\xe4onnistui.")}finally{ie(!1)}}},disabled:ne||!!le,children:ne?"L\xe4hetet\xe4\xe4n...":le?"Poistopyynt\xf6 l\xe4hetetty":"Pyyd\xe4 poistoa"})]}),ee?(0,Kv.jsx)("div",{className:"error",children:ee}):null,re?(0,Kv.jsx)("div",{className:"error",children:re}):null,se?(0,Kv.jsx)("div",{className:"hint",children:se}):null,!n&&le?(0,Kv.jsx)("div",{className:"hint",style:{marginTop:8},children:"Poistopyynt\xf6 odottaa k\xe4sittely\xe4."}):null,n||le||!ce?null:(0,Kv.jsx)("div",{className:"hint",style:{marginTop:8},children:"Poistopyynn\xf6n tilaa ei voitu tarkistaa."}),n||re||ne?null:(0,Kv.jsx)("div",{className:"hint",children:"Poistopyynt\xf6 menee yll\xe4pit\xe4j\xe4lle hyv\xe4ksytt\xe4v\xe4ksi."})]})]}):null]})}function _y(){const{user:t}=qv(),n=(null===t||void 0===t?void 0:t.email)&&"toni@kauppinen.info"===t.email.toLowerCase(),[i,r]=(0,e.useState)("list"),[o,s]=(0,e.useState)(""),[a,l]=(0,e.useState)([]),[c,h]=(0,e.useState)(!0),[d,f]=(0,e.useState)(""),[p,m]=(0,e.useState)(""),[g,v]=(0,e.useState)(""),[y,_]=(0,e.useState)(""),[b,w]=(0,e.useState)(""),[k,S]=(0,e.useState)(""),[E,x]=(0,e.useState)(""),[T,C]=(0,e.useState)(""),[I,N]=(0,e.useState)(""),[P,A]=(0,e.useState)(!1),[L,R]=(0,e.useState)(""),[O,M]=(0,e.useState)(""),[D,j]=(0,e.useState)(null),[z,F]=(0,e.useState)(""),[U,V]=(0,e.useState)(""),[B,H]=(0,e.useState)(""),[q,W]=(0,e.useState)(""),[K,Z]=(0,e.useState)(""),[G,Q]=(0,e.useState)(""),[J,Y]=(0,e.useState)(!1),[X,$]=(0,e.useState)(""),[ee,te]=(0,e.useState)(""),[ne,ie]=(0,e.useState)("");(0,e.useEffect)(()=>{const e=jv(lv(gg(Bv,"recipes"),fv("createdAt","desc")),e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));l(t),h(!1)},e=>{f((null===e||void 0===e?void 0:e.message)||"Reseptien lataus ep\xe4onnistui."),h(!1)});return()=>e()},[]);const re=(0,e.useMemo)(()=>{const e=new Set;for(const t of a){const n=String((null===t||void 0===t?void 0:t.category)||"").trim();n&&e.add(n)}return Array.from(e).sort((e,t)=>e.localeCompare(t,"fi"))},[a]),oe=(0,e.useMemo)(()=>{const e=(p||"").trim().toLowerCase(),t=(g||"").trim().toLowerCase();return a.filter(n=>{if(t){if(String((null===n||void 0===n?void 0:n.category)||"").trim().toLowerCase()!==t)return!1}if(!e)return!0;return"".concat(n.title||""," ").concat(n.category||""," ").concat(n.description||""," ").concat(n.ingredients||""," ").concat(n.instructions||"").toLowerCase().includes(e)})},[a,p,g]),se=(0,e.useMemo)(()=>{const e=new Set;for(const i of re)e.add(i);const t=String(b||"").trim();t&&e.add(t);const n=String(U||"").trim();return n&&e.add(n),Array.from(e).sort((e,t)=>e.localeCompare(t,"fi"))},[re,b,U]);function ae(e){const t=String(e||"").trim();return t?/^https?:\/\//i.test(t)?t:"https://".concat(t):""}function le(e){if(!e)return"";try{if("function"===typeof(null===e||void 0===e?void 0:e.toDate))return e.toDate().toLocaleString("fi-FI");if(e instanceof Date)return e.toLocaleString("fi-FI")}catch(t){return""}return""}function ue(e){return!(!e||null===t||void 0===t||!t.uid)&&(!!n||e.createdByUid===t.uid)}function ce(){j(null),$("")}return(0,Kv.jsxs)("div",{children:[(0,Kv.jsx)("h2",{children:"Reseptit"}),(0,Kv.jsxs)("div",{className:"row",style:{gap:10,flexWrap:"wrap",marginBottom:12},children:[(0,Kv.jsx)("button",{className:"list"===i?"btn":"btn btn--secondary",type:"button",onClick:()=>{r("list")},children:"Lista"}),(0,Kv.jsx)("button",{className:"add"===i?"btn":"btn btn--secondary",type:"button",onClick:()=>{r("add"),M(""),R("")},children:"Lis\xe4\xe4"})]}),(0,Kv.jsxs)("div",{className:"grid",style:{gap:14},children:[(0,Kv.jsx)("datalist",{id:"recipeCategories",children:se.map(e=>(0,Kv.jsx)("option",{value:e},e))}),"list"===i?(0,Kv.jsxs)(Kv.Fragment,{children:[(0,Kv.jsxs)("section",{className:"card",children:[(0,Kv.jsx)("h3",{children:"Hae"}),(0,Kv.jsxs)("div",{className:"grid",style:{gap:10},children:[(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Haku"}),(0,Kv.jsx)("input",{className:"field__input",value:p,onChange:e=>m(e.target.value),placeholder:"Hae otsikolla, sis\xe4ll\xf6ll\xe4 tai aineksilla..."})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Kategoria"}),(0,Kv.jsxs)("select",{className:"field__input",value:g,onChange:e=>v(e.target.value),children:[(0,Kv.jsx)("option",{value:"",children:"Kaikki"}),re.map(e=>(0,Kv.jsx)("option",{value:e,children:e},e))]})]})]})]}),(0,Kv.jsxs)("section",{className:"card",children:[(0,Kv.jsx)("h3",{children:"Reseptilista"}),c?(0,Kv.jsx)("div",{children:"Haetaan reseptej\xe4..."}):null,d?(0,Kv.jsx)("div",{className:"error",children:d}):null,ne?(0,Kv.jsx)("div",{className:"error",children:ne}):null,O?(0,Kv.jsx)("div",{className:"ok",children:O}):null,c||d?null:(0,Kv.jsx)("div",{className:"list",children:oe.length?oe.map(e=>{const i=function(e){return!(!e||null===t||void 0===t||!t.uid)&&Array.isArray(e.likedBy)&&e.likedBy.includes(t.uid)}(e),r=function(e){return e?"number"===typeof e.likeCount?e.likeCount:Array.isArray(e.likedBy)?e.likedBy.length:0:0}(e),a=(null===e||void 0===e?void 0:e.createdByUid)&&(null===t||void 0===t?void 0:t.uid)&&e.createdByUid===t.uid,l=ue(e),u=o===e.id;return(0,Kv.jsxs)("div",{className:"list__item",style:{cursor:"default"},children:[(0,Kv.jsxs)("div",{className:"row",style:{justifyContent:"space-between",gap:10,alignItems:"baseline"},children:[(0,Kv.jsxs)("div",{style:{display:"grid",gap:4},children:[(0,Kv.jsx)("strong",{style:{fontSize:"1.05rem"},children:e.title||"(ei otsikkoa)"}),(0,Kv.jsxs)("div",{className:"nav-muted",style:{display:"flex",gap:10,flexWrap:"wrap"},children:[e.category?(0,Kv.jsx)("span",{className:"chip chip--muted",children:e.category}):null,a?(0,Kv.jsx)("span",{className:"chip chip--muted",children:"Sinun"}):null,n&&!a?(0,Kv.jsx)("span",{className:"chip chip--muted",children:"Muu k\xe4ytt\xe4j\xe4"}):null,e.createdAt?(0,Kv.jsx)("span",{children:le(e.createdAt)}):null]})]}),(0,Kv.jsxs)("div",{className:"row",style:{gap:8,alignItems:"center",flexWrap:"wrap",justifyContent:"flex-end"},children:[(0,Kv.jsxs)("button",{className:"btn btn--secondary like-pill ".concat(i?"like-pill--active":""),type:"button",onClick:()=>async function(e){if(null!==t&&void 0!==t&&t.uid&&e){te(e),ie("");try{const n=vg(Bv,"recipes",e);await Av(Bv,async e=>{const i=await e.get(n);if(!i.exists())return;const r=i.data()||{},o=Array.isArray(r.likedBy)?r.likedBy:[],s="number"===typeof r.likeCount?r.likeCount:o.length,a=o.includes(t.uid),l=a?o.filter(e=>e!==t.uid):[...o,t.uid],u=a?Math.max(0,s-1):s+1;e.update(n,{likedBy:l,likeCount:u})})}catch(xy){ie((null===xy||void 0===xy?void 0:xy.message)||"Tykk\xe4yksen tallennus ep\xe4onnistui.")}finally{te("")}}}(e.id),disabled:ee===e.id,"aria-label":i?"Poista tykk\xe4ys":"Tykk\xe4\xe4",children:[(0,Kv.jsx)("span",{"aria-hidden":"true",children:"\ud83d\udc4d"}),(0,Kv.jsx)("span",{className:"like-btn__count",children:r})]}),(0,Kv.jsx)("button",{className:"btn btn--secondary",type:"button",onClick:()=>{return t=e.id,void s(e=>e===t?"":t);var t},children:u?"Sulje":"Avaa"}),l?(0,Kv.jsx)("button",{className:"btn btn--secondary",type:"button",onClick:()=>function(e){j(e),F((null===e||void 0===e?void 0:e.title)||""),V((null===e||void 0===e?void 0:e.category)||""),H((null===e||void 0===e?void 0:e.description)||""),W((null===e||void 0===e?void 0:e.ingredients)||""),Z((null===e||void 0===e?void 0:e.instructions)||""),Q((null===e||void 0===e?void 0:e.sourceUrl)||""),$("")}(e),children:"Muokkaa"}):null]})]}),u?(0,Kv.jsxs)("div",{className:"grid",style:{marginTop:12,gap:10},children:[(0,Kv.jsx)("div",{className:"row",style:{gap:10,flexWrap:"wrap",justifyContent:"flex-end"},children:(0,Kv.jsx)("button",{className:"btn btn--secondary",type:"button",onClick:()=>function(e){if(!e)return;const t=window.open("","_blank");if(!t)return;const n=e=>String(e||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),i=e.title||"Resepti",r='<!doctype html>\n<html lang="fi">\n  <head>\n    <meta charset="utf-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1" />\n    <title>'.concat(n(i),"</title>\n    <style>\n      body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.4;margin:24px;color:#111}\n      h1{margin:0 0 8px 0;font-size:22px}\n      .meta{margin:0 0 16px 0;color:#444;font-size:13px}\n      h2{margin:18px 0 8px 0;font-size:16px}\n      pre{white-space:pre-wrap;word-break:break-word;margin:0;padding:12px;border:1px solid #ddd;border-radius:10px;background:#fafafa}\n      a{color:#0b57d0}\n      @media print{a{color:#000;text-decoration:none}}\n    </style>\n  </head>\n  <body>\n    <h1>").concat(n(i),'</h1>\n    <div class="meta">').concat(n(e.category||""),"</div>\n    ").concat(e.description?"<div>".concat(n(e.description),"</div>"):"","\n    ").concat(e.ingredients?"<h2>Ainekset</h2><pre>".concat(n(e.ingredients),"</pre>"):"","\n    ").concat(e.instructions?"<h2>Ohje</h2><pre>".concat(n(e.instructions),"</pre>"):"","\n    ").concat(e.sourceUrl?'<h2>L\xe4hde</h2><div><a href="'.concat(n(e.sourceUrl),'">').concat(n(e.sourceUrl),"</a></div>"):"","\n    <script>window.focus(); setTimeout(() => window.print(), 150);<\/script>\n  </body>\n</html>");t.document.open(),t.document.write(r),t.document.close()}(e),children:"Tulosta"})}),e.description?(0,Kv.jsx)("div",{style:{opacity:.92},children:e.description}):null,e.ingredients?(0,Kv.jsxs)("div",{children:[(0,Kv.jsx)("div",{className:"field__label",children:"Ainekset"}),(0,Kv.jsx)("pre",{className:"md",style:{whiteSpace:"pre-wrap",margin:0},children:e.ingredients})]}):null,e.instructions?(0,Kv.jsxs)("div",{children:[(0,Kv.jsx)("div",{className:"field__label",children:"Ohje"}),(0,Kv.jsx)("pre",{className:"md",style:{whiteSpace:"pre-wrap",margin:0},children:e.instructions})]}):null,e.sourceUrl?(0,Kv.jsxs)("div",{children:[(0,Kv.jsx)("div",{className:"field__label",children:"L\xe4hde"}),(0,Kv.jsx)("a",{className:"link",href:e.sourceUrl,target:"_blank",rel:"noreferrer",children:e.sourceUrl})]}):null]}):null]},e.id)}):(0,Kv.jsx)("div",{className:"nav-muted",children:"Ei reseptej\xe4 (tai haku ei osunut)."})})]})]}):null,"add"===i?(0,Kv.jsxs)("section",{className:"card",children:[(0,Kv.jsx)("h3",{children:"Lis\xe4\xe4 resepti"}),(0,Kv.jsxs)("form",{className:"grid",style:{gap:10},onSubmit:async function(e){if(e.preventDefault(),null===t||void 0===t||!t.uid)return;const n=String(y||"").trim();if(n){A(!0),R(""),M("");try{const e=await Dv(gg(Bv,"recipes"),{title:n,category:String(b||"").trim(),description:String(k||"").trim(),ingredients:String(E||"").trim(),instructions:String(T||"").trim(),sourceUrl:ae(I),createdAt:$g(),createdByUid:t.uid,createdByEmail:t.email||null});_(""),w(""),S(""),x(""),C(""),N(""),M("Resepti lis\xe4tty onnistuneesti."),r("list"),s(e.id)}catch(i){R((null===i||void 0===i?void 0:i.message)||"Tallennus ep\xe4onnistui.")}finally{A(!1)}}else R("Otsikko puuttuu.")},children:[(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Otsikko *"}),(0,Kv.jsx)("input",{className:"field__input",value:y,onChange:e=>_(e.target.value),placeholder:"Esim. Tonnikalapasta"})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Kategoria"}),(0,Kv.jsx)("input",{className:"field__input",value:b,onChange:e=>w(e.target.value),placeholder:"Esim. P\xe4\xe4ruoka / Iltapala / J\xe4lkiruoka",list:"recipeCategories"})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Kuvaus"}),(0,Kv.jsx)("input",{className:"field__input",value:k,onChange:e=>S(e.target.value),placeholder:"Lyhyt kuvaus (valinnainen)"})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Ainekset"}),(0,Kv.jsx)("textarea",{className:"field__input",value:E,onChange:e=>x(e.target.value),rows:5,placeholder:"Kirjoita esim. yksi aines per rivi"})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Ohje"}),(0,Kv.jsx)("textarea",{className:"field__input",value:T,onChange:e=>C(e.target.value),rows:6,placeholder:"Vaihe vaiheelta"})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"L\xe4hde (linkki)"}),(0,Kv.jsx)("input",{className:"field__input",value:I,onChange:e=>N(e.target.value),placeholder:"https://... (valinnainen)"})]}),L?(0,Kv.jsx)("div",{className:"error",children:L}):null,O?(0,Kv.jsx)("div",{className:"ok",children:O}):null,(0,Kv.jsxs)("div",{className:"row",style:{gap:10,alignItems:"center",flexWrap:"wrap"},children:[(0,Kv.jsx)("button",{className:"btn",type:"submit",disabled:P,children:P?"Tallennetaan...":"Lis\xe4\xe4 resepti"}),(0,Kv.jsx)("span",{className:"nav-muted",children:"* pakollinen"})]})]})]}):null]}),D?(0,Kv.jsxs)("div",{className:"modal",role:"dialog","aria-modal":"true","aria-label":"Muokkaa resepti\xe4",children:[(0,Kv.jsx)("div",{className:"modal__backdrop"}),(0,Kv.jsxs)("div",{className:"modal__panel modal__panel--sheet",children:[(0,Kv.jsxs)("div",{className:"row",style:{justifyContent:"space-between",gap:10,alignItems:"center"},children:[(0,Kv.jsx)("h3",{style:{margin:0},children:"Muokkaa resepti\xe4"}),(0,Kv.jsx)("button",{className:"icon-btn",type:"button","aria-label":"Sulje",onClick:ce,children:"\u2715"})]}),(0,Kv.jsxs)("div",{className:"grid",style:{gap:10,marginTop:10},children:[(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Otsikko *"}),(0,Kv.jsx)("input",{className:"field__input",value:z,onChange:e=>F(e.target.value)})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Kategoria"}),(0,Kv.jsx)("input",{className:"field__input",value:U,onChange:e=>V(e.target.value),list:"recipeCategories"})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Kuvaus"}),(0,Kv.jsx)("input",{className:"field__input",value:B,onChange:e=>H(e.target.value)})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Ainekset"}),(0,Kv.jsx)("textarea",{className:"field__input",value:q,onChange:e=>W(e.target.value),rows:5})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Ohje"}),(0,Kv.jsx)("textarea",{className:"field__input",value:K,onChange:e=>Z(e.target.value),rows:6})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"L\xe4hde (linkki)"}),(0,Kv.jsx)("input",{className:"field__input",value:G,onChange:e=>Q(e.target.value)})]}),X?(0,Kv.jsx)("div",{className:"error",children:X}):null,(0,Kv.jsxs)("div",{className:"row",style:{gap:10,flexWrap:"wrap"},children:[(0,Kv.jsx)("button",{className:"btn",type:"button",onClick:async function(){if(t&&null!==D&&void 0!==D&&D.id&&ue(D))if(String(z||"").trim()){Y(!0),$("");try{await Ov(vg(Bv,"recipes",D.id),{title:String(z||"").trim(),category:String(U||"").trim(),description:String(B||"").trim(),ingredients:String(q||"").trim(),instructions:String(K||"").trim(),sourceUrl:ae(G),updatedAt:$g(),updatedByUid:t.uid,updatedByEmail:t.email||null}),j(null)}catch(xy){$((null===xy||void 0===xy?void 0:xy.message)||"Tallennus ep\xe4onnistui.")}finally{Y(!1)}}else $("Otsikko puuttuu.")},disabled:J,children:J?"Tallennetaan...":"Tallenna"}),(0,Kv.jsx)("button",{className:"btn btn--secondary",type:"button",onClick:ce,disabled:J,children:"Peruuta"}),(0,Kv.jsx)("button",{className:"btn btn--danger",type:"button",onClick:()=>async function(e){if(!t||null===e||void 0===e||!e.id)return;if(!ue(e))return;const n=e.title?"\u201c".concat(e.title,"\u201d"):"t\xe4m\xe4 resepti";if(window.confirm("Poistetaanko ".concat(n,"?\n\nT\xe4t\xe4 ei voi perua."))){Y(!0),$("");try{await Mv(vg(Bv,"recipes",e.id)),(null===D||void 0===D?void 0:D.id)===e.id&&j(null)}catch(xy){$((null===xy||void 0===xy?void 0:xy.message)||"Poisto ep\xe4onnistui.")}finally{Y(!1)}}}(D),disabled:J,children:"Poista"})]}),n?(0,Kv.jsx)("div",{className:"nav-muted",children:"Admin: voit muokata ja poistaa kaikkien lis\xe4\xe4mi\xe4 reseptej\xe4."}):null]})]})]}):null]})}function by(){const[t,n]=(0,e.useState)(""),[i,r]=(0,e.useState)(!0),[o,s]=(0,e.useState)("");return(0,e.useEffect)(()=>{let e=!0;return async function(){r(!0),s("");try{const t=await fetch("".concat("/lile","/changelog.md"),{cache:"no-cache"});if(!t.ok)throw new Error("Versiohistorian lataus ep\xe4onnistui.");const i=await t.text();if(!e)return;n(i)}catch(xy){if(!e)return;s((null===xy||void 0===xy?void 0:xy.message)||"Versiohistorian lataus ep\xe4onnistui.")}finally{if(!e)return;r(!1)}}(),()=>{e=!1}},[]),(0,Kv.jsxs)("div",{children:[(0,Kv.jsx)("h2",{children:"Versiohistoria"}),i?(0,Kv.jsx)("div",{children:"Haetaan versiohistoriaa..."}):null,o?(0,Kv.jsx)("div",{className:"error",children:o}):null,i||o?null:(0,Kv.jsx)("pre",{className:"md",children:t})]})}function wy(){const[t,n]=(0,e.useState)(""),[i,r]=(0,e.useState)(!0),[o,s]=(0,e.useState)("");return(0,e.useEffect)(()=>{let e=!0;return async function(){r(!0),s("");try{const t=await fetch("".concat("/lile","/user_guide.md"),{cache:"no-cache"});if(!t.ok)throw new Error("Ohjeen lataus ep\xe4onnistui.");const i=await t.text();if(!e)return;n(i)}catch(xy){if(!e)return;s((null===xy||void 0===xy?void 0:xy.message)||"Ohjeen lataus ep\xe4onnistui.")}finally{if(!e)return;r(!1)}}(),()=>{e=!1}},[]),(0,Kv.jsxs)("div",{children:[(0,Kv.jsx)("h2",{children:"Ohjekirja"}),i?(0,Kv.jsx)("div",{children:"Haetaan ohjetta..."}):null,o?(0,Kv.jsx)("div",{className:"error",children:o}):null,i||o?null:(0,Kv.jsx)("pre",{className:"md",children:t})]})}function ky(){const{user:t}=qv(),n=Se(),i=be(),[r,o]=(0,e.useState)("login"),[s,a]=(0,e.useState)(""),[l,u]=(0,e.useState)(""),[c,h]=(0,e.useState)(!1),[d,f]=(0,e.useState)(""),p=(0,e.useMemo)(()=>"login"===r?"Kirjaudu sis\xe4\xe4n":"Luo tunnus",[r]);return(0,e.useEffect)(()=>{var e,r;if(!t)return;const o=null===(e=i.state)||void 0===e||null===(r=e.from)||void 0===r?void 0:r.pathname;n(o||"/",{replace:!0})},[t,i.state,n]),(0,Kv.jsx)("div",{className:"login",children:(0,Kv.jsxs)("div",{className:"login__card",children:[(0,Kv.jsx)("div",{className:"login__brand",children:"Lile Lahti"}),(0,Kv.jsx)("div",{className:"login__icon","aria-hidden":"true",children:"\ud83d\udd12"}),(0,Kv.jsx)("div",{className:"login__subtitle",children:"Kirjaudu sis\xe4\xe4n k\xe4ytt\xe4\xe4ksesi ty\xf6kaluja."}),(0,Kv.jsxs)("div",{className:"login__actions",children:[(0,Kv.jsx)("button",{className:"btn btn--primary",onClick:async function(){f(""),h(!0);try{await async function(e,t,n){if(Ti(e.app))return Promise.reject(Xi(e,"operation-not-supported-in-this-environment"));const i=ao(e);tr(e,t,Oo);const r=Cs(i,n);return new Os(i,"signInViaPopup",t,r).executeNotNull()}(Vv,Hv)}catch(xy){f((null===xy||void 0===xy?void 0:xy.message)||"Kirjautuminen ep\xe4onnistui.")}finally{h(!1)}},disabled:c,children:"Jatka Googlella"}),(0,Kv.jsx)("div",{className:"login__or",children:"tai"}),(0,Kv.jsxs)("form",{onSubmit:async function(e){e.preventDefault(),f(""),h(!0);try{"login"===r?await function(e,t,n){return Ti(e.app)?Promise.reject(er(e)):Go(pn(e),Ro.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Qo(e),t})}(Vv,s,l):await async function(e,t,n){if(Ti(e.app))return Promise.reject(er(e));const i=ao(e),r=yo(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Uo,"EMAIL_PASSWORD_PROVIDER"),o=await r.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Qo(e),t}),s=await Vo._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(s.user),s}(Vv,s,l)}catch(e){f((null===e||void 0===e?void 0:e.message)||"Toiminto ep\xe4onnistui.")}finally{h(!1)}},className:"login__form",children:[(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"S\xe4hk\xf6posti"}),(0,Kv.jsx)("input",{className:"field__input",type:"email",value:s,onChange:e=>a(e.target.value),required:!0,autoComplete:"email"})]}),(0,Kv.jsxs)("div",{className:"field",children:[(0,Kv.jsx)("label",{className:"field__label",children:"Salasana"}),(0,Kv.jsx)("input",{className:"field__input",type:"password",value:l,onChange:e=>u(e.target.value),required:!0,autoComplete:"login"===r?"current-password":"new-password"})]}),(0,Kv.jsx)("button",{className:"btn btn--secondary",type:"submit",disabled:c,children:"login"===r?"Kirjaudu sis\xe4\xe4n":"Luo uusi tunnus"})]}),(0,Kv.jsx)("button",{className:"btn btn--ghost",type:"button",onClick:()=>o("login"===r?"register":"login"),disabled:c,children:"login"===r?"Luo uusi tunnus":"Minulla on jo tunnus"})]}),(0,Kv.jsx)("h2",{className:"login__title",children:p}),d?(0,Kv.jsx)("div",{className:"login__error",children:d}):null]})})}function Sy(){const[t,n]=e.useState([]),[i,r]=e.useState("pending"),[o,s]=e.useState(""),[a,l]=e.useState(""),[c,h]=e.useState([]),[d,f]=e.useState(""),[p,m]=e.useState(""),[g,v]=e.useState("");e.useEffect(()=>{const e=jv(lv(gg(Bv,"placeRemovalRequests"),fv("requestedAt","desc")),e=>{const t=[];e.forEach(e=>t.push(u({id:e.id},e.data()))),n(t),l("")},e=>{l((null===e||void 0===e?void 0:e.message)||"Poistopyynt\xf6jen haku ep\xe4onnistui.")});return()=>e()},[]),e.useEffect(()=>{const e=jv(lv(gg(Bv,"users"),fv("lastSeenAt","desc")),e=>{const t=[];e.forEach(e=>t.push(u({id:e.id},e.data()))),h(t),f("")},e=>{f((null===e||void 0===e?void 0:e.message)||"K\xe4ytt\xe4jien haku ep\xe4onnistui.")});return()=>e()},[]);const y=e.useMemo(()=>"all"===i?t:t.filter(e=>(e.status||"pending")===i),[t,i]);async function _(e){if(null===e||void 0===e||!e.id)return;const t=e.placeName?"\u201c".concat(e.placeName,"\u201d"):"t\xe4m\xe4 paikka";if(window.confirm("Hyv\xe4ksyt\xe4\xe4nk\xf6 poistopyynt\xf6 ja poistetaanko ".concat(t,"?\n\nT\xe4t\xe4 ei voi perua."))){s(e.id),l("");try{if(e.placeId&&await Mv(vg(Bv,"places",e.placeId)),e.placeId){const t=lv(gg(Bv,"placeRemovalRequests"),cv("placeId","==",e.placeId),cv("status","==","pending")),i=await Rv(t),r=(kg(n=bl(n=Bv,wg)),new Cv(n,e=>zv(n,e)));let o=!1;i.forEach(e=>{r.update(e.ref,{status:"approved",resolvedAt:$g()}),o=!0}),o||r.update(vg(Bv,"placeRemovalRequests",e.id),{status:"approved",resolvedAt:$g()}),await r.commit()}else await Ov(vg(Bv,"placeRemovalRequests",e.id),{status:"approved",resolvedAt:$g()})}catch(xy){l((null===xy||void 0===xy?void 0:xy.message)||"Hyv\xe4ksynt\xe4 ep\xe4onnistui.")}finally{s("")}var n}}const b=e.useMemo(()=>{const e=String(g||"").trim().toLowerCase();return e?c.filter(t=>(t.email||"").toLowerCase().includes(e)):c},[c,g]);return(0,Kv.jsxs)("div",{children:[(0,Kv.jsx)("h2",{children:"Admin"}),(0,Kv.jsx)("p",{children:"T\xe4m\xe4 n\xe4kym\xe4 on vain yll\xe4pit\xe4j\xe4lle."}),(0,Kv.jsx)("h3",{children:"K\xe4ytt\xe4j\xe4t"}),(0,Kv.jsxs)("div",{className:"field",style:{marginBottom:12,maxWidth:420},children:[(0,Kv.jsx)("label",{className:"field__label",children:"Hae s\xe4hk\xf6postilla"}),(0,Kv.jsx)("input",{className:"field__input",value:g,onChange:e=>v(e.target.value),placeholder:"esim. nimi@domain.fi"})]}),d?(0,Kv.jsx)("div",{className:"error",children:d}):null,0===b.length?(0,Kv.jsx)("div",{className:"nav-muted",children:"Ei k\xe4ytt\xe4ji\xe4."}):null,(0,Kv.jsx)("div",{className:"places-list",style:{marginTop:12},children:b.map(e=>{var t,n;const i=(null===e||void 0===e?void 0:e.uid)||(null===e||void 0===e?void 0:e.id),r=p===i,o=null!==(t=e.createdAt)&&void 0!==t&&t.toDate?e.createdAt.toDate().toLocaleString("fi-FI"):"",s=null!==(n=e.lastSeenAt)&&void 0!==n&&n.toDate?e.lastSeenAt.toDate().toLocaleString("fi-FI"):"",a=e.status||"active";return(0,Kv.jsxs)("div",{className:"place-item",children:[(0,Kv.jsxs)("div",{className:"place-main",children:[(0,Kv.jsx)("div",{className:"place-title",children:e.email||"(ei s\xe4hk\xf6postia)"}),(0,Kv.jsxs)("div",{className:"place-sub",children:[(0,Kv.jsx)("span",{className:"badge",children:a}),o?(0,Kv.jsxs)("span",{className:"nav-muted",style:{marginLeft:8},children:["Rek.: ",o]}):null,s?(0,Kv.jsxs)("span",{className:"nav-muted",style:{marginLeft:8},children:["Viime: ",s]}):null]})]}),(0,Kv.jsxs)("div",{className:"place-actions",style:{display:"flex",gap:8,alignItems:"center"},children:[(0,Kv.jsx)("button",{className:"btn btn--secondary",type:"button",onClick:()=>async function(e){const t=(null===e||void 0===e?void 0:e.uid)||(null===e||void 0===e?void 0:e.id);if(!t)return;const n="blocked"!==(e.status||"active"),i=e.email?" (".concat(e.email,")"):"";if(window.confirm(n?"Estet\xe4\xe4nk\xf6 k\xe4ytt\xe4j\xe4".concat(i," k\xe4ytt\xe4m\xe4st\xe4 sovellusta?"):"Sallitaanko k\xe4ytt\xe4j\xe4n".concat(i," k\xe4ytt\xe4\xe4 sovellusta taas?"))){m(t),f("");try{await Ov(vg(Bv,"users",t),{status:n?"blocked":"active",updatedAt:$g()})}catch(xy){f((null===xy||void 0===xy?void 0:xy.message)||"Toiminto ep\xe4onnistui.")}finally{m("")}}}(e),disabled:r,children:"blocked"===a?"Salli":"Est\xe4"}),(0,Kv.jsx)("button",{className:"btn",type:"button",onClick:()=>async function(e){const t=(null===e||void 0===e?void 0:e.uid)||(null===e||void 0===e?void 0:e.id);if(!t)return;const n=e.email?" (".concat(e.email,")"):"";if(window.confirm("Poistetaanko k\xe4ytt\xe4j\xe4".concat(n," k\xe4yt\xf6st\xe4 (soft delete)?\n\nK\xe4ytt\xe4j\xe4 ei voi en\xe4\xe4 k\xe4ytt\xe4\xe4 sovellusta."))){m(t),f("");try{await Ov(vg(Bv,"users",t),{status:"deleted",updatedAt:$g()})}catch(xy){f((null===xy||void 0===xy?void 0:xy.message)||"Poisto ep\xe4onnistui.")}finally{m("")}}}(e),disabled:r,children:"Poista"})]})]},i)})}),(0,Kv.jsx)("h3",{children:"Ruokapaikkojen poistopyynn\xf6t"}),(0,Kv.jsxs)("div",{className:"tabs",style:{marginBottom:12},children:[(0,Kv.jsx)("button",{className:"pending"===i?"tab tab--active":"tab",type:"button",onClick:()=>r("pending"),children:"Odottaa"}),(0,Kv.jsx)("button",{className:"approved"===i?"tab tab--active":"tab",type:"button",onClick:()=>r("approved"),children:"Hyv\xe4ksytty"}),(0,Kv.jsx)("button",{className:"rejected"===i?"tab tab--active":"tab",type:"button",onClick:()=>r("rejected"),children:"Hyl\xe4tty"}),(0,Kv.jsx)("button",{className:"all"===i?"tab tab--active":"tab",type:"button",onClick:()=>r("all"),children:"Kaikki"})]}),a?(0,Kv.jsx)("div",{className:"error",children:a}):null,0===y.length?(0,Kv.jsx)("div",{className:"nav-muted",children:"Ei poistopyynt\xf6j\xe4."}):null,(0,Kv.jsx)("div",{className:"places-list",style:{marginTop:12},children:y.map(e=>{const t=e.status||"pending",n=o===e.id;return(0,Kv.jsxs)("div",{className:"place-item",children:[(0,Kv.jsxs)("div",{className:"place-main",children:[(0,Kv.jsx)("div",{className:"place-title",children:e.placeName||"(nimet\xf6n paikka)"}),(0,Kv.jsxs)("div",{className:"place-sub",children:[(0,Kv.jsx)("span",{className:"badge",children:t}),(0,Kv.jsx)("span",{className:"nav-muted",style:{marginLeft:8},children:e.requestedByEmail||"tuntematon k\xe4ytt\xe4j\xe4"})]})]}),(0,Kv.jsx)("div",{className:"place-actions",style:{display:"flex",gap:8,alignItems:"center"},children:"pending"===t?(0,Kv.jsxs)(Kv.Fragment,{children:[(0,Kv.jsx)("button",{className:"btn",type:"button",onClick:()=>_(e),disabled:n,children:n?"...":"Hyv\xe4ksy (poista paikka)"}),(0,Kv.jsx)("button",{className:"btn btn--secondary",type:"button",onClick:()=>async function(e){if(null!==e&&void 0!==e&&e.id){s(e.id),l("");try{await Ov(vg(Bv,"placeRemovalRequests",e.id),{status:"rejected",resolvedAt:$g()})}catch(xy){l((null===xy||void 0===xy?void 0:xy.message)||"Hylk\xe4ys ep\xe4onnistui.")}finally{s("")}}}(e),disabled:n,children:"Hylk\xe4\xe4"})]}):(0,Kv.jsx)("span",{className:"nav-muted",children:"K\xe4sitelty"})})]},e.id)})})]})}const Ey=function(){return(0,Kv.jsx)(Ct,{basename:"/lile",children:(0,Kv.jsx)(Ge,{children:(0,Kv.jsxs)(Ke,{element:(0,Kv.jsx)(Zv,{}),children:[(0,Kv.jsx)(Ke,{path:"/",element:(0,Kv.jsx)(Jv,{})}),(0,Kv.jsx)(Ke,{path:"/ruokapaikat",element:(0,Kv.jsx)(Gv,{children:(0,Kv.jsx)(yy,{})})}),(0,Kv.jsx)(Ke,{path:"/reseptit",element:(0,Kv.jsx)(Gv,{children:(0,Kv.jsx)(_y,{})})}),(0,Kv.jsx)(Ke,{path:"/ohjekirja",element:(0,Kv.jsx)(Gv,{children:(0,Kv.jsx)(wy,{})})}),(0,Kv.jsx)(Ke,{path:"/versiohistoria",element:(0,Kv.jsx)(by,{})}),(0,Kv.jsx)(Ke,{path:"/kirjaudu",element:(0,Kv.jsx)(ky,{})}),(0,Kv.jsx)(Ke,{path:"/admin",element:(0,Kv.jsx)(Qv,{children:(0,Kv.jsx)(Sy,{})})})]})})})};i.createRoot(document.getElementById("root")).render((0,Kv.jsx)(e.StrictMode,{children:(0,Kv.jsx)(Ey,{})}))})()})();
//# sourceMappingURL=main.9b7017ae.js.map